interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 08 Apr 2024 13:32:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "15628236071821911085"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup":
      {"type": "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"value": "nginx-acr"},
      "nfDefinitionGroup": {"value": "nginx"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1890'
      Content-Type:
      - application/json
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583143",
        "name": "AOSM_CLI_deployment_1712583143", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "15628236071821911085", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "nfDefinitionGroup": {"type": "String", "value":
        "nginx"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId": "9149ee99-dd06-426c-832e-2054530ed06f",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers", "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores",
        "locations": ["uksouth"]}, {"resourceType": "publishers/networkFunctionDefinitionGroups",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-nginx-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-nginx-publisher/nginx-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-nginx-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/networkFunctionDefinitionGroups/nginx",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
        "resourceName": "automated-cli-tests-nginx-publisher/nginx"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/networkFunctionDefinitionGroups/nginx"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3038'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:32:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "15628236071821911085"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup":
      {"type": "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"value": "nginx-acr"},
      "nfDefinitionGroup": {"value": "nginx"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1890'
      Content-Type:
      - application/json
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583143",
        "name": "AOSM_CLI_deployment_1712583143", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "15628236071821911085", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "nfDefinitionGroup": {"type": "String", "value":
        "nginx"}}, "mode": "Incremental", "provisioningState": "Accepted", "timestamp":
        "2024-04-08T13:32:24.4998877Z", "duration": "PT0.0006127S", "correlationId":
        "c19ef654-bf28-4990-8761-b0ab9c11a5f7", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkFunctionDefinitionGroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-nginx-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-nginx-publisher/nginx-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-nginx-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/networkFunctionDefinitionGroups/nginx",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
        "resourceName": "automated-cli-tests-nginx-publisher/nginx"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583143/operationStatuses/08584890237412830625?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2417'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:32:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:32:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:32:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:33:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:33:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:34:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:34:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:35:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:35:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890237412830625?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:36:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583143",
        "name": "AOSM_CLI_deployment_1712583143", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "15628236071821911085", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "nfDefinitionGroup": {"type": "String", "value":
        "nginx"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "2024-04-08T13:36:11.9460381Z", "duration": "PT3M47.4467631S", "correlationId":
        "c19ef654-bf28-4990-8761-b0ab9c11a5f7", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkFunctionDefinitionGroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-nginx-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-nginx-publisher/nginx-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-nginx-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/networkFunctionDefinitionGroups/nginx",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
        "resourceName": "automated-cli-tests-nginx-publisher/nginx"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/networkFunctionDefinitionGroups/nginx"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3054'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:36:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr/artifactManifests/nginx-acr-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr/artifactManifests/nginx-acr-manifest-1-0-0''
        under resource group ''cli_test_cnf_nfd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '337'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:36:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "14797403328055843136"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}}, "resources":
      [{"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "nginxdemo", "artifactType": "OCIArtifact", "artifactVersion": "0.1.0"}, {"artifactName":
      "nginx", "artifactType": "OCIArtifact", "artifactVersion": "stable"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-nginx-publisher"},
      "acrArtifactStoreName": {"value": "nginx-acr"}, "acrManifestName": {"value":
      "nginx-acr-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1521'
      Content-Type:
      - application/json
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583389",
        "name": "AOSM_CLI_deployment_1712583389", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14797403328055843136", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "acrManifestName": {"type": "String", "value":
        "nginx-acr-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "9b5fbb22-d32b-44b8-949c-e9a386f4b45e", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr/artifactManifests/nginx-acr-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1242'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:36:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "14797403328055843136"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}}, "resources":
      [{"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "nginxdemo", "artifactType": "OCIArtifact", "artifactVersion": "0.1.0"}, {"artifactName":
      "nginx", "artifactType": "OCIArtifact", "artifactVersion": "stable"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-nginx-publisher"},
      "acrArtifactStoreName": {"value": "nginx-acr"}, "acrManifestName": {"value":
      "nginx-acr-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1521'
      Content-Type:
      - application/json
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583389",
        "name": "AOSM_CLI_deployment_1712583389", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14797403328055843136", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "acrManifestName": {"type": "String", "value":
        "nginx-acr-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-04-08T13:36:30.3203885Z", "duration": "PT0.0001251S",
        "correlationId": "ab16bd7b-8730-407b-8b5b-90f2b2f6e362", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583389/operationStatuses/08584890234953828629?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '982'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:36:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890234953828629?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:36:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890234953828629?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:37:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890234953828629?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:37:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890234953828629?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:38:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712583389",
        "name": "AOSM_CLI_deployment_1712583389", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14797403328055843136", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "acrManifestName": {"type": "String", "value":
        "nginx-acr-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-04-08T13:37:53.1552234Z", "duration": "PT1M22.83496S",
        "correlationId": "ab16bd7b-8730-407b-8b5b-90f2b2f6e362", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr/artifactManifests/nginx-acr-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1256'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:38:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/artifactStores/nginx-acr/artifactManifests/nginx-acr-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "nginx-acr-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestsnginxpublishernginxacr2ff3ce5e30.azurecr.io",
        "repositories": ["nginxdemo", "nginx"], "expiry": "2024-04-09T13:38:02.9860289+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '338'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:38:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02644.2727
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "9207045453046196212"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {}}, "$fxv#1":
      {"replicaCount": 1, "image": {"repository": "overwriteme", "tag": "stable",
      "pullPolicy": "IfNotPresent"}, "nameOverride": "", "fullnameOverride": "", "serviceAccount":
      {"create": false, "name": null}, "podSecurityContext": {}, "securityContext":
      {}, "service": {"type": "ClusterIP", "port": 80}, "ingress": {"enabled": false,
      "annotations": {}, "hosts": [{"host": "chart-example.local", "paths": []}],
      "tls": []}, "resources": {}, "nodeSelector": {}, "tolerations": [], "affinity":
      {}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "ContainerizedNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureArcKubernetes", "networkFunctionApplications": [{"artifactType":
      "HelmPackage", "name": "nginxdemo", "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}, "artifactProfile": {"artifactStore":
      {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]"}, "helmArtifactProfile": {"helmPackageName":
      "nginxdemo", "helmPackageVersionRange": "0.1.0", "registryValuesPaths": [],
      "imagePullSecretsValuesPaths": ["imagePullSecrets"]}}, "deployParametersMappingRuleProfile":
      {"applicationEnablement": "Enabled", "helmMappingRuleProfile": {"releaseNamespace":
      "nginxdemo", "releaseName": "nginxdemo", "helmPackageVersion": "0.1.0", "values":
      "[string(variables(''$fxv#1''))]"}}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-nginx-publisher"},
      "acrArtifactStoreName": {"value": "nginx-acr"}, "nfDefinitionGroup": {"value":
      "nginx"}, "nfDefinitionVersion": {"value": "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3110'
      Content-Type:
      - application/json
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712584020",
        "name": "AOSM_CLI_deployment_1712584020", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9207045453046196212", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "nfDefinitionGroup": {"type": "String", "value":
        "nginx"}, "nfDefinitionVersion": {"type": "String", "value": "1.0.0"}}, "mode":
        "Incremental", "provisioningState": "Succeeded", "timestamp": "0001-01-01T00:00:00Z",
        "duration": "PT0S", "correlationId": "7165f52d-ba94-4f6f-884d-725c9097096d",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/networkFunctionDefinitionGroups/nginx/networkFunctionDefinitionVersions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:47:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "9207045453046196212"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {}}, "$fxv#1":
      {"replicaCount": 1, "image": {"repository": "overwriteme", "tag": "stable",
      "pullPolicy": "IfNotPresent"}, "nameOverride": "", "fullnameOverride": "", "serviceAccount":
      {"create": false, "name": null}, "podSecurityContext": {}, "securityContext":
      {}, "service": {"type": "ClusterIP", "port": 80}, "ingress": {"enabled": false,
      "annotations": {}, "hosts": [{"host": "chart-example.local", "paths": []}],
      "tls": []}, "resources": {}, "nodeSelector": {}, "tolerations": [], "affinity":
      {}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "ContainerizedNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureArcKubernetes", "networkFunctionApplications": [{"artifactType":
      "HelmPackage", "name": "nginxdemo", "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}, "artifactProfile": {"artifactStore":
      {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]"}, "helmArtifactProfile": {"helmPackageName":
      "nginxdemo", "helmPackageVersionRange": "0.1.0", "registryValuesPaths": [],
      "imagePullSecretsValuesPaths": ["imagePullSecrets"]}}, "deployParametersMappingRuleProfile":
      {"applicationEnablement": "Enabled", "helmMappingRuleProfile": {"releaseNamespace":
      "nginxdemo", "releaseName": "nginxdemo", "helmPackageVersion": "0.1.0", "values":
      "[string(variables(''$fxv#1''))]"}}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-nginx-publisher"},
      "acrArtifactStoreName": {"value": "nginx-acr"}, "nfDefinitionGroup": {"value":
      "nginx"}, "nfDefinitionVersion": {"value": "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3110'
      Content-Type:
      - application/json
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712584020",
        "name": "AOSM_CLI_deployment_1712584020", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9207045453046196212", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "nfDefinitionGroup": {"type": "String", "value":
        "nginx"}, "nfDefinitionVersion": {"type": "String", "value": "1.0.0"}}, "mode":
        "Incremental", "provisioningState": "Accepted", "timestamp": "2024-04-08T13:47:02.2366536Z",
        "duration": "PT0.0005969S", "correlationId": "76b1fce0-3a14-45ea-bfd5-647529235e9e",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712584020/operationStatuses/08584890228634061705?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1058'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:47:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890228634061705?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:47:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890228634061705?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:47:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890228634061705?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:48:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584890228634061705?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:48:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -b --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712584020",
        "name": "AOSM_CLI_deployment_1712584020", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9207045453046196212", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-nginx-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "nginx-acr"}, "nfDefinitionGroup": {"type": "String", "value":
        "nginx"}, "nfDefinitionVersion": {"type": "String", "value": "1.0.0"}}, "mode":
        "Incremental", "provisioningState": "Succeeded", "timestamp": "2024-04-08T13:48:22.6624869Z",
        "duration": "PT1M20.4264302S", "correlationId": "76b1fce0-3a14-45ea-bfd5-647529235e9e",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cnf_nfd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-nginx-publisher/networkFunctionDefinitionGroups/nginx/networkFunctionDefinitionVersions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1344'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 08 Apr 2024 13:48:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
