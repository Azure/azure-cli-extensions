interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:38:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "9771301664694570425"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2479'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241520",
        "name": "AOSM_CLI_deployment_1712241520", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9771301664694570425", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "0ebfe690-c8ff-4f62-8ace-a2aaac6b8c49", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkfunctiondefinitiongroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4028'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:38:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "9771301664694570425"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2479'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241520",
        "name": "AOSM_CLI_deployment_1712241520", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9771301664694570425", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Accepted",
        "timestamp": "2024-04-04T14:38:42.1515583Z", "duration": "PT0.0005496S", "correlationId":
        "d829fcbc-b890-47b3-8384-13f9286bee0a", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkfunctiondefinitiongroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241520/operationStatuses/08584893653635032774?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '3182'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:38:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:38:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:39:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:39:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:40:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:40:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:41:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:41:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893653635032774?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241520",
        "name": "AOSM_CLI_deployment_1712241520", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9771301664694570425", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "2024-04-04T14:42:27.9929297Z", "duration": "PT3M45.841921S",
        "correlationId": "d829fcbc-b890-47b3-8384-13f9286bee0a", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers",
        "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores", "locations":
        ["uksouth"]}, {"resourceType": "publishers/networkfunctiondefinitiongroups",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4043'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '343'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '349'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "11478219774459692018"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2298'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241770",
        "name": "AOSM_CLI_deployment_1712241770", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "11478219774459692018", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "7186083b-f100-48de-ac1b-24cab75a8cf1", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1668'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "11478219774459692018"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2298'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241770",
        "name": "AOSM_CLI_deployment_1712241770", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "11478219774459692018", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-04-04T14:42:51.7311036Z", "duration": "PT0.0001135S",
        "correlationId": "ea73f218-f9b4-4c6b-89b3-8b92b1026f0e", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241770/operationStatuses/08584893651139347256?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1139'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893651139347256?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:42:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893651139347256?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:43:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893651139347256?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:43:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893651139347256?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241770",
        "name": "AOSM_CLI_deployment_1712241770", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "11478219774459692018", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-04-04T14:44:16.0842356Z", "duration": "PT1M24.3532455S",
        "correlationId": "ea73f218-f9b4-4c6b-89b3-8b92b1026f0e", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1684'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-vm-acr-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",
        "repositories": ["automated-cli-tests-artifact"], "expiry": "2024-04-05T14:44:25.2084029+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '353'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02644.2727
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:25 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:25 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 80a82840-40e1-4be2-af2d-c5b902e374b2
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/80a82840-40e1-4be2-af2d-c5b902e374b2?_nouploadcache=false&_state=6DRsd04B10eD90RF_gQ2O-2WI6uycOrkXsInFWgZ2Zp7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6IjgwYTgyODQwLTQwZTEtNGJlMi1hZjJkLWM1YjkwMmUzNzRiMiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNC0wNFQxNDo0NDoyNS45Nzg2MDU5NjNaIn0%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: "{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"metadata\": {\n    \"_generator\": {\n
      \     \"name\": \"bicep\",\n      \"version\": \"0.8.9.13224\",\n      \"templateHash\":
      \"14979664264804385741\"\n    }\n  },\n  \"parameters\": {\n    \"location\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"[resourceGroup().location]\"\n
      \   },\n    \"subnetName\": {\n      \"type\": \"string\"\n    },\n    \"ubuntuVmName\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"ubuntu-vm\"\n    },\n
      \   \"virtualNetworkId\": {\n      \"type\": \"string\"\n    },\n    \"sshPublicKeyAdmin\":
      {\n      \"type\": \"string\"\n    },\n    \"imageName\": {\n      \"type\":
      \"string\"\n    }\n  },\n  \"variables\": {\n    \"imageResourceGroup\": \"[resourceGroup().name]\",\n
      \   \"subscriptionId\": \"[subscription().subscriptionId]\",\n    \"vmSizeSku\":
      \"Standard_D2s_v3\"\n  },\n  \"resources\": [\n    {\n      \"type\": \"Microsoft.Network/networkInterfaces\",\n
      \     \"apiVersion\": \"2021-05-01\",\n      \"name\": \"[format('{0}_nic',
      parameters('ubuntuVmName'))]\",\n      \"location\": \"[parameters('location')]\",\n
      \     \"properties\": {\n        \"ipConfigurations\": [\n          {\n            \"name\":
      \"ipconfig1\",\n            \"properties\": {\n              \"subnet\": {\n
      \               \"id\": \"[format('{0}/subnets/{1}', parameters('virtualNetworkId'),
      parameters('subnetName'))]\"\n              },\n              \"primary\": true,\n
      \             \"privateIPAddressVersion\": \"IPv4\"\n            }\n          }\n
      \       ]\n      }\n    },\n    {\n      \"type\": \"Microsoft.Compute/virtualMachines\",\n
      \     \"apiVersion\": \"2021-07-01\",\n      \"name\": \"[parameters('ubuntuVmName')]\",\n
      \     \"location\": \"[parameters('location')]\",\n      \"properties\": {\n
      \       \"hardwareProfile\": {\n          \"vmSize\": \"[variables('vmSizeSku')]\"\n
      \       },\n        \"storageProfile\": {\n          \"imageReference\": {\n
      \           \"id\": \"[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}',
      variables('subscriptionId'), variables('imageResourceGroup')), 'Microsoft.Compute/images',
      parameters('imageName'))]\"\n          },\n          \"osDisk\": {\n            \"osType\":
      \"Linux\",\n            \"name\": \"[format('{0}_disk', parameters('ubuntuVmName'))]\",\n
      \           \"createOption\": \"FromImage\",\n            \"caching\": \"ReadWrite\",\n
      \           \"writeAcceleratorEnabled\": false,\n            \"managedDisk\":
      \"[json('{\\\"storageAccountType\\\": \\\"Premium_LRS\\\"}')]\",\n            \"deleteOption\":
      \"Delete\",\n            \"diskSizeGB\": 30\n          }\n        },\n        \"osProfile\":
      {\n          \"computerName\": \"[parameters('ubuntuVmName')]\",\n          \"adminUsername\":
      \"azureuser\",\n          \"linuxConfiguration\": {\n            \"disablePasswordAuthentication\":
      true,\n            \"ssh\": {\n              \"publicKeys\": [\n                {\n
      \                 \"path\": \"/home/azureuser/.ssh/authorized_keys\",\n                  \"keyData\":
      \"[parameters('sshPublicKeyAdmin')]\"\n                }\n              ]\n
      \           },\n            \"provisionVMAgent\": true,\n            \"patchSettings\":
      {\n              \"patchMode\": \"ImageDefault\",\n              \"assessmentMode\":
      \"ImageDefault\"\n            }\n          },\n          \"secrets\": [],\n
      \         \"allowExtensionOperations\": true\n        },\n        \"networkProfile\":
      {\n          \"networkInterfaces\": [\n            {\n              \"id\":
      \"[resourceId('Microsoft.Network/networkInterfaces', format('{0}_nic', parameters('ubuntuVmName')))]\"\n
      \           }\n          ]\n        }\n      },\n      \"dependsOn\": [\n        \"[resourceId('Microsoft.Network/networkInterfaces',
      format('{0}_nic', parameters('ubuntuVmName')))]\"\n      ]\n    }\n  ]\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '3591'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/80a82840-40e1-4be2-af2d-c5b902e374b2?_nouploadcache=false&_state=6DRsd04B10eD90RF_gQ2O-2WI6uycOrkXsInFWgZ2Zp7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6IjgwYTgyODQwLTQwZTEtNGJlMi1hZjJkLWM1YjkwMmUzNzRiMiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNC0wNFQxNDo0NDoyNS45Nzg2MDU5NjNaIn0%3D&digest=sha256%3Ae71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      docker-content-digest:
      - sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - d6f48409-d33e-420e-9b55-5195625d9f45
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/d6f48409-d33e-420e-9b55-5195625d9f45?_nouploadcache=false&_state=q1pTvEUHeGWjnq7LmSDOqVsfqG8BS-3xw5Ivns1SNjp7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImQ2ZjQ4NDA5LWQzM2UtNDIwZS05YjU1LTUxOTU2MjVkOWY0NSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNC0wNFQxNDo0NDoyNi40NTUzMjk3NjdaIn0%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/d6f48409-d33e-420e-9b55-5195625d9f45?_nouploadcache=false&_state=q1pTvEUHeGWjnq7LmSDOqVsfqG8BS-3xw5Ivns1SNjp7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImQ2ZjQ4NDA5LWQzM2UtNDIwZS05YjU1LTUxOTU2MjVkOWY0NSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNC0wNFQxNDo0NDoyNi40NTUzMjk3NjdaIn0%3D&digest=sha256%3A44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      docker-content-digest:
      - sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",scope="repository:automated-cli-tests-artifact:push,pull"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apush%2Cpull
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:26 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:44:27 GMT
      docker-content-digest:
      - sha256:17d25d33c38f40fda4c9e45a0cec218b3f7f75e9c680ed8dd2a12ed0abdbc36b
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/manifests/sha256:17d25d33c38f40fda4c9e45a0cec218b3f7f75e9c680ed8dd2a12ed0abdbc36b
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"storageAccountId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-blob-store-HostedResources-12989225/providers/Microsoft.Storage/storageAccounts/12989225ubuntublobstore3",
        "containerCredentials": [{"containerName": "automatedclitestsvhd-1-0-0", "containerSasUri":
        "https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx"}],
        "expiry": "2024-04-05T14:44:29.1436427+00:00", "credentialType": "AzureStorageAccountToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '533'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02644.2727
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-blob-content-length:
      - '512'
      x-ms-blob-type:
      - PageBlob
      x-ms-date:
      - Thu, 04 Apr 2024 14:44:29 GMT
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:44:28 GMT
      etag:
      - '"0x8DC54B5BBAAB376"'
      last-modified:
      - Thu, 04 Apr 2024 14:44:29 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: "61 38 6b 92 16 4b cc ac 6f d4 02 5c 6f 62 79 b9 \n8e 62 ae 07 02 1c dc
      73 5b 7a 51 e7 56 4e 4a b0 \n54 4a 93 2e 6b dd 3c b5 8b 60 fa 80 b1 80 1b 89
      \n1e 4d 7d 86 8e 25 76 58 24 8d 21 87 83 06 88 d6 \na4 fd 94 9c 66 b6 db ee
      92 46 f0 25 fc 84 bb f5 \n3f d9 49 28 ea 54 6a 2a 33 fa e0 47 eb 22 af 91 \nd4
      34 a6 d9 fe 58 cb 54 03 35 d6 45 40 96 4e f3 \n31 ea 78 20 45 e9 f2 3a de cb
      38 53 c0 9c b2 b7 \n12 9e 57 d9 f6 1b cb 20 23 8c 86 d3 40 da 84 c3 \n22 5b
      48 61 63 e2 5f 5f 43 6d 8f 41 fc ce c1 87 \n33 e1 e2 61 63 e2 5f 5"
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '512'
      Content-Type:
      - application/octet-stream
      If-Match:
      - '"0x8DC54B5BBAAB376"'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-date:
      - Thu, 04 Apr 2024 14:44:29 GMT
      x-ms-page-write:
      - update
      x-ms-range:
      - bytes=0-511
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?comp=page&sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:44:28 GMT
      etag:
      - '"0x8DC54B5BBB49377"'
      last-modified:
      - Thu, 04 Apr 2024 14:44:29 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-sequence-number:
      - '0'
      x-ms-content-crc64:
      - iWvWqElPrJg=
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "2401756790987457130"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3769'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241874",
        "name": "AOSM_CLI_deployment_1712241874", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2401756790987457130", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId": "4028284b-bd6c-4d82-a3f6-acea57bc2788",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1412'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "2401756790987457130"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3769'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241874",
        "name": "AOSM_CLI_deployment_1712241874", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2401756790987457130", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Accepted", "timestamp":
        "2024-04-04T14:44:35.6176283Z", "duration": "PT0.0001237S", "correlationId":
        "aadf33da-03e8-436a-ae2d-597768daef0b", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241874/operationStatuses/08584893650100618708?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1137'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893650100618708?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:44:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893650100618708?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:45:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893650100618708?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:45:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893650100618708?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:46:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241874",
        "name": "AOSM_CLI_deployment_1712241874", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2401756790987457130", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "2024-04-04T14:45:57.5097645Z", "duration": "PT1M21.8922599S", "correlationId":
        "aadf33da-03e8-436a-ae2d-597768daef0b", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1428'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:46:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd build
      Connection:
      - keep-alive
      ParameterSetName:
      - -f
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm/networkFunctionDefinitionVersions/1.0.0?api-version=2023-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0",
        "name": "1.0.0", "type": "microsoft.hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "location": "uksouth", "systemData": {"createdBy": "xxxxxxxxxxx@microsoft.com",
        "createdByType": "User", "createdAt": "2024-04-04T14:44:36.1395651Z", "lastModifiedBy":
        "xxxxxxxxxxx@microsoft.com", "lastModifiedByType": "User", "lastModifiedAt":
        "2024-04-04T14:44:36.1395651Z"}, "properties": {"networkFunctionTemplate":
        {"networkFunctionApplications": [{"artifactProfile": {"vhdArtifactProfile":
        {"vhdName": "automated-cli-tests-vhd", "vhdVersion": "1-0-0"}, "artifactStore":
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"}},
        "deployParametersMappingRuleProfile": {"vhdImageMappingRuleProfile": {"userConfiguration":
        "{\"imageHyperVGeneration\":\"V1\",\"imageName\":\"ubuntu-vmImage\"}"}, "applicationEnablement":
        "Enabled"}, "artifactType": "VhdImageFile", "dependsOnProfile": null, "name":
        "automated-cli-tests-vhd"}, {"artifactProfile": {"templateArtifactProfile":
        {"templateName": "automated-cli-tests-artifact", "templateVersion": "1.0.0"},
        "artifactStore": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"}},
        "deployParametersMappingRuleProfile": {"templateMappingRuleProfile": {"templateParameters":
        "{\"imageName\":\"ubuntu-vmImage\",\"subnetName\":\"{deployParameters.automated-cli-tests-artifact.subnetName}\",\"virtualNetworkId\":\"{deployParameters.automated-cli-tests-artifact.virtualNetworkId}\",\"sshPublicKeyAdmin\":\"{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}\"}"},
        "applicationEnablement": "Enabled"}, "artifactType": "ArmTemplate", "dependsOnProfile":
        null, "name": "automated-cli-tests-artifact"}], "nfviType": "AzureCore"},
        "versionState": "Preview", "description": null, "deployParameters": "{\"$schema\":\"https://json-schema.org/draft-07/schema#\",\"title\":\"DeployParametersSchema\",\"type\":\"object\",\"properties\":{\"automated-cli-tests-artifact\":{\"type\":\"object\",\"properties\":{\"subnetName\":{\"type\":\"string\"},\"virtualNetworkId\":{\"type\":\"string\"},\"sshPublicKeyAdmin\":{\"type\":\"string\"}},\"required\":[\"subnetName\",\"virtualNetworkId\",\"sshPublicKeyAdmin\"]}},\"required\":[\"automated-cli-tests-artifact\"]}",
        "networkFunctionType": "VirtualNetworkFunction", "provisioningState": "Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:46:06 GMT
      etag:
      - '"7d009bce-0000-1100-0000-660ebce40000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:46:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "16458090697636768419"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string"}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1771'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241971",
        "name": "AOSM_CLI_deployment_1712241971", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "16458090697636768419", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "ceaf7030-15ca-42a3-88ca-6d5935665c79", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3034'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:46:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "16458090697636768419"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string"}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1771'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241971",
        "name": "AOSM_CLI_deployment_1712241971", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "16458090697636768419", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Accepted",
        "timestamp": "2024-04-04T14:46:12.736678Z", "duration": "PT0.0001562S", "correlationId":
        "9056105b-18eb-4982-8be1-b449195dc0ab", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241971/operationStatuses/08584893649129404241?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2412'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:46:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:46:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:46:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:47:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:47:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:48:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:48:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:49:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:49:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893649129404241?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:50:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712241971",
        "name": "AOSM_CLI_deployment_1712241971", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "16458090697636768419", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "2024-04-04T14:49:57.173482Z", "duration": "PT3M44.4369602S",
        "correlationId": "9056105b-18eb-4982-8be1-b449195dc0ab", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers",
        "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores", "locations":
        ["uksouth"]}, {"resourceType": "publishers/networkservicedesigngroups", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3049'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:50:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '340'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:50:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "18201670719450227448"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1408'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242220",
        "name": "AOSM_CLI_deployment_1712242220", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "18201670719450227448", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "5041c2fc-b421-4549-bf99-5d7d7e6ce6e5", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1248'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:50:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "18201670719450227448"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1408'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242220",
        "name": "AOSM_CLI_deployment_1712242220", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "18201670719450227448", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-04-04T14:50:21.3927835Z", "duration": "PT0.0002063S",
        "correlationId": "90789c26-94bf-4906-a418-e6acd0c14f83", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242220/operationStatuses/08584893646642409449?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '985'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:50:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893646642409449?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:50:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893646642409449?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:50:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893646642409449?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:51:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893646642409449?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      connection:
      - close
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:51:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242220",
        "name": "AOSM_CLI_deployment_1712242220", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "18201670719450227448", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-04-04T14:51:43.5157738Z", "duration": "PT1M22.1231966S",
        "correlationId": "90789c26-94bf-4906-a418-e6acd0c14f83", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1264'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:51:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-nsd-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",
        "repositories": ["ubuntu"], "expiry": "2024-04-05T14:52:08.973772+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '327'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02644.2727
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:09 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:09 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:52:09 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - cdd6c3de-6eb1-49c6-8d8e-7de864876fc3
      location:
      - /v2/ubuntu/blobs/uploads/cdd6c3de-6eb1-49c6-8d8e-7de864876fc3?_nouploadcache=false&_state=1l8FOw8eo1T9LIcRRlGV0nL4lDF62nba9GuCQp0ub1d7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiY2RkNmMzZGUtNmViMS00OWM2LThkOGUtN2RlODY0ODc2ZmMzIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA0LTA0VDE0OjUyOjA5LjkxMDkyNzc3NFoifQ%3D%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "9336036242217096757"}}, "parameters": {"configObject":
      {"type": "secureObject"}}, "variables": {"resourceGroupId": "[resourceGroup().id]",
      "identityObject": "[if(equals(parameters(''configObject'').managedIdentityId,
      ''''), createObject(''type'', ''SystemAssigned''), createObject(''type'', ''UserAssigned'',
      ''userAssignedIdentities'', createObject(format(''{0}'', parameters(''configObject'').managedIdentityId),
      createObject())))]", "nfdvSymbolicName": "[format(''{0}/{1}/{2}'', parameters(''configObject'').publisherName,
      parameters(''configObject'').nfdgName, parameters(''configObject'').nfdvName)]"},
      "resources": [{"copy": {"name": "nfResource", "count": "[length(parameters(''configObject'').deploymentParameters)]"},
      "type": "Microsoft.HybridNetwork/networkFunctions", "apiVersion": "2023-09-01",
      "name": "[format(''{0}{1}'', parameters(''configObject'').nfdgName, copyIndex())]",
      "location": "[parameters(''configObject'').location]", "identity": "[variables(''identityObject'')]",
      "properties": {"networkFunctionDefinitionVersionResourceReference": {"id": "[extensionResourceId(format(''/subscriptions/{0}/resourceGroups/{1}'',
      subscription().subscriptionId, parameters(''configObject'').publisherResourceGroup),
      ''Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions'',
      split(variables(''nfdvSymbolicName''), ''/'')[0], split(variables(''nfdvSymbolicName''),
      ''/'')[1], split(variables(''nfdvSymbolicName''), ''/'')[2])]", "idType": "Open"},
      "nfviType": "AzureCore", "nfviId": "[if(equals(parameters(''configObject'').customLocationId,
      ''''), variables(''resourceGroupId''), parameters(''configObject'').customLocationId)]",
      "allowSoftwareUpdate": true, "configurationType": "Open", "deploymentValues":
      "[string(parameters(''configObject'').deploymentParameters[copyIndex()])]"}}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '1991'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/blobs/uploads/cdd6c3de-6eb1-49c6-8d8e-7de864876fc3?_nouploadcache=false&_state=1l8FOw8eo1T9LIcRRlGV0nL4lDF62nba9GuCQp0ub1d7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiY2RkNmMzZGUtNmViMS00OWM2LThkOGUtN2RlODY0ODc2ZmMzIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA0LTA0VDE0OjUyOjA5LjkxMDkyNzc3NFoifQ%3D%3D&digest=sha256%3A4790420892150e597343e33698ac14bbab43508e7c92e0d51aa0e7bdec80c0cb
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      docker-content-digest:
      - sha256:4790420892150e597343e33698ac14bbab43508e7c92e0d51aa0e7bdec80c0cb
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:4790420892150e597343e33698ac14bbab43508e7c92e0d51aa0e7bdec80c0cb
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - dd47f867-4378-4ea2-9ccc-e2382b5280a2
      location:
      - /v2/ubuntu/blobs/uploads/dd47f867-4378-4ea2-9ccc-e2382b5280a2?_nouploadcache=false&_state=z21udgEHu_GtfDqqodTauoZzqsvEoyTzUeK9TLwlRu57Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiZGQ0N2Y4NjctNDM3OC00ZWEyLTljY2MtZTIzODJiNTI4MGEyIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA0LTA0VDE0OjUyOjEwLjMyNDYxNzQ3MloifQ%3D%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/blobs/uploads/dd47f867-4378-4ea2-9ccc-e2382b5280a2?_nouploadcache=false&_state=z21udgEHu_GtfDqqodTauoZzqsvEoyTzUeK9TLwlRu57Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiZGQ0N2Y4NjctNDM3OC00ZWEyLTljY2MtZTIzODJiNTI4MGEyIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA0LTA0VDE0OjUyOjEwLjMyNDYxNzQ3MloifQ%3D%3D&digest=sha256%3A44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      docker-content-digest:
      - sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1991,
      "digest": "sha256:4790420892150e597343e33698ac14bbab43508e7c92e0d51aa0e7bdec80c0cb",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io",scope="repository:ubuntu:push,pull"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io&scope=repository%3Aubuntu%3Apush%2Cpull
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1991,
      "digest": "sha256:4790420892150e597343e33698ac14bbab43508e7c92e0d51aa0e7bdec80c0cb",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuacfe356307a0.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 04 Apr 2024 14:52:10 GMT
      docker-content-digest:
      - sha256:669701dda12e954304e4ead3f36a98f4ce1cc07e39b164a4f59de37cbf103bdf
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/manifests/sha256:669701dda12e954304e4ead3f36a98f4ce1cc07e39b164a4f59de37cbf103bdf
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "1834094740832830547"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdvName": {"type": "string"}, "deploymentParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdvName", "deploymentParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-tests-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdvName": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdvName}",
      "deploymentParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deploymentParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[parameters(''nfviSiteName'')]", "type": "AzureCore"}},
      "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4162'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242347",
        "name": "AOSM_CLI_deployment_1712242347", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1834094740832830547", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration":
        "PT0S", "correlationId": "7605e519-55b3-49ca-9f4a-f6d33f9a0548", "providers":
        [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups/networkservicedesignversions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      connection:
      - close
      content-length:
      - '2504'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.13.1.58284", "templateHash": "1834094740832830547"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdvName": {"type": "string"}, "deploymentParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdvName", "deploymentParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-tests-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdvName": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdvName}",
      "deploymentParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deploymentParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[parameters(''nfviSiteName'')]", "type": "AzureCore"}},
      "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4162'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242347",
        "name": "AOSM_CLI_deployment_1712242347", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1834094740832830547", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Accepted", "timestamp": "2024-04-04T14:52:29.3765215Z",
        "duration": "PT0.0002907S", "correlationId": "2cfd5d1b-ce86-4dff-a795-2e601928aa98",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups/networkservicedesignversions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242347/operationStatuses/08584893645364517127?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2014'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893645364517127?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893645364517127?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:52:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584893645364517127?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:53:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.57.0.post20240219064455 azsdk-python-core/1.30.0 Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1712242347",
        "name": "AOSM_CLI_deployment_1712242347", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1834094740832830547", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Succeeded", "timestamp": "2024-04-04T14:53:11.5919466Z",
        "duration": "PT42.2157158S", "correlationId": "2cfd5d1b-ce86-4dff-a795-2e601928aa98",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups/networkservicedesignversions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2518'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 04 Apr 2024 14:53:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
