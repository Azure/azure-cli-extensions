interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:13:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: AEE929B3D2354D228CFA07CF570BDFD0 Ref B: AMS231032609011 Ref C: 2024-05-16T13:13:35Z'
    status:
      code: 204
      message: No Content
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "9985939870973944498"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2477'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865222",
        "name": "AOSM_CLI_deployment_1715865222", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9985939870973944498", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String", "value":
        "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId": "77a3e13c-97d2-4175-b17a-d3f9f54059b1",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers", "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores",
        "locations": ["uksouth"]}, {"resourceType": "publishers/networkfunctiondefinitiongroups",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu-vm"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4011'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:13:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: FC6182160EDE43F28D49842520910B35 Ref B: AMS231032609011 Ref C: 2024-05-16T13:13:42Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "9985939870973944498"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2477'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865222",
        "name": "AOSM_CLI_deployment_1715865222", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9985939870973944498", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String", "value":
        "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Accepted", "timestamp":
        "2024-05-16T13:13:43.7643336Z", "duration": "PT0.0003056S", "correlationId":
        "2e7b8304-6741-403d-aba1-4acb55ee97fa", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkfunctiondefinitiongroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu-vm"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865222/operationStatuses/08584857416620304885?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '3169'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:13:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: FD05195932E04404AC103C5D7C1EE48F Ref B: AMS231032609011 Ref C: 2024-05-16T13:13:43Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:13:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: AB4ECDA1EF034A24829C61A94A038E63 Ref B: AMS231032609011 Ref C: 2024-05-16T13:13:43Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:14:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: C3EF0295BE7E4B57BF3B72C7046B0CE6 Ref B: AMS231032609011 Ref C: 2024-05-16T13:14:13Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:14:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 53C17852A284440EA46F9F0602344617 Ref B: AMS231032609011 Ref C: 2024-05-16T13:14:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:15:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: DEB853B391484A14B9F6BF325D0F7DF4 Ref B: AMS231032609011 Ref C: 2024-05-16T13:15:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:15:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: C970CCF6AF3C4A8093AFEB937EAAEC7A Ref B: AMS231032609011 Ref C: 2024-05-16T13:15:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:16:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 961F440A658D44E28B5950DC396BC046 Ref B: AMS231032609011 Ref C: 2024-05-16T13:16:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:16:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 1FC95E53BEE6445ABA8C64AF2E9573CC Ref B: AMS231032609011 Ref C: 2024-05-16T13:16:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: D288FB4922CA4997839E1DD1D3D7C424 Ref B: AMS231032609011 Ref C: 2024-05-16T13:17:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857416620304885?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: BE533FE210C949738464B9326C1B10BA Ref B: AMS231032609011 Ref C: 2024-05-16T13:17:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865222",
        "name": "AOSM_CLI_deployment_1715865222", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9985939870973944498", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String", "value":
        "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "2024-05-16T13:17:33.985939Z", "duration": "PT3M50.221911S", "correlationId":
        "2e7b8304-6741-403d-aba1-4acb55ee97fa", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkfunctiondefinitiongroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu-vm"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4025'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 983AB826A1604BBFB0D5EF91D8B0A6FF Ref B: AMS231032609011 Ref C: 2024-05-16T13:17:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '342'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: 229045B415B541399B33BD3AEC1E01A1 Ref B: AMS231020512039 Ref C: 2024-05-16T13:17:45Z'
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '348'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: ABFA486919024AB9912BF79C1A562A02 Ref B: AMS231020512039 Ref C: 2024-05-16T13:17:45Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "2261224723127030745"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2295'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865469",
        "name": "AOSM_CLI_deployment_1715865469", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2261224723127030745", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String", "value":
        "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String", "value":
        "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "f589c6b6-a540-4c63-aedf-688f5368392a", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1664'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 11643D69FF5544AA856F5A98E7A4EADD Ref B: AMS231032609011 Ref C: 2024-05-16T13:17:50Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "2261224723127030745"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2295'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865469",
        "name": "AOSM_CLI_deployment_1715865469", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2261224723127030745", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String", "value":
        "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String", "value":
        "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-05-16T13:17:51.3558997Z", "duration": "PT0.0006541S",
        "correlationId": "06bb6840-baef-4410-83b4-f0a15a83c853", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865469/operationStatuses/08584857414144542294?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1137'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: F3970AA468864BD88EC639C58B70D375 Ref B: AMS231032609011 Ref C: 2024-05-16T13:17:50Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857414144542294?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:17:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: B2E0363DCDEB4697BDA07ECD16AEB93B Ref B: AMS231032609011 Ref C: 2024-05-16T13:17:51Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857414144542294?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:18:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 03BC84AA9E854953B9DEF282EEEB4913 Ref B: AMS231032609011 Ref C: 2024-05-16T13:18:21Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857414144542294?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:18:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: D16F797029EA41F28D609ED009BCF252 Ref B: AMS231032609011 Ref C: 2024-05-16T13:18:51Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857414144542294?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 847FB376321545CAB422CCCFDAB1E34F Ref B: AMS231032609011 Ref C: 2024-05-16T13:19:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865469",
        "name": "AOSM_CLI_deployment_1715865469", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2261224723127030745", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String", "value":
        "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String", "value":
        "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-05-16T13:19:16.9006501Z", "duration": "PT1M25.5454045S",
        "correlationId": "06bb6840-baef-4410-83b4-f0a15a83c853", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1680'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: EF8C775717E140389956A5EB9A2D3DF7 Ref B: AMS231032609011 Ref C: 2024-05-16T13:19:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-vm-acr-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",
        "repositories": ["automated-cli-tests-artifact"], "expiry": "2024-05-17T13:19:26.6073723+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '353'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02682.2890
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 2CB2CE8B42954911A19CA8FD4FE8D294 Ref B: AMS231032608051 Ref C: 2024-05-16T13:19:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token",service="automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token?service=automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - b45885f0-8d3e-4b14-918e-66a684f39a48
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/b45885f0-8d3e-4b14-918e-66a684f39a48?_nouploadcache=false&_state=heCEhq4snCr7FxF3rktsY2-Nn0eIAE_0vekGxP7kFGR7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImI0NTg4NWYwLThkM2UtNGIxNC05MThlLTY2YTY4NGYzOWE0OCIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0xNlQxMzoxOToyNy4zNDE3NDgzMDlaIn0%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: "{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"metadata\": {\n    \"_generator\": {\n
      \     \"name\": \"bicep\",\n      \"version\": \"0.8.9.13224\",\n      \"templateHash\":
      \"14979664264804385741\"\n    }\n  },\n  \"parameters\": {\n    \"location\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"[resourceGroup().location]\"\n
      \   },\n    \"subnetName\": {\n      \"type\": \"string\"\n    },\n    \"ubuntuVmName\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"ubuntu-vm\"\n    },\n
      \   \"virtualNetworkId\": {\n      \"type\": \"string\"\n    },\n    \"sshPublicKeyAdmin\":
      {\n      \"type\": \"string\"\n    },\n    \"imageName\": {\n      \"type\":
      \"string\"\n    }\n  },\n  \"variables\": {\n    \"imageResourceGroup\": \"[resourceGroup().name]\",\n
      \   \"subscriptionId\": \"[subscription().subscriptionId]\",\n    \"vmSizeSku\":
      \"Standard_D2s_v3\"\n  },\n  \"resources\": [\n    {\n      \"type\": \"Microsoft.Network/networkInterfaces\",\n
      \     \"apiVersion\": \"2021-05-01\",\n      \"name\": \"[format('{0}_nic',
      parameters('ubuntuVmName'))]\",\n      \"location\": \"[parameters('location')]\",\n
      \     \"properties\": {\n        \"ipConfigurations\": [\n          {\n            \"name\":
      \"ipconfig1\",\n            \"properties\": {\n              \"subnet\": {\n
      \               \"id\": \"[format('{0}/subnets/{1}', parameters('virtualNetworkId'),
      parameters('subnetName'))]\"\n              },\n              \"primary\": true,\n
      \             \"privateIPAddressVersion\": \"IPv4\"\n            }\n          }\n
      \       ]\n      }\n    },\n    {\n      \"type\": \"Microsoft.Compute/virtualMachines\",\n
      \     \"apiVersion\": \"2021-07-01\",\n      \"name\": \"[parameters('ubuntuVmName')]\",\n
      \     \"location\": \"[parameters('location')]\",\n      \"properties\": {\n
      \       \"hardwareProfile\": {\n          \"vmSize\": \"[variables('vmSizeSku')]\"\n
      \       },\n        \"storageProfile\": {\n          \"imageReference\": {\n
      \           \"id\": \"[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}',
      variables('subscriptionId'), variables('imageResourceGroup')), 'Microsoft.Compute/images',
      parameters('imageName'))]\"\n          },\n          \"osDisk\": {\n            \"osType\":
      \"Linux\",\n            \"name\": \"[format('{0}_disk', parameters('ubuntuVmName'))]\",\n
      \           \"createOption\": \"FromImage\",\n            \"caching\": \"ReadWrite\",\n
      \           \"writeAcceleratorEnabled\": false,\n            \"managedDisk\":
      \"[json('{\\\"storageAccountType\\\": \\\"Premium_LRS\\\"}')]\",\n            \"deleteOption\":
      \"Delete\",\n            \"diskSizeGB\": 30\n          }\n        },\n        \"osProfile\":
      {\n          \"computerName\": \"[parameters('ubuntuVmName')]\",\n          \"adminUsername\":
      \"azureuser\",\n          \"linuxConfiguration\": {\n            \"disablePasswordAuthentication\":
      true,\n            \"ssh\": {\n              \"publicKeys\": [\n                {\n
      \                 \"path\": \"/home/azureuser/.ssh/authorized_keys\",\n                  \"keyData\":
      \"[parameters('sshPublicKeyAdmin')]\"\n                }\n              ]\n
      \           },\n            \"provisionVMAgent\": true,\n            \"patchSettings\":
      {\n              \"patchMode\": \"ImageDefault\",\n              \"assessmentMode\":
      \"ImageDefault\"\n            }\n          },\n          \"secrets\": [],\n
      \         \"allowExtensionOperations\": true\n        },\n        \"networkProfile\":
      {\n          \"networkInterfaces\": [\n            {\n              \"id\":
      \"[resourceId('Microsoft.Network/networkInterfaces', format('{0}_nic', parameters('ubuntuVmName')))]\"\n
      \           }\n          ]\n        }\n      },\n      \"dependsOn\": [\n        \"[resourceId('Microsoft.Network/networkInterfaces',
      format('{0}_nic', parameters('ubuntuVmName')))]\"\n      ]\n    }\n  ]\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '3591'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/b45885f0-8d3e-4b14-918e-66a684f39a48?_nouploadcache=false&_state=heCEhq4snCr7FxF3rktsY2-Nn0eIAE_0vekGxP7kFGR7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImI0NTg4NWYwLThkM2UtNGIxNC05MThlLTY2YTY4NGYzOWE0OCIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0xNlQxMzoxOToyNy4zNDE3NDgzMDlaIn0%3D&digest=sha256%3Ae71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      docker-content-digest:
      - sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token",service="automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token?service=automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - f887b9be-3034-480a-a575-a55982278762
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/f887b9be-3034-480a-a575-a55982278762?_nouploadcache=false&_state=J_uL_DRaNLeaRouvG0QhwhMQZaRS-DLUHU2zqgiQiVZ7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImY4ODdiOWJlLTMwMzQtNDgwYS1hNTc1LWE1NTk4MjI3ODc2MiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0xNlQxMzoxOToyNy41NDY3MjkwOTRaIn0%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/f887b9be-3034-480a-a575-a55982278762?_nouploadcache=false&_state=J_uL_DRaNLeaRouvG0QhwhMQZaRS-DLUHU2zqgiQiVZ7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImY4ODdiOWJlLTMwMzQtNDgwYS1hNTc1LWE1NTk4MjI3ODc2MiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0xNlQxMzoxOToyNy41NDY3MjkwOTRaIn0%3D&digest=sha256%3Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      docker-content-digest:
      - sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token",service="automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token?service=automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:27 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:19:28 GMT
      docker-content-digest:
      - sha256:8923fa544da97914212bc9173ec512741d331940e4a2c7b6fbad979657a5c507
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/manifests/sha256:8923fa544da97914212bc9173ec512741d331940e4a2c7b6fbad979657a5c507
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"storageAccountId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-blob-store-HostedResources-347129EE/providers/Microsoft.Storage/storageAccounts/347129eeubuntublobstoree",
        "containerCredentials": [{"containerName": "automatedclitestsvhd-1-0-0", "containerSasUri":
        "https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx"}],
        "expiry": "2024-05-17T13:19:32.1674541+00:00", "credentialType": "AzureStorageAccountToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '533'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02682.2890
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 5E8502602877440ABCA5ADCE3CC7420C Ref B: AMS231032608051 Ref C: 2024-05-16T13:19:28Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-blob-content-length:
      - '512'
      x-ms-blob-type:
      - PageBlob
      x-ms-date:
      - Thu, 16 May 2024 13:19:31 GMT
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:19:32 GMT
      etag:
      - '"0x8DC75AAD2EA9689"'
      last-modified:
      - Thu, 16 May 2024 13:19:32 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: "61 38 6b 92 16 4b cc ac 6f d4 02 5c 6f 62 79 b9 \n8e 62 ae 07 02 1c dc
      73 5b 7a 51 e7 56 4e 4a b0 \n54 4a 93 2e 6b dd 3c b5 8b 60 fa 80 b1 80 1b 89
      \n1e 4d 7d 86 8e 25 76 58 24 8d 21 87 83 06 88 d6 \na4 fd 94 9c 66 b6 db ee
      92 46 f0 25 fc 84 bb f5 \n3f d9 49 28 ea 54 6a 2a 33 fa e0 47 eb 22 af 91 \nd4
      34 a6 d9 fe 58 cb 54 03 35 d6 45 40 96 4e f3 \n31 ea 78 20 45 e9 f2 3a de cb
      38 53 c0 9c b2 b7 \n12 9e 57 d9 f6 1b cb 20 23 8c 86 d3 40 da 84 c3 \n22 5b
      48 61 63 e2 5f 5f 43 6d 8f 41 fc ce c1 87 \n33 e1 e2 61 63 e2 5f 5"
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '512'
      Content-Type:
      - application/octet-stream
      If-Match:
      - '"0x8DC75AAD2EA9689"'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-date:
      - Thu, 16 May 2024 13:19:31 GMT
      x-ms-page-write:
      - update
      x-ms-range:
      - bytes=0-511
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?comp=page&sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:19:32 GMT
      etag:
      - '"0x8DC75AAD2FB4C95"'
      last-modified:
      - Thu, 16 May 2024 13:19:32 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-sequence-number:
      - '0'
      x-ms-content-crc64:
      - iWvWqElPrJg=
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "7199002541811128072"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-test-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3767'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865575",
        "name": "AOSM_CLI_deployment_1715865575", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "7199002541811128072", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String", "value":
        "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value": "1.0.0"}},
        "mode": "Incremental", "provisioningState": "Succeeded", "timestamp": "0001-01-01T00:00:00Z",
        "duration": "PT0S", "correlationId": "cbf0f372-f0b1-4a6e-b1b6-f5228554b27e",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1410'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 5A440756CE564092A0012037E1CE74C8 Ref B: AMS231032609011 Ref C: 2024-05-16T13:19:36Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "7199002541811128072"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-test-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3767'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865575",
        "name": "AOSM_CLI_deployment_1715865575", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "7199002541811128072", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String", "value":
        "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value": "1.0.0"}},
        "mode": "Incremental", "provisioningState": "Accepted", "timestamp": "2024-05-16T13:19:37.5390256Z",
        "duration": "PT0.0008989S", "correlationId": "605deb24-be1e-4560-b117-d4c98486fca1",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865575/operationStatuses/08584857413082804196?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1136'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 8C565E7B3F0B45C1907FDF2DCFBAA538 Ref B: AMS231032609011 Ref C: 2024-05-16T13:19:36Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857413082804196?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:19:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 3731069922F74493B6DBA9D028863F11 Ref B: AMS231032609011 Ref C: 2024-05-16T13:19:37Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857413082804196?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:20:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 8A5E00258B91456E9707F70F9952044D Ref B: AMS231032609011 Ref C: 2024-05-16T13:20:07Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857413082804196?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:20:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 99D8321B51C24FEA86908736F3923BB5 Ref B: AMS231032609011 Ref C: 2024-05-16T13:20:37Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857413082804196?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:21:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 7636FB43A9A84CF59702D141C77E376D Ref B: AMS231032609011 Ref C: 2024-05-16T13:21:07Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865575",
        "name": "AOSM_CLI_deployment_1715865575", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "7199002541811128072", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type": "String",
        "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String", "value":
        "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value": "1.0.0"}},
        "mode": "Incremental", "provisioningState": "Succeeded", "timestamp": "2024-05-16T13:21:01.6958398Z",
        "duration": "PT1M24.1577131S", "correlationId": "605deb24-be1e-4560-b117-d4c98486fca1",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1426'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:21:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 1CD503EF22344EB3B76B3433904C7F0B Ref B: AMS231032609011 Ref C: 2024-05-16T13:21:08Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd build
      Connection:
      - keep-alive
      ParameterSetName:
      - -f
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm/networkFunctionDefinitionVersions/1.0.0?api-version=2023-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0",
        "name": "1.0.0", "type": "microsoft.hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "location": "uksouth", "systemData": {"createdBy": "xxxxxxxxxxx@microsoft.com",
        "createdByType": "User", "createdAt": "2024-05-16T13:19:38.3543487Z", "lastModifiedBy":
        "xxxxxxxxxxx@microsoft.com", "lastModifiedByType": "User", "lastModifiedAt":
        "2024-05-16T13:19:38.3543487Z"}, "properties": {"networkFunctionTemplate":
        {"networkFunctionApplications": [{"artifactProfile": {"vhdArtifactProfile":
        {"vhdName": "automated-cli-tests-vhd", "vhdVersion": "1-0-0"}, "artifactStore":
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-blob-store"}},
        "deployParametersMappingRuleProfile": {"vhdImageMappingRuleProfile": {"userConfiguration":
        "{\"imageHyperVGeneration\":\"V1\",\"imageName\":\"ubuntu-vmImage\"}"}, "applicationEnablement":
        "Enabled"}, "artifactType": "VhdImageFile", "dependsOnProfile": null, "name":
        "automated-cli-tests-vhd"}, {"artifactProfile": {"templateArtifactProfile":
        {"templateName": "automated-cli-tests-artifact", "templateVersion": "1.0.0"},
        "artifactStore": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr"}},
        "deployParametersMappingRuleProfile": {"templateMappingRuleProfile": {"templateParameters":
        "{\"imageName\":\"ubuntu-vmImage\",\"subnetName\":\"{deployParameters.automated-cli-tests-artifact.subnetName}\",\"virtualNetworkId\":\"{deployParameters.automated-cli-tests-artifact.virtualNetworkId}\",\"sshPublicKeyAdmin\":\"{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}\"}"},
        "applicationEnablement": "Enabled"}, "artifactType": "ArmTemplate", "dependsOnProfile":
        null, "name": "automated-cli-tests-artifact"}], "nfviType": "AzureCore"},
        "versionState": "Preview", "description": null, "deployParameters": "{\"$schema\":\"https://json-schema.org/draft-07/schema#\",\"title\":\"DeployParametersSchema\",\"type\":\"object\",\"properties\":{\"automated-cli-tests-artifact\":{\"type\":\"object\",\"properties\":{\"subnetName\":{\"type\":\"string\"},\"virtualNetworkId\":{\"type\":\"string\"},\"sshPublicKeyAdmin\":{\"type\":\"string\"}},\"required\":[\"subnetName\",\"virtualNetworkId\",\"sshPublicKeyAdmin\"]}},\"required\":[\"automated-cli-tests-artifact\"]}",
        "networkFunctionType": "VirtualNetworkFunction", "provisioningState": "Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2890'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:21:08 GMT
      etag:
      - '"8102429a-0000-1100-0000-664608020000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
      x-msedge-ref:
      - 'Ref A: 9B09078532A842DEA29E45D7CC2E6E25 Ref B: AMS231020512049 Ref C: 2024-05-16T13:21:08Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:21:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 52001CD74CC94EB9A13C65FCC06A9CE4 Ref B: AMS231032608039 Ref C: 2024-05-16T13:21:08Z'
    status:
      code: 204
      message: No Content
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "1380436735645816911"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1868'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865672",
        "name": "AOSM_CLI_deployment_1715865672", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1380436735645816911", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String", "value":
        "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId": "1d0660cd-51fa-4a6d-b4ee-a4493e1e7ca1",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers", "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores",
        "locations": ["uksouth"]}, {"resourceType": "publishers/networkservicedesigngroups",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:21:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 526E88A38D3B4267A693EE604D91C794 Ref B: AMS231032608039 Ref C: 2024-05-16T13:21:12Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "1380436735645816911"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1868'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865672",
        "name": "AOSM_CLI_deployment_1715865672", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1380436735645816911", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String", "value":
        "ubuntu"}}, "mode": "Incremental", "provisioningState": "Accepted", "timestamp":
        "2024-05-16T13:21:13.6528969Z", "duration": "PT0.0008027S", "correlationId":
        "8b803bcc-ee3f-4a8a-8814-e80b50bb7032", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865672/operationStatuses/08584857412121796145?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2403'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:21:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: F615F6F759F04071A9CD65BD90FACF36 Ref B: AMS231032608039 Ref C: 2024-05-16T13:21:13Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:21:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 625484A343CF4ACF9B9223845E5A14B2 Ref B: AMS231032608039 Ref C: 2024-05-16T13:21:13Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:21:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: F2090A4A735849C0A14CAB6B0A570ACC Ref B: AMS231032608039 Ref C: 2024-05-16T13:21:43Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:22:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: F6E7A2C841BC4E2ABCD68F651389989B Ref B: AMS231032608039 Ref C: 2024-05-16T13:22:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:22:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: B42483699B9747FD902DE0FBC3819B0B Ref B: AMS231032608039 Ref C: 2024-05-16T13:22:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:23:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 7A22D514B78C4305A8BFA923F929367F Ref B: AMS231032608039 Ref C: 2024-05-16T13:23:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:23:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 27B25A9F98404D6DA2DF7992D0E7A63E Ref B: AMS231032608039 Ref C: 2024-05-16T13:23:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:24:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: B6C1F41D8E1642D888D8F71AB8C4B4E8 Ref B: AMS231032608039 Ref C: 2024-05-16T13:24:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:24:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 894009C0FB85454FBEAF4634ADD00995 Ref B: AMS231032608039 Ref C: 2024-05-16T13:24:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857412121796145?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:25:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 6B3B355BACEB4BDA84016BC2312A4BD5 Ref B: AMS231032608039 Ref C: 2024-05-16T13:25:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865672",
        "name": "AOSM_CLI_deployment_1715865672", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1380436735645816911", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String", "value":
        "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "2024-05-16T13:25:04.4314399Z", "duration": "PT3M50.7793457S", "correlationId":
        "8b803bcc-ee3f-4a8a-8814-e80b50bb7032", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-test-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-test-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3037'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:25:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 47FDEAB6E508439EBE5859D405003D7D Ref B: AMS231032608039 Ref C: 2024-05-16T13:25:14Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '339'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:25:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: 90039917A23B4E8EB2195DCC4A7062B3 Ref B: AMS231022012023 Ref C: 2024-05-16T13:25:15Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "1992933778514196637"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-test-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1405'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865920",
        "name": "AOSM_CLI_deployment_1715865920", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1992933778514196637", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String", "value":
        "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "f728f02f-45f4-4d87-b435-a90d24af03d0", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1245'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:25:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 2902399C77914101971604E529272BC1 Ref B: AMS231032608039 Ref C: 2024-05-16T13:25:20Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "1992933778514196637"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-test-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1405'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865920",
        "name": "AOSM_CLI_deployment_1715865920", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1992933778514196637", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String", "value":
        "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-05-16T13:25:21.5211147Z", "duration": "PT0.0003759S",
        "correlationId": "b460fdae-c1e3-47ad-a48c-738b61a85344", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865920/operationStatuses/08584857409641771577?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '983'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:25:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
      x-msedge-ref:
      - 'Ref A: E3AF687AAF0D45868EE156A28678F38D Ref B: AMS231032608039 Ref C: 2024-05-16T13:25:21Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857409641771577?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:25:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 15EAAF9190E24AA9A72378565ED5B20E Ref B: AMS231032608039 Ref C: 2024-05-16T13:25:21Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857409641771577?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:25:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 3089B746ED73487BAF62D176EBAACCA3 Ref B: AMS231032608039 Ref C: 2024-05-16T13:25:51Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857409641771577?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:26:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 676E99DBD8124E59B68A1C62C599776D Ref B: AMS231032608039 Ref C: 2024-05-16T13:26:21Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857409641771577?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:26:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 21E0CC66A3AB4251A6A479F501A6B8AC Ref B: AMS231032608039 Ref C: 2024-05-16T13:26:51Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857409641771577?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 9D82CC3E27164ADF933D49DD0BD1E546 Ref B: AMS231032608039 Ref C: 2024-05-16T13:27:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715865920",
        "name": "AOSM_CLI_deployment_1715865920", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1992933778514196637", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String", "value":
        "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-05-16T13:27:00.6509591Z", "duration": "PT1M39.1302203S",
        "correlationId": "b460fdae-c1e3-47ad-a48c-738b61a85344", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1261'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 5275FFE5A81A47F78DA2D17BE9BC82A7 Ref B: AMS231032608039 Ref C: 2024-05-16T13:27:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-test-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-nsd-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",
        "repositories": ["ubuntu"], "expiry": "2024-05-17T13:27:31.2077429+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02682.2890
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 435E7BB53E67495B9E46E1A64376504F Ref B: AMS231032608019 Ref C: 2024-05-16T13:27:26Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:31 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token",service="automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token?service=automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:31 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:27:31 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 7487b8e1-09fe-4860-b7ae-5216f38be014
      location:
      - /v2/ubuntu/blobs/uploads/7487b8e1-09fe-4860-b7ae-5216f38be014?_nouploadcache=false&_state=jaJRee_Sa9j3nr8X_Ru9UUU3gKSHBBbYbitLZj8xY5F7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiNzQ4N2I4ZTEtMDlmZS00ODYwLWI3YWUtNTIxNmYzOGJlMDE0IiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTE2VDEzOjI3OjMxLjkwNzU2MjE2WiJ9
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "8518384207964034190"}}, "parameters": {"configObject":
      {"type": "secureObject"}}, "variables": {"resourceGroupId": "[resourceGroup().id]",
      "identityObject": "[if(equals(parameters(''configObject'').managedIdentityId,
      ''''), createObject(''type'', ''SystemAssigned''), createObject(''type'', ''UserAssigned'',
      ''userAssignedIdentities'', createObject(format(''{0}'', parameters(''configObject'').managedIdentityId),
      createObject())))]", "nfdvSymbolicName": "[format(''{0}/{1}/{2}'', parameters(''configObject'').publisherName,
      parameters(''configObject'').nfdgName, parameters(''configObject'').nfdv)]"},
      "resources": [{"copy": {"name": "nfResource", "count": "[length(parameters(''configObject'').deployParameters)]"},
      "type": "Microsoft.HybridNetwork/networkFunctions", "apiVersion": "2023-09-01",
      "name": "[format(''{0}{1}'', parameters(''configObject'').nfdgName, copyIndex())]",
      "location": "[parameters(''configObject'').location]", "identity": "[variables(''identityObject'')]",
      "properties": {"networkFunctionDefinitionVersionResourceReference": {"id": "[extensionResourceId(format(''/subscriptions/{0}/resourceGroups/{1}'',
      subscription().subscriptionId, parameters(''configObject'').publisherResourceGroup),
      ''Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions'',
      split(variables(''nfdvSymbolicName''), ''/'')[0], split(variables(''nfdvSymbolicName''),
      ''/'')[1], split(variables(''nfdvSymbolicName''), ''/'')[2])]", "idType": "Open"},
      "nfviType": "AzureCore", "nfviId": "[if(equals(parameters(''configObject'').customLocationId,
      ''''), variables(''resourceGroupId''), parameters(''configObject'').customLocationId)]",
      "allowSoftwareUpdate": true, "configurationType": "Open", "deploymentValues":
      "[string(parameters(''configObject'').deployParameters[copyIndex()])]"}}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '1978'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/blobs/uploads/7487b8e1-09fe-4860-b7ae-5216f38be014?_nouploadcache=false&_state=jaJRee_Sa9j3nr8X_Ru9UUU3gKSHBBbYbitLZj8xY5F7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiNzQ4N2I4ZTEtMDlmZS00ODYwLWI3YWUtNTIxNmYzOGJlMDE0IiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTE2VDEzOjI3OjMxLjkwNzU2MjE2WiJ9&digest=sha256%3A1de8a2eeb110ed93ac8d61feceadcce5c95cd2dea2adff9ae11166d87e254dfa
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      docker-content-digest:
      - sha256:1de8a2eeb110ed93ac8d61feceadcce5c95cd2dea2adff9ae11166d87e254dfa
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:1de8a2eeb110ed93ac8d61feceadcce5c95cd2dea2adff9ae11166d87e254dfa
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token",service="automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token?service=automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - e078b9d5-14fa-46e7-9b15-bdb74519b39d
      location:
      - /v2/ubuntu/blobs/uploads/e078b9d5-14fa-46e7-9b15-bdb74519b39d?_nouploadcache=false&_state=78uimI17jHujBjaGksghrzHl__g5lucu0f7Slw0t9h17Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiZTA3OGI5ZDUtMTRmYS00NmU3LTliMTUtYmRiNzQ1MTliMzlkIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTE2VDEzOjI3OjMyLjE2OTYyMDk1WiJ9
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/blobs/uploads/e078b9d5-14fa-46e7-9b15-bdb74519b39d?_nouploadcache=false&_state=78uimI17jHujBjaGksghrzHl__g5lucu0f7Slw0t9h17Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiZTA3OGI5ZDUtMTRmYS00NmU3LTliMTUtYmRiNzQ1MTliMzlkIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTE2VDEzOjI3OjMyLjE2OTYyMDk1WiJ9&digest=sha256%3Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      docker-content-digest:
      - sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1978,
      "digest": "sha256:1de8a2eeb110ed93ac8d61feceadcce5c95cd2dea2adff9ae11166d87e254dfa",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token",service="automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/oauth2/token?service=automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1978,
      "digest": "sha256:1de8a2eeb110ed93ac8d61feceadcce5c95cd2dea2adff9ae11166d87e254dfa",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestubuntupublisherubuntuacra9a49dcf8d.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 16 May 2024 13:27:32 GMT
      docker-content-digest:
      - sha256:1d0f31e46a08c4480c4c9c0cb762af78641b8cdf0a8e8a34eb1acbd7ac8709e3
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/manifests/sha256:1d0f31e46a08c4480c4c9c0cb762af78641b8cdf0a8e8a34eb1acbd7ac8709e3
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "14894350570770659033"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdv": {"type": "string"}, "deployParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdv", "deployParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-test-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdv": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdv}",
      "deployParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deployParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[format(''{0}1'', parameters(''nfviSiteName''))]", "type":
      "AzureCore"}}, "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-test-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4144'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715866056",
        "name": "AOSM_CLI_deployment_1715866056", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14894350570770659033", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String", "value":
        "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"}, "nfviSiteName":
        {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "75ad3e49-8508-4deb-b27c-d36a39c1171a", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/configurationGroupSchemas",
        "locations": ["uksouth"]}, {"resourceType": "publishers/networkservicedesigngroups/networkservicedesignversions",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-test-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu/1.0.0"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2498'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 3DF90826487D40E3B9F02B685B9D992D Ref B: AMS231032608039 Ref C: 2024-05-16T13:27:36Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "14894350570770659033"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdv": {"type": "string"}, "deployParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdv", "deployParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-test-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdv": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdv}",
      "deployParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deployParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[format(''{0}1'', parameters(''nfviSiteName''))]", "type":
      "AzureCore"}}, "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-test-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4144'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715866056",
        "name": "AOSM_CLI_deployment_1715866056", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14894350570770659033", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String", "value":
        "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"}, "nfviSiteName":
        {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-05-16T13:27:37.8308659Z", "duration": "PT0.000137S",
        "correlationId": "51367dad-03ec-417b-9500-99978209c2ff", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/configurationGroupSchemas",
        "locations": ["uksouth"]}, {"resourceType": "publishers/networkservicedesigngroups/networkservicedesignversions",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-test-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu/1.0.0"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715866056/operationStatuses/08584857408279481178?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2009'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 6C01D11F389E472886B24511812EB3BA Ref B: AMS231032608039 Ref C: 2024-05-16T13:27:37Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857408279481178?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:27:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 8AD0EB0BF1544187834338924D8DDCAD Ref B: AMS231032608039 Ref C: 2024-05-16T13:27:37Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857408279481178?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:28:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: F833192C9EA34DB2A19B7DD8F2C242CB Ref B: AMS231032608039 Ref C: 2024-05-16T13:28:08Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584857408279481178?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:28:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 87A55AC74E734C65B15CF088F7E16E68 Ref B: AMS231032608039 Ref C: 2024-05-16T13:28:38Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715866056",
        "name": "AOSM_CLI_deployment_1715866056", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14894350570770659033", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-test-ubuntu-publisher"}, "acrArtifactStoreName": {"type":
        "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String", "value":
        "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"}, "nfviSiteName":
        {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-05-16T13:28:33.3548492Z", "duration": "PT55.5241203S",
        "correlationId": "51367dad-03ec-417b-9500-99978209c2ff", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/configurationGroupSchemas",
        "locations": ["uksouth"]}, {"resourceType": "publishers/networkservicedesigngroups/networkservicedesignversions",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-test-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-test-ubuntu-publisher/ubuntu/1.0.0"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-test-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2512'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 16 May 2024 13:28:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: E6E4C887EDDE466C9F5A9EEB89E7EFD9 Ref B: AMS231032608039 Ref C: 2024-05-16T13:28:38Z'
    status:
      code: 200
      message: OK
version: 1
