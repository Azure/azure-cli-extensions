interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:36:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test","name":"patrykkulik-test","type":"Microsoft.Resources/resourceGroups","location":"eastus","tags":{"autoDelete":"true","expiresOn":"2023-08-20T10:48:11.8928180Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher","name":"ubuntuPublisher","type":"microsoft.hybridnetwork/publishers","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T10:35:08.3094719Z","lastModifiedBy":"patrykkulik@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-24T10:35:08.3094719Z"},"properties":{"scope":"Private","provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '550'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:39 GMT
      etag:
      - '"0b00b59c-0000-1100-0000-64be53e60000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr","name":"ubuntu-acr","type":"microsoft.hybridnetwork/publishers/artifactstores","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T10:36:42.2618346Z","lastModifiedBy":"b8ed041c-aa91-418e-8f47-20c70abc2de1","lastModifiedByType":"Application","lastModifiedAt":"2023-07-26T13:47:35.8021183Z"},"properties":{"storeType":"AzureContainerRegistry","replicationStrategy":"SingleReplication","managedResourceGroupConfiguration":{"name":"ubuntu-acr-HostedResources-7510103F","location":"uksouth"},"provisioningState":"Succeeded","storageResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-acr-HostedResources-7510103F/providers/Microsoft.ContainerRegistry/registries/UbuntupublisherUbuntuAcr2315dcfa83"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '978'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:40 GMT
      etag:
      - '"010076a6-0000-1100-0000-64c123f70000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store","name":"ubuntu-blob-store","type":"microsoft.hybridnetwork/publishers/artifactstores","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T10:40:16.8226627Z","lastModifiedBy":"b8ed041c-aa91-418e-8f47-20c70abc2de1","lastModifiedByType":"Application","lastModifiedAt":"2023-07-26T13:45:04.3464487Z"},"properties":{"storeType":"AzureStorageAccount","replicationStrategy":"SingleReplication","managedResourceGroupConfiguration":{"name":"ubuntu-blob-store-HostedResources-07BDF073","location":"uksouth"},"provisioningState":"Succeeded","storageResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-blob-store-HostedResources-07BDF073/providers/Microsoft.Storage/storageAccounts/07bdf073ubuntublobstorea"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '988'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:40 GMT
      etag:
      - '"0100a7a4-0000-1100-0000-64c123600000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg","name":"ubuntu-vm-nfdg","type":"microsoft.hybridnetwork/publishers/networkfunctiondefinitiongroups","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T10:42:52.0873069Z","lastModifiedBy":"patrykkulik@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-24T10:42:52.0873069Z"},"properties":{"description":null,"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '629'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:40 GMT
      etag:
      - '"0f00e901-0000-1100-0000-64be55b40000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0''
        under resource group ''patrykkulik-test'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '311'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0''
        under resource group ''patrykkulik-test'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '317'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "17926458934195505860"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}, "nfName": {"type": "string",
      "metadata": {"description": "Name of Network Function. Used predominantly as
      a prefix for other variable names"}}, "vhdVersion": {"type": "string", "metadata":
      {"description": "The version that you want to name the NFM VHD artifact, in
      format A-B-C. e.g. 6-13-0"}}, "armTemplateVersion": {"type": "string", "metadata":
      {"description": "The name under which to store the ARM template"}}}, "resources":
      [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "[format(''{0}-vhd'', parameters(''nfName''))]", "artifactType": "VhdImageFile",
      "artifactVersion": "[parameters(''vhdVersion'')]"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "[format(''{0}-arm-template'', parameters(''nfName''))]", "artifactType": "ArmTemplate",
      "artifactVersion": "[parameters(''armTemplateVersion'')]"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "ubuntuPublisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saManifestName": {"value": "ubuntu-vm-sa-manifest-1-0-0"}, "nfName": {"value":
      "ubuntu-vm"}, "vhdVersion": {"value": "1-0-0"}, "armTemplateVersion": {"value":
      "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2910'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447004","name":"AOSM_CLI_deployment_1690447004","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17926458934195505860","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"saArtifactStoreName":{"type":"String","value":"ubuntu-blob-store"},"acrManifestName":{"type":"String","value":"ubuntu-vm-acr-manifest-1-0-0"},"saManifestName":{"type":"String","value":"ubuntu-vm-sa-manifest-1-0-0"},"nfName":{"type":"String","value":"ubuntu-vm"},"vhdVersion":{"type":"String","value":"1-0-0"},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"0001-01-01T00:00:00Z","duration":"PT0S","correlationId":"d2488805-2ca3-400c-bc0d-f185e5b3771e","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/artifactStores/artifactManifests","locations":["uksouth"]}]}],"dependencies":[],"validatedResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1669'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "17926458934195505860"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}, "nfName": {"type": "string",
      "metadata": {"description": "Name of Network Function. Used predominantly as
      a prefix for other variable names"}}, "vhdVersion": {"type": "string", "metadata":
      {"description": "The version that you want to name the NFM VHD artifact, in
      format A-B-C. e.g. 6-13-0"}}, "armTemplateVersion": {"type": "string", "metadata":
      {"description": "The name under which to store the ARM template"}}}, "resources":
      [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "[format(''{0}-vhd'', parameters(''nfName''))]", "artifactType": "VhdImageFile",
      "artifactVersion": "[parameters(''vhdVersion'')]"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "[format(''{0}-arm-template'', parameters(''nfName''))]", "artifactType": "ArmTemplate",
      "artifactVersion": "[parameters(''armTemplateVersion'')]"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "ubuntuPublisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saManifestName": {"value": "ubuntu-vm-sa-manifest-1-0-0"}, "nfName": {"value":
      "ubuntu-vm"}, "vhdVersion": {"value": "1-0-0"}, "armTemplateVersion": {"value":
      "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2910'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447004","name":"AOSM_CLI_deployment_1690447004","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17926458934195505860","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"saArtifactStoreName":{"type":"String","value":"ubuntu-blob-store"},"acrManifestName":{"type":"String","value":"ubuntu-vm-acr-manifest-1-0-0"},"saManifestName":{"type":"String","value":"ubuntu-vm-sa-manifest-1-0-0"},"nfName":{"type":"String","value":"ubuntu-vm"},"vhdVersion":{"type":"String","value":"1-0-0"},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-07-27T08:36:48.6118905Z","duration":"PT0.0063159S","correlationId":"a9bc5b50-ec08-4f91-81a5-e48f781a16df","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/artifactStores/artifactManifests","locations":["uksouth"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447004/operationStatuses/08585111598778298583?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1201'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111598778298583?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:36:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111598778298583?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:37:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447004","name":"AOSM_CLI_deployment_1690447004","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17926458934195505860","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"saArtifactStoreName":{"type":"String","value":"ubuntu-blob-store"},"acrManifestName":{"type":"String","value":"ubuntu-vm-acr-manifest-1-0-0"},"saManifestName":{"type":"String","value":"ubuntu-vm-sa-manifest-1-0-0"},"nfName":{"type":"String","value":"ubuntu-vm"},"vhdVersion":{"type":"String","value":"1-0-0"},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-07-27T08:37:10.4524442Z","duration":"PT21.8468696S","correlationId":"a9bc5b50-ec08-4f91-81a5-e48f781a16df","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/artifactStores/artifactManifests","locations":["uksouth"]}]}],"dependencies":[],"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1683'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:37:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "9758159467150602695"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfName": {"type": "string", "metadata": {"description": "Name
      of Network Function. Used predominantly as a prefix for other variable names"}},
      "nfDefinitionGroup": {"type": "string", "metadata": {"description": "Name of
      an existing Network Function Definition Group"}}, "nfDefinitionVersion": {"type":
      "string", "metadata": {"description": "The version of the NFDV you want to deploy,
      in format A.B.C"}}, "vhdVersion": {"type": "string", "metadata": {"description":
      "The version that you want to name the NFM VHD artifact, in format A-B-C. e.g.
      6-13-0"}}, "armTemplateVersion": {"type": "string", "metadata": {"description":
      "The version that you want to name the NFM template artifact, in format A.B.C.
      e.g. 6.13.0. If testing for development, you can use any numbers you like."}}},
      "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"location":
      {"type": "string"}, "subnetName": {"type": "string"}, "ubuntuVmName": {"type":
      "string"}, "virtualNetworkId": {"type": "string"}, "sshPublicKeyAdmin": {"type":
      "string"}}}, "$fxv#1": {"imageName": "ubuntu-vmImage", "azureDeployLocation":
      "{deployParameters.location}"}, "$fxv#2": {"location": "{deployParameters.location}",
      "subnetName": "{deployParameters.subnetName}", "ubuntuVmName": "{deployParameters.ubuntuVmName}",
      "virtualNetworkId": "{deployParameters.virtualNetworkId}", "sshPublicKeyAdmin":
      "{deployParameters.sshPublicKeyAdmin}", "imageName": "ubuntu-vmImage"}}, "resources":
      [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"versionState": "Preview", "deployParameters":
      "[string(variables(''$fxv#0''))]", "networkFunctionType": "VirtualNetworkFunction",
      "networkFunctionTemplate": {"nfviType": "AzureCore", "networkFunctionApplications":
      [{"artifactType": "VhdImageFile", "name": "[format(''{0}Image'', parameters(''nfName''))]",
      "dependsOnProfile": null, "artifactProfile": {"vhdArtifactProfile": {"vhdName":
      "[format(''{0}-vhd'', parameters(''nfName''))]", "vhdVersion": "[parameters(''vhdVersion'')]"},
      "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Unknown"}}, {"artifactType": "ArmTemplate", "name":
      "[parameters(''nfName'')]", "dependsOnProfile": null, "artifactProfile": {"templateArtifactProfile":
      {"templateName": "[format(''{0}-arm-template'', parameters(''nfName''))]", "templateVersion":
      "[parameters(''armTemplateVersion'')]"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Unknown"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "ubuntuPublisher"}, "acrArtifactStoreName":
      {"value": "ubuntu-acr"}, "saArtifactStoreName": {"value": "ubuntu-blob-store"},
      "nfName": {"value": "ubuntu-vm"}, "nfDefinitionGroup": {"value": "ubuntu-vm-nfdg"},
      "nfDefinitionVersion": {"value": "1.0.0"}, "vhdVersion": {"value": "1-0-0"},
      "armTemplateVersion": {"value": "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4485'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447044","name":"AOSM_CLI_deployment_1690447044","type":"Microsoft.Resources/deployments","properties":{"templateHash":"9758159467150602695","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"saArtifactStoreName":{"type":"String","value":"ubuntu-blob-store"},"nfName":{"type":"String","value":"ubuntu-vm"},"nfDefinitionGroup":{"type":"String","value":"ubuntu-vm-nfdg"},"nfDefinitionVersion":{"type":"String","value":"1.0.0"},"vhdVersion":{"type":"String","value":"1-0-0"},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"0001-01-01T00:00:00Z","duration":"PT0S","correlationId":"119d45df-88d3-4f39-bead-9af25f73854b","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions","locations":["uksouth"]}]}],"dependencies":[],"validatedResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkfunctiondefinitiongroups/ubuntu-vm-nfdg/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1453'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:37:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "9758159467150602695"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfName": {"type": "string", "metadata": {"description": "Name
      of Network Function. Used predominantly as a prefix for other variable names"}},
      "nfDefinitionGroup": {"type": "string", "metadata": {"description": "Name of
      an existing Network Function Definition Group"}}, "nfDefinitionVersion": {"type":
      "string", "metadata": {"description": "The version of the NFDV you want to deploy,
      in format A.B.C"}}, "vhdVersion": {"type": "string", "metadata": {"description":
      "The version that you want to name the NFM VHD artifact, in format A-B-C. e.g.
      6-13-0"}}, "armTemplateVersion": {"type": "string", "metadata": {"description":
      "The version that you want to name the NFM template artifact, in format A.B.C.
      e.g. 6.13.0. If testing for development, you can use any numbers you like."}}},
      "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"location":
      {"type": "string"}, "subnetName": {"type": "string"}, "ubuntuVmName": {"type":
      "string"}, "virtualNetworkId": {"type": "string"}, "sshPublicKeyAdmin": {"type":
      "string"}}}, "$fxv#1": {"imageName": "ubuntu-vmImage", "azureDeployLocation":
      "{deployParameters.location}"}, "$fxv#2": {"location": "{deployParameters.location}",
      "subnetName": "{deployParameters.subnetName}", "ubuntuVmName": "{deployParameters.ubuntuVmName}",
      "virtualNetworkId": "{deployParameters.virtualNetworkId}", "sshPublicKeyAdmin":
      "{deployParameters.sshPublicKeyAdmin}", "imageName": "ubuntu-vmImage"}}, "resources":
      [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"versionState": "Preview", "deployParameters":
      "[string(variables(''$fxv#0''))]", "networkFunctionType": "VirtualNetworkFunction",
      "networkFunctionTemplate": {"nfviType": "AzureCore", "networkFunctionApplications":
      [{"artifactType": "VhdImageFile", "name": "[format(''{0}Image'', parameters(''nfName''))]",
      "dependsOnProfile": null, "artifactProfile": {"vhdArtifactProfile": {"vhdName":
      "[format(''{0}-vhd'', parameters(''nfName''))]", "vhdVersion": "[parameters(''vhdVersion'')]"},
      "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Unknown"}}, {"artifactType": "ArmTemplate", "name":
      "[parameters(''nfName'')]", "dependsOnProfile": null, "artifactProfile": {"templateArtifactProfile":
      {"templateName": "[format(''{0}-arm-template'', parameters(''nfName''))]", "templateVersion":
      "[parameters(''armTemplateVersion'')]"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Unknown"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "ubuntuPublisher"}, "acrArtifactStoreName":
      {"value": "ubuntu-acr"}, "saArtifactStoreName": {"value": "ubuntu-blob-store"},
      "nfName": {"value": "ubuntu-vm"}, "nfDefinitionGroup": {"value": "ubuntu-vm-nfdg"},
      "nfDefinitionVersion": {"value": "1.0.0"}, "vhdVersion": {"value": "1-0-0"},
      "armTemplateVersion": {"value": "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4485'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447044","name":"AOSM_CLI_deployment_1690447044","type":"Microsoft.Resources/deployments","properties":{"templateHash":"9758159467150602695","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"saArtifactStoreName":{"type":"String","value":"ubuntu-blob-store"},"nfName":{"type":"String","value":"ubuntu-vm"},"nfDefinitionGroup":{"type":"String","value":"ubuntu-vm-nfdg"},"nfDefinitionVersion":{"type":"String","value":"1.0.0"},"vhdVersion":{"type":"String","value":"1-0-0"},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-07-27T08:37:26.4394835Z","duration":"PT0.0007218S","correlationId":"4843ca8e-1428-4b5e-834e-a9b77f84cb8a","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions","locations":["uksouth"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447044/operationStatuses/08585111598393673646?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1204'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:37:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111598393673646?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:37:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111598393673646?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:37:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111598393673646?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:38:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111598393673646?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:38:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447044","name":"AOSM_CLI_deployment_1690447044","type":"Microsoft.Resources/deployments","properties":{"templateHash":"9758159467150602695","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"saArtifactStoreName":{"type":"String","value":"ubuntu-blob-store"},"nfName":{"type":"String","value":"ubuntu-vm"},"nfDefinitionGroup":{"type":"String","value":"ubuntu-vm-nfdg"},"nfDefinitionVersion":{"type":"String","value":"1.0.0"},"vhdVersion":{"type":"String","value":"1-0-0"},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-07-27T08:38:50.4748316Z","duration":"PT1M24.0360699S","correlationId":"4843ca8e-1428-4b5e-834e-a9b77f84cb8a","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions","locations":["uksouth"]}]}],"dependencies":[],"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkfunctiondefinitiongroups/ubuntu-vm-nfdg/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1469'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:38:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0","name":"ubuntu-vm-sa-manifest-1-0-0","type":"microsoft.hybridnetwork/publishers/artifactstores/artifactmanifests","location":"uksouth","systemData":{"createdBy":"jamieparsons@microsoft.com","createdByType":"User","createdAt":"2023-07-27T08:36:51.2353772Z","lastModifiedBy":"jamieparsons@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-27T08:36:51.2353772Z"},"properties":{"artifacts":[{"artifactName":"ubuntu-vm-vhd","artifactType":"VhdImageFile","artifactVersion":"1-0-0"}],"artifactManifestState":"Uploading","provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '797'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:38:57 GMT
      etag:
      - '"10007f7c-0000-1100-0000-64c22ca60000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0/listCredential?api-version=2023-04-01-preview
  response:
    body:
      string: '{"storageAccountId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-blob-store-HostedResources-07BDF073/providers/Microsoft.Storage/storageAccounts/07bdf073ubuntublobstorea","containerCredentials":[{"containerName":"ubuntuvmvhd-1-0-0","containerSasUri":"https://07bdf073ubuntublobstorea.blob.core.windows.net/ubuntuvmvhd-1-0-0?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=c&sig=eoSLWD7pccblbNRJt8QGMkWOcYR9xZbjVntVNxHmXiY%3D"}],"expiry":"2023-07-28T08:38:59.8129434+00:00","credentialType":"AzureStorageAccountToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '546'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:38:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0","name":"ubuntu-vm-acr-manifest-1-0-0","type":"microsoft.hybridnetwork/publishers/artifactstores/artifactmanifests","location":"uksouth","systemData":{"createdBy":"jamieparsons@microsoft.com","createdByType":"User","createdAt":"2023-07-27T08:36:51.2510817Z","lastModifiedBy":"jamieparsons@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-27T08:36:51.2510817Z"},"properties":{"artifacts":[{"artifactName":"ubuntu-vm-arm-template","artifactType":"ArmTemplate","artifactVersion":"1.0.0"}],"artifactManifestState":"Uploading","provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '800'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:38:59 GMT
      etag:
      - '"1000b17c-0000-1100-0000-64c22cb40000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -f --definition-type --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0/listCredential?api-version=2023-04-01-preview
  response:
    body:
      string: '{"username":"ubuntu-vm-acr-manifest-1-0-0","acrToken":"kVTD9kAaR9rfNbAVpH4+McPIOsrm3fLNj4HH5qO7U/+ACRDBqF+4","acrServerUrl":"https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io","repositories":["ubuntu-vm-arm-template"],"expiry":"2023-07-28T08:39:00.6488665+00:00","credentialType":"AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '320'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-date:
      - Thu, 27 Jul 2023 08:39:01 GMT
      x-ms-version:
      - '2022-11-02'
    method: HEAD
    uri: https://ubuntuimage.blob.core.windows.net/images/livecd.ubuntu-cpc.azure.vhd?sp=r&st=2023-07-25T13%3A50%3A40Z&se=2024-07-25T21%3A50%3A40Z&spr=https&sv=2022-11-02&sr=b&sig=NlqXIleMtL9wIACerJdtxZ5kXdF0Gbe4uoYRmcDsFq8%3D
  response:
    body:
      string: ''
    headers:
      accept-ranges:
      - bytes
      content-length:
      - '32213303808'
      content-type:
      - application/octet-stream
      date:
      - Thu, 27 Jul 2023 08:39:01 GMT
      etag:
      - '"0x8DB883E503690E6"'
      last-modified:
      - Wed, 19 Jul 2023 09:55:41 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-sequence-number:
      - '0'
      x-ms-blob-type:
      - PageBlob
      x-ms-creation-time:
      - Wed, 19 Jul 2023 09:33:40 GMT
      x-ms-lease-state:
      - available
      x-ms-lease-status:
      - unlocked
      x-ms-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-copy-source:
      - https://ubuntuimage.blob.core.windows.net/images/livecd.ubuntu-cpc.azure.vhd?sp=r&st=2023-07-25T13%3A50%3A40Z&se=2024-07-25T21%3A50%3A40Z&spr=https&sv=2022-11-02&sr=b&sig=NlqXIleMtL9wIACerJdtxZ5kXdF0Gbe4uoYRmcDsFq8%3D
      x-ms-date:
      - Thu, 27 Jul 2023 08:39:01 GMT
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://07bdf073ubuntublobstorea.blob.core.windows.net/ubuntuvmvhd-1-0-0/ubuntuvm-1-0-0.vhd?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=c&sig=eoSLWD7pccblbNRJt8QGMkWOcYR9xZbjVntVNxHmXiY%3D
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:39:01 GMT
      etag:
      - '"0x8DB8E7CEDFF753F"'
      last-modified:
      - Thu, 27 Jul 2023 08:39:02 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-copy-id:
      - 334095cf-86e9-4700-9c1c-898327069c99
      x-ms-copy-status:
      - pending
      x-ms-version:
      - '2022-11-02'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/blobs/uploads/
  response:
    body:
      string: '{"errors":[{"code":"UNAUTHORIZED","message":"authentication required,
        visit https://aka.ms/acr/authorization for more information.","detail":[{"Type":"repository","Name":"ubuntu-vm-arm-template","Action":"pull"},{"Type":"repository","Name":"ubuntu-vm-arm-template","Action":"push"}]}]}

        '
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '286'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:02 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token",service="ubuntupublisherubuntuacr2315dcfa83.azurecr.io",scope="repository:ubuntu-vm-arm-template:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - ubuntupublisherubuntuacr2315dcfa83.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token?service=ubuntupublisherubuntuacr2315dcfa83.azurecr.io&scope=repository%3Aubuntu-vm-arm-template%3Apull%2Cpush
  response:
    body:
      string: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkNPQVU6UERZSDo0SVJYOjM2SEI6TFYzUDpWNFBGOko0NzQ6SzNOSjpPS1JCOlRZQUo6NEc0Szo1Q1NEIn0.eyJqdGkiOiJjYzQxNTFiMy1jNDU0LTQ2M2YtODI2ZC1kZmQzZDM0NjlhZWUiLCJzdWIiOiJ1YnVudHUtdm0tYWNyLW1hbmlmZXN0LTEtMC0wIiwibmJmIjoxNjkwNDQ2MjQyLCJleHAiOjE2OTA0NDgwNDIsImlhdCI6MTY5MDQ0NjI0MiwiaXNzIjoiQXp1cmUgQ29udGFpbmVyIFJlZ2lzdHJ5IiwiYXVkIjoidWJ1bnR1cHVibGlzaGVydWJ1bnR1YWNyMjMxNWRjZmE4My5henVyZWNyLmlvIiwidmVyc2lvbiI6IjIuMCIsInJpZCI6IjUzNjQ5MTE4MjEzMTRkNjc5MjZkYTdhM2NkYzE3NGY4IiwiYWNjZXNzIjpbeyJUeXBlIjoicmVwb3NpdG9yeSIsIk5hbWUiOiJ1YnVudHUtdm0tYXJtLXRlbXBsYXRlIiwiQWN0aW9ucyI6WyJwdWxsIiwicHVzaCJdfV0sInJvbGVzIjpbXSwiZ3JhbnRfdHlwZSI6ImFjY2Vzc190b2tlbiJ9.sYXP7T121wBoMXhOtsHrR35dhYLtd8Lq-VaXVrNTdzkH1HI5_ky2zADjNkxwdYQuHmkgWAuwFQOJQdTgejPTH1kfpjtpvMCtG6KHlERGBrE7hneTMed6iFpJldq4-p2zpKmzTJCEJjAIN10LwJCUEJr1npYckIBBlo0o85kJcsaxF9eWrZYpb5GHHqOyxYDjfesxLKu5YuCDGXM6F6RrJ7GgEQYhXlQOUfTrGRSMD7uE87oaqiNj6rZuG8UMKr7m9FAUeWyQ2zCGkcxpQ37ex7sFtxOrUcoxI3h6rQjUv4twjlV4gjzdXUnCzVt15YKmKH5hWoq6snb_cDEAkh3Jjw"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:02 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:39:02 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 7bc7c95c-face-4ffb-9021-02172a4e6279
      location:
      - /v2/ubuntu-vm-arm-template/blobs/uploads/7bc7c95c-face-4ffb-9021-02172a4e6279?_nouploadcache=false&_state=ZPo5kB5x7VQ6WbZEHoW2yuBlm-BsBz0vKuQMqzQANzp7Ik5hbWUiOiJ1YnVudHUtdm0tYXJtLXRlbXBsYXRlIiwiVVVJRCI6IjdiYzdjOTVjLWZhY2UtNGZmYi05MDIxLTAyMTcyYTRlNjI3OSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyMy0wNy0yN1QwODozOTowMi44MDA0NjU3M1oifQ%3D%3D
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: "{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"metadata\": {\n    \"_generator\": {\n
      \     \"name\": \"bicep\",\n      \"version\": \"0.8.9.13224\",\n      \"templateHash\":
      \"14979664264804385741\"\n    }\n  },\n  \"parameters\": {\n    \"location\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"[resourceGroup().location]\"\n
      \   },\n    \"subnetName\": {\n      \"type\": \"string\"\n    },\n    \"ubuntuVmName\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"ubuntu-vm\"\n    },\n
      \   \"virtualNetworkId\": {\n      \"type\": \"string\"\n    },\n    \"sshPublicKeyAdmin\":
      {\n      \"type\": \"string\"\n    },\n    \"imageName\": {\n      \"type\":
      \"string\"\n    }\n  },\n  \"variables\": {\n    \"imageResourceGroup\": \"[resourceGroup().name]\",\n
      \   \"subscriptionId\": \"[subscription().subscriptionId]\",\n    \"vmSizeSku\":
      \"Standard_D2s_v3\"\n  },\n  \"resources\": [\n    {\n      \"type\": \"Microsoft.Network/networkInterfaces\",\n
      \     \"apiVersion\": \"2021-05-01\",\n      \"name\": \"[format('{0}_nic',
      parameters('ubuntuVmName'))]\",\n      \"location\": \"[parameters('location')]\",\n
      \     \"properties\": {\n        \"ipConfigurations\": [\n          {\n            \"name\":
      \"ipconfig1\",\n            \"properties\": {\n              \"subnet\": {\n
      \               \"id\": \"[format('{0}/subnets/{1}', parameters('virtualNetworkId'),
      parameters('subnetName'))]\"\n              },\n              \"primary\": true,\n
      \             \"privateIPAddressVersion\": \"IPv4\"\n            }\n          }\n
      \       ]\n      }\n    },\n    {\n      \"type\": \"Microsoft.Compute/virtualMachines\",\n
      \     \"apiVersion\": \"2021-07-01\",\n      \"name\": \"[parameters('ubuntuVmName')]\",\n
      \     \"location\": \"[parameters('location')]\",\n      \"properties\": {\n
      \       \"hardwareProfile\": {\n          \"vmSize\": \"[variables('vmSizeSku')]\"\n
      \       },\n        \"storageProfile\": {\n          \"imageReference\": {\n
      \           \"id\": \"[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}',
      variables('subscriptionId'), variables('imageResourceGroup')), 'Microsoft.Compute/images',
      parameters('imageName'))]\"\n          },\n          \"osDisk\": {\n            \"osType\":
      \"Linux\",\n            \"name\": \"[format('{0}_disk', parameters('ubuntuVmName'))]\",\n
      \           \"createOption\": \"FromImage\",\n            \"caching\": \"ReadWrite\",\n
      \           \"writeAcceleratorEnabled\": false,\n            \"managedDisk\":
      \"[json('{\\\"storageAccountType\\\": \\\"Premium_LRS\\\"}')]\",\n            \"deleteOption\":
      \"Delete\",\n            \"diskSizeGB\": 30\n          }\n        },\n        \"osProfile\":
      {\n          \"computerName\": \"[parameters('ubuntuVmName')]\",\n          \"adminUsername\":
      \"azureuser\",\n          \"linuxConfiguration\": {\n            \"disablePasswordAuthentication\":
      true,\n            \"ssh\": {\n              \"publicKeys\": [\n                {\n
      \                 \"path\": \"/home/azureuser/.ssh/authorized_keys\",\n                  \"keyData\":
      \"[parameters('sshPublicKeyAdmin')]\"\n                }\n              ]\n
      \           },\n            \"provisionVMAgent\": true,\n            \"patchSettings\":
      {\n              \"patchMode\": \"ImageDefault\",\n              \"assessmentMode\":
      \"ImageDefault\"\n            }\n          },\n          \"secrets\": [],\n
      \         \"allowExtensionOperations\": true\n        },\n        \"networkProfile\":
      {\n          \"networkInterfaces\": [\n            {\n              \"id\":
      \"[resourceId('Microsoft.Network/networkInterfaces', format('{0}_nic', parameters('ubuntuVmName')))]\"\n
      \           }\n          ]\n        }\n      },\n      \"dependsOn\": [\n        \"[resourceId('Microsoft.Network/networkInterfaces',
      format('{0}_nic', parameters('ubuntuVmName')))]\"\n      ]\n    }\n  ]\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '3591'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/blobs/uploads/7bc7c95c-face-4ffb-9021-02172a4e6279?_nouploadcache=false&_state=ZPo5kB5x7VQ6WbZEHoW2yuBlm-BsBz0vKuQMqzQANzp7Ik5hbWUiOiJ1YnVudHUtdm0tYXJtLXRlbXBsYXRlIiwiVVVJRCI6IjdiYzdjOTVjLWZhY2UtNGZmYi05MDIxLTAyMTcyYTRlNjI3OSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyMy0wNy0yN1QwODozOTowMi44MDA0NjU3M1oifQ%3D%3D&digest=sha256%3Ae71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      docker-content-digest:
      - sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu-vm-arm-template/blobs/sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/blobs/uploads/
  response:
    body:
      string: '{"errors":[{"code":"UNAUTHORIZED","message":"authentication required,
        visit https://aka.ms/acr/authorization for more information.","detail":[{"Type":"repository","Name":"ubuntu-vm-arm-template","Action":"pull"},{"Type":"repository","Name":"ubuntu-vm-arm-template","Action":"push"}]}]}

        '
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '286'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token",service="ubuntupublisherubuntuacr2315dcfa83.azurecr.io",scope="repository:ubuntu-vm-arm-template:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - ubuntupublisherubuntuacr2315dcfa83.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token?service=ubuntupublisherubuntuacr2315dcfa83.azurecr.io&scope=repository%3Aubuntu-vm-arm-template%3Apull%2Cpush
  response:
    body:
      string: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkNPQVU6UERZSDo0SVJYOjM2SEI6TFYzUDpWNFBGOko0NzQ6SzNOSjpPS1JCOlRZQUo6NEc0Szo1Q1NEIn0.eyJqdGkiOiJiZmQ1ODFkNC1iOTRlLTQxMTktYjQ2Ni0xZWQxNWI4OTJkOGYiLCJzdWIiOiJ1YnVudHUtdm0tYWNyLW1hbmlmZXN0LTEtMC0wIiwibmJmIjoxNjkwNDQ2MjQzLCJleHAiOjE2OTA0NDgwNDMsImlhdCI6MTY5MDQ0NjI0MywiaXNzIjoiQXp1cmUgQ29udGFpbmVyIFJlZ2lzdHJ5IiwiYXVkIjoidWJ1bnR1cHVibGlzaGVydWJ1bnR1YWNyMjMxNWRjZmE4My5henVyZWNyLmlvIiwidmVyc2lvbiI6IjIuMCIsInJpZCI6IjUzNjQ5MTE4MjEzMTRkNjc5MjZkYTdhM2NkYzE3NGY4IiwiYWNjZXNzIjpbeyJUeXBlIjoicmVwb3NpdG9yeSIsIk5hbWUiOiJ1YnVudHUtdm0tYXJtLXRlbXBsYXRlIiwiQWN0aW9ucyI6WyJwdWxsIiwicHVzaCJdfV0sInJvbGVzIjpbXSwiZ3JhbnRfdHlwZSI6ImFjY2Vzc190b2tlbiJ9.jpojrcD5kDFofLgt1JP53aPEFbLcceTKJ4IIVKQ6rKNrAaoIthZMxO3qYccQrnm8Mf8UH_j7D4Bl3cjYJcGhspdf6GCi0ipjNq1FPrmPi-SgOHOB1bBBZpwLjPlXxJRnIybPPhkPq5t8IBEcrqkYHfC_QmasIkMaA6PSvOZo_M_RHaxhnaSusuHAHvnwYHfU5SkUloO4lpIRuIB0NFDXulKCiiU8qql-dSRHnqT9ldEpOsQ1hOQlMymclC_haN0yZJosTg6OsU-khenRlttOPL8l6WNjRcmVt7baP7MKbeKej77AeHtSsKdKaSLbAmui6nx5D6PQ5gi5SmocHAfXLQ"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 4eccefe2-9ccb-4871-ad56-e45ab3a9d31e
      location:
      - /v2/ubuntu-vm-arm-template/blobs/uploads/4eccefe2-9ccb-4871-ad56-e45ab3a9d31e?_nouploadcache=false&_state=NETur7sI6jVDrJxcfG3VMvkBK79Ca1Ntz8XJNBj_Od97Ik5hbWUiOiJ1YnVudHUtdm0tYXJtLXRlbXBsYXRlIiwiVVVJRCI6IjRlY2NlZmUyLTljY2ItNDg3MS1hZDU2LWU0NWFiM2E5ZDMxZSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyMy0wNy0yN1QwODozOTowMy4xNTg1NDg2NjNaIn0%3D
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/blobs/uploads/4eccefe2-9ccb-4871-ad56-e45ab3a9d31e?_nouploadcache=false&_state=NETur7sI6jVDrJxcfG3VMvkBK79Ca1Ntz8XJNBj_Od97Ik5hbWUiOiJ1YnVudHUtdm0tYXJtLXRlbXBsYXRlIiwiVVVJRCI6IjRlY2NlZmUyLTljY2ItNDg3MS1hZDU2LWU0NWFiM2E5ZDMxZSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyMy0wNy0yN1QwODozOTowMy4xNTg1NDg2NjNaIn0%3D&digest=sha256%3Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      docker-content-digest:
      - sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu-vm-arm-template/blobs/sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/manifests/1.0.0
  response:
    body:
      string: '{"errors":[{"code":"UNAUTHORIZED","message":"authentication required,
        visit https://aka.ms/acr/authorization for more information.","detail":[{"Type":"repository","Name":"ubuntu-vm-arm-template","Action":"pull"},{"Type":"repository","Name":"ubuntu-vm-arm-template","Action":"push"}]}]}

        '
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '286'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token",service="ubuntupublisherubuntuacr2315dcfa83.azurecr.io",scope="repository:ubuntu-vm-arm-template:push,pull"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - ubuntupublisherubuntuacr2315dcfa83.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token?service=ubuntupublisherubuntuacr2315dcfa83.azurecr.io&scope=repository%3Aubuntu-vm-arm-template%3Apush%2Cpull
  response:
    body:
      string: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkNPQVU6UERZSDo0SVJYOjM2SEI6TFYzUDpWNFBGOko0NzQ6SzNOSjpPS1JCOlRZQUo6NEc0Szo1Q1NEIn0.eyJqdGkiOiIzYTkyZDAxNC05MDljLTRmZjYtOWMyOC1mN2U0NjM2Y2FkZDEiLCJzdWIiOiJ1YnVudHUtdm0tYWNyLW1hbmlmZXN0LTEtMC0wIiwibmJmIjoxNjkwNDQ2MjQzLCJleHAiOjE2OTA0NDgwNDMsImlhdCI6MTY5MDQ0NjI0MywiaXNzIjoiQXp1cmUgQ29udGFpbmVyIFJlZ2lzdHJ5IiwiYXVkIjoidWJ1bnR1cHVibGlzaGVydWJ1bnR1YWNyMjMxNWRjZmE4My5henVyZWNyLmlvIiwidmVyc2lvbiI6IjIuMCIsInJpZCI6IjUzNjQ5MTE4MjEzMTRkNjc5MjZkYTdhM2NkYzE3NGY4IiwiYWNjZXNzIjpbeyJUeXBlIjoicmVwb3NpdG9yeSIsIk5hbWUiOiJ1YnVudHUtdm0tYXJtLXRlbXBsYXRlIiwiQWN0aW9ucyI6WyJwdXNoIiwicHVsbCJdfV0sInJvbGVzIjpbXSwiZ3JhbnRfdHlwZSI6ImFjY2Vzc190b2tlbiJ9.VqkX0-WuhFgcvsxfB6ZaqZcmbPmDkKkXzkU5WugxwFtuY-By2dld-IdXvfUa5EtKC1HLYvqC21Z6VrYgwGbdfOtxvJcw-U4VXzL9B6mbdyFneS_dXunhZAhuaAng2hxm_hVh2kY6iw5PX0xTeHA6x0v6eutO7KZFp1EwTk-7jjZIinU82566tqyxzBra72lvhGmyGEBrBOwLDOEaTItEcV7I2FgMjF0EZSuSDb5V2yV5d8e4h-VTF-4Jg3BIymoE9c-Z61nmi1ddhhImihmRHjl7QTAiufTuzWNnoc7QOx3JAOXKjLWgBNYzUDgYfPZP_6GcXzOYO2WgRRI8zIyYYw"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-arm-template/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      docker-content-digest:
      - sha256:8923fa544da97914212bc9173ec512741d331940e4a2c7b6fbad979657a5c507
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu-vm-arm-template/manifests/sha256:8923fa544da97914212bc9173ec512741d331940e4a2c7b6fbad979657a5c507
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd build
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg/networkFunctionDefinitionVersions/1.0.0?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkfunctiondefinitiongroups/ubuntu-vm-nfdg/networkfunctiondefinitionversions/1.0.0","name":"1.0.0","type":"microsoft.hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions","location":"uksouth","systemData":{"createdBy":"jamieparsons@microsoft.com","createdByType":"User","createdAt":"2023-07-27T08:37:28.3465537Z","lastModifiedBy":"jamieparsons@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-27T08:37:28.3465537Z"},"properties":{"networkFunctionTemplate":{"networkFunctionApplications":[{"artifactProfile":{"vhdArtifactProfile":{"vhdName":"ubuntu-vm-vhd","vhdVersion":"1-0-0"},"artifactStore":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store"}},"deployParametersMappingRuleProfile":{"vhdImageMappingRuleProfile":{"userConfiguration":"{\"imageName\":\"ubuntu-vmImage\",\"azureDeployLocation\":\"{deployParameters.location}\"}"},"applicationEnablement":"Unknown"},"artifactType":"VhdImageFile","dependsOnProfile":null,"name":"ubuntu-vmImage"},{"artifactProfile":{"templateArtifactProfile":{"templateName":"ubuntu-vm-arm-template","templateVersion":"1.0.0"},"artifactStore":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr"}},"deployParametersMappingRuleProfile":{"templateMappingRuleProfile":{"templateParameters":"{\"location\":\"{deployParameters.location}\",\"subnetName\":\"{deployParameters.subnetName}\",\"ubuntuVmName\":\"{deployParameters.ubuntuVmName}\",\"virtualNetworkId\":\"{deployParameters.virtualNetworkId}\",\"sshPublicKeyAdmin\":\"{deployParameters.sshPublicKeyAdmin}\",\"imageName\":\"ubuntu-vmImage\"}"},"applicationEnablement":"Unknown"},"artifactType":"ArmTemplate","dependsOnProfile":null,"name":"ubuntu-vm"}],"nfviType":"AzureCore"},"versionState":"Preview","description":null,"deployParameters":"{\"$schema\":\"https://json-schema.org/draft-07/schema#\",\"title\":\"DeployParametersSchema\",\"type\":\"object\",\"properties\":{\"location\":{\"type\":\"string\"},\"subnetName\":{\"type\":\"string\"},\"ubuntuVmName\":{\"type\":\"string\"},\"virtualNetworkId\":{\"type\":\"string\"},\"sshPublicKeyAdmin\":{\"type\":\"string\"}},\"required\":[\"location\",\"subnetName\",\"ubuntuVmName\",\"virtualNetworkId\",\"sshPublicKeyAdmin\"]}","networkFunctionType":"VirtualNetworkFunction","provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2713'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      etag:
      - '"06009197-0000-1100-0000-64c22cd40000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test","name":"patrykkulik-test","type":"Microsoft.Resources/resourceGroups","location":"eastus","tags":{"autoDelete":"true","expiresOn":"2023-08-20T10:48:11.8928180Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher","name":"ubuntuPublisher","type":"microsoft.hybridnetwork/publishers","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T10:35:08.3094719Z","lastModifiedBy":"patrykkulik@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-24T10:35:08.3094719Z"},"properties":{"scope":"Private","provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '550'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:04 GMT
      etag:
      - '"0b00b59c-0000-1100-0000-64be53e60000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr","name":"ubuntu-acr","type":"microsoft.hybridnetwork/publishers/artifactstores","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T10:36:42.2618346Z","lastModifiedBy":"b8ed041c-aa91-418e-8f47-20c70abc2de1","lastModifiedByType":"Application","lastModifiedAt":"2023-07-27T08:37:39.9550874Z"},"properties":{"storeType":"AzureContainerRegistry","replicationStrategy":"SingleReplication","managedResourceGroupConfiguration":{"name":"ubuntu-acr-HostedResources-7510103F","location":"uksouth"},"provisioningState":"Succeeded","storageResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-acr-HostedResources-7510103F/providers/Microsoft.ContainerRegistry/registries/UbuntupublisherUbuntuAcr2315dcfa83"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '978'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:04 GMT
      etag:
      - '"03001208-0000-1100-0000-64c22cd40000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "uksouth"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '23'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu","name":"ubuntu","type":"microsoft.hybridnetwork/publishers/networkservicedesigngroups","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T13:23:29.0796168Z","lastModifiedBy":"jamieparsons@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-27T08:39:05.3904863Z"},"properties":{"description":null,"provisioningState":"Accepted"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/9dedec20-96e1-4b71-b374-bcb75af0218f*0A2C88351F91E19B08EFFAF13C02A492976D31AA01E04643FC90923CE153B778?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '603'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:06 GMT
      etag:
      - '"010024fe-0000-1100-0000-64c22d2a0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/9dedec20-96e1-4b71-b374-bcb75af0218f*0A2C88351F91E19B08EFFAF13C02A492976D31AA01E04643FC90923CE153B778?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/9dedec20-96e1-4b71-b374-bcb75af0218f*0A2C88351F91E19B08EFFAF13C02A492976D31AA01E04643FC90923CE153B778","name":"9dedec20-96e1-4b71-b374-bcb75af0218f*0A2C88351F91E19B08EFFAF13C02A492976D31AA01E04643FC90923CE153B778","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu","status":"Accepted","startTime":"2023-07-27T08:39:06.2384338Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '549'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:06 GMT
      etag:
      - '"0200837a-0000-1100-0000-64c22d2a0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0''
        under resource group ''patrykkulik-test'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "12504378736665252435"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestNames": {"type": "array", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "armTemplateNames":
      {"type": "array", "metadata": {"description": "The name under which to store
      the ARM template"}}, "armTemplateVersion": {"type": "string", "metadata": {"description":
      "The version that you want to name the NFM template artifact, in format A.B.C.
      e.g. 6.13.0. If testing for development, you can use any numbers you like."}}},
      "resources": [{"copy": {"name": "acrArtifactManifests", "count": "[length(parameters(''armTemplateNames''))]"},
      "type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestNames'')[copyIndex()])]",
      "location": "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "[parameters(''armTemplateNames'')[copyIndex()]]", "artifactType": "ArmTemplate",
      "artifactVersion": "[parameters(''armTemplateVersion'')]"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "ubuntuPublisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestNames": {"value":
      ["ubuntu-vm-nfdg-nf-acr-manifest-1-0-0"]}, "armTemplateNames": {"value": ["ubuntu-vm-nfdg_nf_artifact"]},
      "armTemplateVersion": {"value": "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2062'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447150","name":"AOSM_CLI_deployment_1690447150","type":"Microsoft.Resources/deployments","properties":{"templateHash":"12504378736665252435","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"acrManifestNames":{"type":"Array","value":["ubuntu-vm-nfdg-nf-acr-manifest-1-0-0"]},"armTemplateNames":{"type":"Array","value":["ubuntu-vm-nfdg_nf_artifact"]},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"0001-01-01T00:00:00Z","duration":"PT0S","correlationId":"c0d2aed3-757d-4f91-891f-01885924eb0c","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/artifactStores/artifactManifests","locations":["uksouth"]}]}],"dependencies":[],"validatedResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1294'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "12504378736665252435"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestNames": {"type": "array", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "armTemplateNames":
      {"type": "array", "metadata": {"description": "The name under which to store
      the ARM template"}}, "armTemplateVersion": {"type": "string", "metadata": {"description":
      "The version that you want to name the NFM template artifact, in format A.B.C.
      e.g. 6.13.0. If testing for development, you can use any numbers you like."}}},
      "resources": [{"copy": {"name": "acrArtifactManifests", "count": "[length(parameters(''armTemplateNames''))]"},
      "type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestNames'')[copyIndex()])]",
      "location": "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "[parameters(''armTemplateNames'')[copyIndex()]]", "artifactType": "ArmTemplate",
      "artifactVersion": "[parameters(''armTemplateVersion'')]"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "ubuntuPublisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestNames": {"value":
      ["ubuntu-vm-nfdg-nf-acr-manifest-1-0-0"]}, "armTemplateNames": {"value": ["ubuntu-vm-nfdg_nf_artifact"]},
      "armTemplateVersion": {"value": "1.0.0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2062'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447150","name":"AOSM_CLI_deployment_1690447150","type":"Microsoft.Resources/deployments","properties":{"templateHash":"12504378736665252435","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"acrManifestNames":{"type":"Array","value":["ubuntu-vm-nfdg-nf-acr-manifest-1-0-0"]},"armTemplateNames":{"type":"Array","value":["ubuntu-vm-nfdg_nf_artifact"]},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-07-27T08:39:13.9537136Z","duration":"PT0.0007926S","correlationId":"d644ec1d-6e30-4cbb-ab0d-dbb00dea04e0","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/artifactStores/artifactManifests","locations":["uksouth"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447150/operationStatuses/08585111597325390029?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1051'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111597325390029?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/9dedec20-96e1-4b71-b374-bcb75af0218f*0A2C88351F91E19B08EFFAF13C02A492976D31AA01E04643FC90923CE153B778?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/9dedec20-96e1-4b71-b374-bcb75af0218f*0A2C88351F91E19B08EFFAF13C02A492976D31AA01E04643FC90923CE153B778","name":"9dedec20-96e1-4b71-b374-bcb75af0218f*0A2C88351F91E19B08EFFAF13C02A492976D31AA01E04643FC90923CE153B778","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu","status":"Succeeded","startTime":"2023-07-27T08:39:06.2384338Z","endTime":"2023-07-27T08:39:07.8325053Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '609'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:36 GMT
      etag:
      - '"0200867a-0000-1100-0000-64c22d2b0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu","name":"ubuntu","type":"microsoft.hybridnetwork/publishers/networkservicedesigngroups","location":"uksouth","systemData":{"createdBy":"patrykkulik@microsoft.com","createdByType":"User","createdAt":"2023-07-24T13:23:29.0796168Z","lastModifiedBy":"jamieparsons@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-27T08:39:05.3904863Z"},"properties":{"description":null,"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '604'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:36 GMT
      etag:
      - '"010031fe-0000-1100-0000-64c22d2b0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111597325390029?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447150","name":"AOSM_CLI_deployment_1690447150","type":"Microsoft.Resources/deployments","properties":{"templateHash":"12504378736665252435","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"acrManifestNames":{"type":"Array","value":["ubuntu-vm-nfdg-nf-acr-manifest-1-0-0"]},"armTemplateNames":{"type":"Array","value":["ubuntu-vm-nfdg_nf_artifact"]},"armTemplateVersion":{"type":"String","value":"1.0.0"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-07-27T08:39:34.2908116Z","duration":"PT20.3378906S","correlationId":"d644ec1d-6e30-4cbb-ab0d-dbb00dea04e0","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/artifactStores/artifactManifests","locations":["uksouth"]}]}],"dependencies":[],"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1308'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "15386908252537985940"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ubuntu_ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu-vm-nfdg": {"type": "object", "properties":
      {"deploymentParameters": {"type": "object", "properties": {"location": {"type":
      "string"}, "subnetName": {"type": "string"}, "ubuntuVmName": {"type": "string"},
      "virtualNetworkId": {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}},
      "ubuntu_vm_nfdg_nfd_version": {"type": "string", "description": "The version
      of the ubuntu-vm-nfdg NFD to use.  This version must be compatible with (have
      the same parameters exposed as) ubuntu-vm-nfdg."}}, "required": ["deploymentParameters",
      "ubuntu_vm_nfdg_nfd_version"]}, "managedIdentity": {"type": "string", "description":
      "The managed identity to use to deploy NFs within this SNS.  This should be
      of the form ''/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}.  If
      you wish to use a system assigned identity, set this to a blank string."}},
      "required": ["ubuntu-vm-nfdg", "managedIdentity"]}, "$fxv#1": {"deploymentParameters":
      ["{configurationparameters(''ubuntu_ConfigGroupSchema'').ubuntu-vm-nfdg.deploymentParameters}"],
      "ubuntu_vm_nfdg_nfd_version": "{configurationparameters(''ubuntu_ConfigGroupSchema'').ubuntu-vm-nfdg.ubuntu_vm_nfdg_nfd_version}",
      "managedIdentity": "{configurationparameters(''ubuntu_ConfigGroupSchema'').managedIdentity}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ubuntu_ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "versionState": "Preview", "configurationGroupSchemaReferences": {"ubuntu_ConfigGroupSchema":
      {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ubuntu_ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[parameters(''nfviSiteName'')]", "type": "AzureCore"}},
      "resourceElementTemplates": [{"name": "ubuntu-vm-nfdg_nf_artifact_resource_element",
      "type": "NetworkFunctionDefinition", "configuration": {"artifactProfile": {"artifactStoreReference":
      {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]"}, "artifactName": "ubuntu-vm-nfdg_nf_artifact",
      "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ubuntu_ConfigGroupSchema'')]"]}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "ubuntuPublisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4527'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447188","name":"AOSM_CLI_deployment_1690447188","type":"Microsoft.Resources/deployments","properties":{"templateHash":"15386908252537985940","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"nsDesignGroup":{"type":"String","value":"ubuntu"},"nsDesignVersion":{"type":"String","value":"1.0.0"},"nfviSiteName":{"type":"String","value":"ubuntu_NFVI"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"0001-01-01T00:00:00Z","duration":"PT0S","correlationId":"825bda07-c87c-4c3e-97f5-5a6c20e0b553","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/configurationGroupSchemas","locations":["uksouth"]},{"resourceType":"publishers/networkservicedesigngroups/networkservicedesignversions","locations":["uksouth"]}]}],"dependencies":[{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema","resourceType":"Microsoft.Hybridnetwork/publishers/configurationGroupSchemas","resourceName":"ubuntuPublisher/ubuntu_ConfigGroupSchema"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0","resourceType":"Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions","resourceName":"ubuntuPublisher/ubuntu/1.0.0"}],"validatedResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2264'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.15.31.15270", "templateHash": "15386908252537985940"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ubuntu_ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu-vm-nfdg": {"type": "object", "properties":
      {"deploymentParameters": {"type": "object", "properties": {"location": {"type":
      "string"}, "subnetName": {"type": "string"}, "ubuntuVmName": {"type": "string"},
      "virtualNetworkId": {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}},
      "ubuntu_vm_nfdg_nfd_version": {"type": "string", "description": "The version
      of the ubuntu-vm-nfdg NFD to use.  This version must be compatible with (have
      the same parameters exposed as) ubuntu-vm-nfdg."}}, "required": ["deploymentParameters",
      "ubuntu_vm_nfdg_nfd_version"]}, "managedIdentity": {"type": "string", "description":
      "The managed identity to use to deploy NFs within this SNS.  This should be
      of the form ''/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}.  If
      you wish to use a system assigned identity, set this to a blank string."}},
      "required": ["ubuntu-vm-nfdg", "managedIdentity"]}, "$fxv#1": {"deploymentParameters":
      ["{configurationparameters(''ubuntu_ConfigGroupSchema'').ubuntu-vm-nfdg.deploymentParameters}"],
      "ubuntu_vm_nfdg_nfd_version": "{configurationparameters(''ubuntu_ConfigGroupSchema'').ubuntu-vm-nfdg.ubuntu_vm_nfdg_nfd_version}",
      "managedIdentity": "{configurationparameters(''ubuntu_ConfigGroupSchema'').managedIdentity}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ubuntu_ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-04-01-preview", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "versionState": "Preview", "configurationGroupSchemaReferences": {"ubuntu_ConfigGroupSchema":
      {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ubuntu_ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[parameters(''nfviSiteName'')]", "type": "AzureCore"}},
      "resourceElementTemplates": [{"name": "ubuntu-vm-nfdg_nf_artifact_resource_element",
      "type": "NetworkFunctionDefinition", "configuration": {"artifactProfile": {"artifactStoreReference":
      {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]"}, "artifactName": "ubuntu-vm-nfdg_nf_artifact",
      "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ubuntu_ConfigGroupSchema'')]"]}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "ubuntuPublisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4527'
      Content-Type:
      - application/json
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447188","name":"AOSM_CLI_deployment_1690447188","type":"Microsoft.Resources/deployments","properties":{"templateHash":"15386908252537985940","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"nsDesignGroup":{"type":"String","value":"ubuntu"},"nsDesignVersion":{"type":"String","value":"1.0.0"},"nfviSiteName":{"type":"String","value":"ubuntu_NFVI"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-07-27T08:39:53.1137433Z","duration":"PT0.0005654S","correlationId":"2ba13b34-9d38-4ae1-beea-ced6f9de33e2","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/configurationGroupSchemas","locations":["uksouth"]},{"resourceType":"publishers/networkservicedesigngroups/networkservicedesignversions","locations":["uksouth"]}]}],"dependencies":[{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema","resourceType":"Microsoft.Hybridnetwork/publishers/configurationGroupSchemas","resourceName":"ubuntuPublisher/ubuntu_ConfigGroupSchema"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0","resourceType":"Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions","resourceName":"ubuntuPublisher/ubuntu/1.0.0"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447188/operationStatuses/08585111596941610562?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1828'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111596941610562?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:39:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111596941610562?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:40:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585111596941610562?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:40:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/patrykkulik-test/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1690447188","name":"AOSM_CLI_deployment_1690447188","type":"Microsoft.Resources/deployments","properties":{"templateHash":"15386908252537985940","parameters":{"location":{"type":"String","value":"uksouth"},"publisherName":{"type":"String","value":"ubuntuPublisher"},"acrArtifactStoreName":{"type":"String","value":"ubuntu-acr"},"nsDesignGroup":{"type":"String","value":"ubuntu"},"nsDesignVersion":{"type":"String","value":"1.0.0"},"nfviSiteName":{"type":"String","value":"ubuntu_NFVI"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-07-27T08:40:35.3185037Z","duration":"PT42.2053258S","correlationId":"2ba13b34-9d38-4ae1-beea-ced6f9de33e2","providers":[{"namespace":"Microsoft.Hybridnetwork","resourceTypes":[{"resourceType":"publishers/configurationGroupSchemas","locations":["uksouth"]},{"resourceType":"publishers/networkservicedesigngroups/networkservicedesignversions","locations":["uksouth"]}]}],"dependencies":[{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema","resourceType":"Microsoft.Hybridnetwork/publishers/configurationGroupSchemas","resourceName":"ubuntuPublisher/ubuntu_ConfigGroupSchema"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0","resourceType":"Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions","resourceName":"ubuntuPublisher/ubuntu/1.0.0"}],"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2278'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:40:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.Hybridnetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0","name":"ubuntu-vm-nfdg-nf-acr-manifest-1-0-0","type":"microsoft.hybridnetwork/publishers/artifactstores/artifactmanifests","location":"uksouth","systemData":{"createdBy":"jamieparsons@microsoft.com","createdByType":"User","createdAt":"2023-07-27T08:39:16.0188573Z","lastModifiedBy":"jamieparsons@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-07-27T08:39:16.0188573Z"},"properties":{"artifacts":[{"artifactName":"ubuntu-vm-nfdg_nf_artifact","artifactType":"ArmTemplate","artifactVersion":"1.0.0"}],"artifactManifestState":"Uploading","provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '820'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:40:54 GMT
      etag:
      - '"1000417f-0000-1100-0000-64c22d420000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -f --debug
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0/listCredential?api-version=2023-04-01-preview
  response:
    body:
      string: '{"username":"ubuntu-vm-nfdg-nf-acr-manifest-1-0-0","acrToken":"yjrs+aHaxKJQ04SiGwWNa2AtxITacjTpNLXCl+z5ox+ACRDA1dxb","acrServerUrl":"https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io","repositories":["ubuntu-vm-nfdg_nf_artifact"],"expiry":"2023-07-28T08:40:55.8065979+00:00","credentialType":"AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '332'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:40:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/
  response:
    body:
      string: '{"errors":[{"code":"UNAUTHORIZED","message":"authentication required,
        visit https://aka.ms/acr/authorization for more information.","detail":[{"Type":"repository","Name":"ubuntu-vm-nfdg_nf_artifact","Action":"pull"},{"Type":"repository","Name":"ubuntu-vm-nfdg_nf_artifact","Action":"push"}]}]}

        '
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '294'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:40:59 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token",service="ubuntupublisherubuntuacr2315dcfa83.azurecr.io",scope="repository:ubuntu-vm-nfdg_nf_artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - ubuntupublisherubuntuacr2315dcfa83.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token?service=ubuntupublisherubuntuacr2315dcfa83.azurecr.io&scope=repository%3Aubuntu-vm-nfdg_nf_artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkNPQVU6UERZSDo0SVJYOjM2SEI6TFYzUDpWNFBGOko0NzQ6SzNOSjpPS1JCOlRZQUo6NEc0Szo1Q1NEIn0.eyJqdGkiOiI3ZmYxMTA0MC03NzY2LTRjYWEtYmRkMi0wZjBhZDQ3YjdkOWUiLCJzdWIiOiJ1YnVudHUtdm0tbmZkZy1uZi1hY3ItbWFuaWZlc3QtMS0wLTAiLCJuYmYiOjE2OTA0NDYzNTksImV4cCI6MTY5MDQ0ODE1OSwiaWF0IjoxNjkwNDQ2MzU5LCJpc3MiOiJBenVyZSBDb250YWluZXIgUmVnaXN0cnkiLCJhdWQiOiJ1YnVudHVwdWJsaXNoZXJ1YnVudHVhY3IyMzE1ZGNmYTgzLmF6dXJlY3IuaW8iLCJ2ZXJzaW9uIjoiMi4wIiwicmlkIjoiNTM2NDkxMTgyMTMxNGQ2NzkyNmRhN2EzY2RjMTc0ZjgiLCJhY2Nlc3MiOlt7IlR5cGUiOiJyZXBvc2l0b3J5IiwiTmFtZSI6InVidW50dS12bS1uZmRnX25mX2FydGlmYWN0IiwiQWN0aW9ucyI6WyJwdWxsIiwicHVzaCJdfV0sInJvbGVzIjpbXSwiZ3JhbnRfdHlwZSI6ImFjY2Vzc190b2tlbiJ9.siy2-dIIX3u-CF13DvJ-XXtxQjOpL_Di-iRS24X_9XZ77I22L94hMk07_Wk0oiwbCN68ZEjzHqJ5bgOYQ0X4QL891MUNJOnSOZnDrfRpNVQSgHop7EBnIQi0ydR-KmdV-qSMaCfJEh0CKZdTNtUaRPSxnRHMwVleYL9O4qk_LQifC35mHyEiKxay7Dmi2fJRqi0nK2xvA_nsjlNf2m4iwdj9enrOjvGKvh9UQYj3V1QQEfRCp4zL6sPZYYC8KCKzVeUO-bCoIx7jFZdK4ubKwyoNR0X_WWAmJBykuhpCZfWr8Z5bwjl-qE7nTck3qYBBVcTADeNTQaWZF08s-5dmHg"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:40:59 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:40:59 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 64e17226-dcba-4542-8c42-952f36a5c04a
      location:
      - /v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/64e17226-dcba-4542-8c42-952f36a5c04a?_nouploadcache=false&_state=nq8UY1SfWZMMl2xnuQyqavmAEe22d70CJZyWcyX--MZ7Ik5hbWUiOiJ1YnVudHUtdm0tbmZkZ19uZl9hcnRpZmFjdCIsIlVVSUQiOiI2NGUxNzIyNi1kY2JhLTQ1NDItOGM0Mi05NTJmMzZhNWMwNGEiLCJPZmZzZXQiOjAsIlN0YXJ0ZWRBdCI6IjIwMjMtMDctMjdUMDg6NDA6NTkuNjc5NzE4MTA0WiJ9
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: "{\n    \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
      \   \"contentVersion\": \"1.0.0.0\",\n    \"metadata\": {\n        \"_generator\":
      {\n            \"name\": \"bicep\",\n            \"version\": \"0.15.31.15270\",\n
      \           \"templateHash\": \"6874079872057921116\"\n        }\n    },\n    \"parameters\":
      {\n        \"publisherName\": {\n            \"type\": \"string\",\n            \"defaultValue\":
      \"ubuntuPublisher\",\n            \"metadata\": {\n                \"description\":
      \"Publisher where the NFD is published\"\n            }\n        },\n        \"networkFunctionDefinitionGroupName\":
      {\n            \"type\": \"string\",\n            \"defaultValue\": \"ubuntu-vm-nfdg\",\n
      \           \"metadata\": {\n                \"description\": \"NFD Group name
      for the Network Function\"\n            }\n        },\n        \"ubuntu_vm_nfdg_nfd_version\":
      {\n            \"type\": \"string\",\n            \"metadata\": {\n                \"description\":
      \"NFD version\"\n            }\n        },\n        \"networkFunctionDefinitionOfferingLocation\":
      {\n            \"type\": \"string\",\n            \"defaultValue\": \"uksouth\",\n
      \           \"metadata\": {\n                \"description\": \"Offering location
      for the Network Function\"\n            }\n        },\n        \"managedIdentity\":
      {\n            \"type\": \"string\",\n            \"metadata\": {\n                \"description\":
      \"The managed identity that should be used to create the NF.\"\n            }\n
      \       },\n        \"location\": {\n            \"type\": \"string\",\n            \"defaultValue\":
      \"uksouth\"\n        },\n        \"nfviType\": {\n            \"type\": \"string\",\n
      \           \"defaultValue\": \"AzureCore\"\n        },\n        \"resourceGroupId\":
      {\n            \"type\": \"string\",\n            \"defaultValue\": \"[resourceGroup().id]\"\n
      \       },\n        \"deploymentParameters\": {\n            \"type\": \"array\"\n
      \       }\n    },\n    \"variables\": {\n        \"identityObject\": \"[if(equals(parameters('managedIdentity'),
      ''), createObject('type', 'SystemAssigned'), createObject('type', 'UserAssigned',
      'userAssignedIdentities', createObject(format('{0}', parameters('managedIdentity')),
      createObject())))]\"\n    },\n    \"resources\": [\n        {\n            \"copy\":
      {\n                \"name\": \"nf_resource\",\n                \"count\": \"[length(parameters('deploymentParameters'))]\"\n
      \           },\n            \"type\": \"Microsoft.HybridNetwork/networkFunctions\",\n
      \           \"apiVersion\": \"2023-04-01-preview\",\n            \"name\": \"[format('ubuntu-vm-nfdg{0}',
      copyIndex())]\",\n            \"location\": \"[parameters('location')]\",\n
      \           \"identity\": \"[variables('identityObject')]\",\n            \"properties\":
      {\n                \"publisherName\": \"[parameters('publisherName')]\",\n                \"publisherScope\":
      \"Private\",\n                \"networkFunctionDefinitionGroupName\": \"[parameters('networkFunctionDefinitionGroupName')]\",\n
      \               \"networkFunctionDefinitionVersion\": \"[parameters('ubuntu_vm_nfdg_nfd_version')]\",\n
      \               \"networkFunctionDefinitionOfferingLocation\": \"[parameters('networkFunctionDefinitionOfferingLocation')]\",\n
      \               \"nfviType\": \"[parameters('nfviType')]\",\n                \"nfviId\":
      \"[parameters('resourceGroupId')]\",\n                \"allowSoftwareUpdate\":
      true,\n                \"deploymentValues\": \"[string(parameters('deploymentParameters')[copyIndex()])]\"\n
      \           }\n        }\n    ]\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '3329'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/64e17226-dcba-4542-8c42-952f36a5c04a?_nouploadcache=false&_state=nq8UY1SfWZMMl2xnuQyqavmAEe22d70CJZyWcyX--MZ7Ik5hbWUiOiJ1YnVudHUtdm0tbmZkZ19uZl9hcnRpZmFjdCIsIlVVSUQiOiI2NGUxNzIyNi1kY2JhLTQ1NDItOGM0Mi05NTJmMzZhNWMwNGEiLCJPZmZzZXQiOjAsIlN0YXJ0ZWRBdCI6IjIwMjMtMDctMjdUMDg6NDA6NTkuNjc5NzE4MTA0WiJ9&digest=sha256%3A203ab85e769c53b5698a5596a042c3190fdb91c36b361bb0fcc7700a1186af93
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:40:59 GMT
      docker-content-digest:
      - sha256:203ab85e769c53b5698a5596a042c3190fdb91c36b361bb0fcc7700a1186af93
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu-vm-nfdg_nf_artifact/blobs/sha256:203ab85e769c53b5698a5596a042c3190fdb91c36b361bb0fcc7700a1186af93
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/
  response:
    body:
      string: '{"errors":[{"code":"UNAUTHORIZED","message":"authentication required,
        visit https://aka.ms/acr/authorization for more information.","detail":[{"Type":"repository","Name":"ubuntu-vm-nfdg_nf_artifact","Action":"pull"},{"Type":"repository","Name":"ubuntu-vm-nfdg_nf_artifact","Action":"push"}]}]}

        '
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '294'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:41:00 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token",service="ubuntupublisherubuntuacr2315dcfa83.azurecr.io",scope="repository:ubuntu-vm-nfdg_nf_artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - ubuntupublisherubuntuacr2315dcfa83.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token?service=ubuntupublisherubuntuacr2315dcfa83.azurecr.io&scope=repository%3Aubuntu-vm-nfdg_nf_artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkNPQVU6UERZSDo0SVJYOjM2SEI6TFYzUDpWNFBGOko0NzQ6SzNOSjpPS1JCOlRZQUo6NEc0Szo1Q1NEIn0.eyJqdGkiOiJmYjUwNzA1OS04MTYyLTRlOGItYTU2MS03MDk4Nzk5NDQ0MjEiLCJzdWIiOiJ1YnVudHUtdm0tbmZkZy1uZi1hY3ItbWFuaWZlc3QtMS0wLTAiLCJuYmYiOjE2OTA0NDYzNjAsImV4cCI6MTY5MDQ0ODE2MCwiaWF0IjoxNjkwNDQ2MzYwLCJpc3MiOiJBenVyZSBDb250YWluZXIgUmVnaXN0cnkiLCJhdWQiOiJ1YnVudHVwdWJsaXNoZXJ1YnVudHVhY3IyMzE1ZGNmYTgzLmF6dXJlY3IuaW8iLCJ2ZXJzaW9uIjoiMi4wIiwicmlkIjoiNTM2NDkxMTgyMTMxNGQ2NzkyNmRhN2EzY2RjMTc0ZjgiLCJhY2Nlc3MiOlt7IlR5cGUiOiJyZXBvc2l0b3J5IiwiTmFtZSI6InVidW50dS12bS1uZmRnX25mX2FydGlmYWN0IiwiQWN0aW9ucyI6WyJwdWxsIiwicHVzaCJdfV0sInJvbGVzIjpbXSwiZ3JhbnRfdHlwZSI6ImFjY2Vzc190b2tlbiJ9.Di3y7Kst9768MNe5HMPDeB_p9_BMSZ-IOndp7Dn_54PAun-eL7dl4WzPapVUY6d0jtxcBn3kUaIv22cnF4jV5_K_NLJs_iDixVEBmyIH73puL6XCAo1z9FkOdxIZt5yw60Gjo27AoQUhAbi-qv9www9Tg5AVOqkAhISCj2fqFU7Dj5cCEls2nsAyq61wcLXxctxJtOarKmkpPF2r-SAZ94W2BETJ36V8Sma1CAJO5wk_nQ2c9S_ICMCAkBxy0hZhA5Bk0wIcJD5bwZKC_3LBvDry_J4Dsaha7oG42dzRrW0hKbu4nRCWhfLgnzmHmnsW4KPtZkrU4hsplrFoFSlcTw"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:41:00 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:41:00 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 938244b7-a9b2-43fd-8f26-261893055781
      location:
      - /v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/938244b7-a9b2-43fd-8f26-261893055781?_nouploadcache=false&_state=xB8zt3tzNjZbQZ9DnI8cLTk3-cPsOldGe7a6nyrcoxB7Ik5hbWUiOiJ1YnVudHUtdm0tbmZkZ19uZl9hcnRpZmFjdCIsIlVVSUQiOiI5MzgyNDRiNy1hOWIyLTQzZmQtOGYyNi0yNjE4OTMwNTU3ODEiLCJPZmZzZXQiOjAsIlN0YXJ0ZWRBdCI6IjIwMjMtMDctMjdUMDg6NDE6MDAuMDkzNzQ4NTQzWiJ9
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/blobs/uploads/938244b7-a9b2-43fd-8f26-261893055781?_nouploadcache=false&_state=xB8zt3tzNjZbQZ9DnI8cLTk3-cPsOldGe7a6nyrcoxB7Ik5hbWUiOiJ1YnVudHUtdm0tbmZkZ19uZl9hcnRpZmFjdCIsIlVVSUQiOiI5MzgyNDRiNy1hOWIyLTQzZmQtOGYyNi0yNjE4OTMwNTU3ODEiLCJPZmZzZXQiOjAsIlN0YXJ0ZWRBdCI6IjIwMjMtMDctMjdUMDg6NDE6MDAuMDkzNzQ4NTQzWiJ9&digest=sha256%3Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:41:00 GMT
      docker-content-digest:
      - sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu-vm-nfdg_nf_artifact/blobs/sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3329,
      "digest": "sha256:203ab85e769c53b5698a5596a042c3190fdb91c36b361bb0fcc7700a1186af93",
      "annotations": {"org.opencontainers.image.title": "nf_definition.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '502'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/manifests/1.0.0
  response:
    body:
      string: '{"errors":[{"code":"UNAUTHORIZED","message":"authentication required,
        visit https://aka.ms/acr/authorization for more information.","detail":[{"Type":"repository","Name":"ubuntu-vm-nfdg_nf_artifact","Action":"pull"},{"Type":"repository","Name":"ubuntu-vm-nfdg_nf_artifact","Action":"push"}]}]}

        '
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '294'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:41:00 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token",service="ubuntupublisherubuntuacr2315dcfa83.azurecr.io",scope="repository:ubuntu-vm-nfdg_nf_artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - ubuntupublisherubuntuacr2315dcfa83.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/oauth2/token?service=ubuntupublisherubuntuacr2315dcfa83.azurecr.io&scope=repository%3Aubuntu-vm-nfdg_nf_artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkNPQVU6UERZSDo0SVJYOjM2SEI6TFYzUDpWNFBGOko0NzQ6SzNOSjpPS1JCOlRZQUo6NEc0Szo1Q1NEIn0.eyJqdGkiOiIxOTU0MTc1Yi1mMGVlLTQzYTctODQwMS00MWE1NGFiYWM1ZjQiLCJzdWIiOiJ1YnVudHUtdm0tbmZkZy1uZi1hY3ItbWFuaWZlc3QtMS0wLTAiLCJuYmYiOjE2OTA0NDYzNjAsImV4cCI6MTY5MDQ0ODE2MCwiaWF0IjoxNjkwNDQ2MzYwLCJpc3MiOiJBenVyZSBDb250YWluZXIgUmVnaXN0cnkiLCJhdWQiOiJ1YnVudHVwdWJsaXNoZXJ1YnVudHVhY3IyMzE1ZGNmYTgzLmF6dXJlY3IuaW8iLCJ2ZXJzaW9uIjoiMi4wIiwicmlkIjoiNTM2NDkxMTgyMTMxNGQ2NzkyNmRhN2EzY2RjMTc0ZjgiLCJhY2Nlc3MiOlt7IlR5cGUiOiJyZXBvc2l0b3J5IiwiTmFtZSI6InVidW50dS12bS1uZmRnX25mX2FydGlmYWN0IiwiQWN0aW9ucyI6WyJwdWxsIiwicHVzaCJdfV0sInJvbGVzIjpbXSwiZ3JhbnRfdHlwZSI6ImFjY2Vzc190b2tlbiJ9.plgAbyg8j371ayhLrqK1NC4t7zTNjrAj0ey0o6UWpU_7toO6CZhkzJHpn_exfPmJ1DA7ZNjO0TuqcooGQv5kxVp-wCJVpCQaGZSMq-6TXRROl-4KAdvN5gcqBF8NKRdH-j5QsNs_8K6ecd20bxYBzYKy40_9zSmxdrnuBHzLSJsy8Xcx5HxRrIzsBZrCEp_mbooSKBn5pQtauiIjQniYtgAkBQIk-J6S0OyPZjSfkiGXVO3TblRNcys__4lfpvx82gTLouDLaWCY7c4yodwBD5oCNHjV_vL-apAQOtmh64wEajzun4UOA3hLH0t2asN1Si_QN076HM4gvZxlVwN9hw"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:41:00 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3329,
      "digest": "sha256:203ab85e769c53b5698a5596a042c3190fdb91c36b361bb0fcc7700a1186af93",
      "annotations": {"org.opencontainers.image.title": "nf_definition.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '502'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://ubuntupublisherubuntuacr2315dcfa83.azurecr.io/v2/ubuntu-vm-nfdg_nf_artifact/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Thu, 27 Jul 2023 08:41:00 GMT
      docker-content-digest:
      - sha256:16c22b2acdf0e0e39bd304ad53dd567b5c959774319563df7958625e9bdc5088
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu-vm-nfdg_nf_artifact/manifests/sha256:16c22b2acdf0e0e39bd304ad53dd567b5c959774319563df7958625e9bdc5088
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg/networkFunctionDefinitionVersions/1.0.0?api-version=2023-04-01-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:41:01 GMT
      etag:
      - '"06001c9a-0000-1100-0000-64c22d9d0000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","name":"455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg/networkFunctionDefinitionVersions/1.0.0","status":"Deleting","startTime":"2023-07-27T08:41:01.8378067Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '602'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:41:01 GMT
      etag:
      - '"0200bb7b-0000-1100-0000-64c22d9d0000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","name":"455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg/networkFunctionDefinitionVersions/1.0.0","status":"Deleting","startTime":"2023-07-27T08:41:01.8378067Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '602'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:41:32 GMT
      etag:
      - '"0200bb7b-0000-1100-0000-64c22d9d0000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","name":"455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg/networkFunctionDefinitionVersions/1.0.0","status":"Deleting","startTime":"2023-07-27T08:41:01.8378067Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '602'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:42:01 GMT
      etag:
      - '"0200bb7b-0000-1100-0000-64c22d9d0000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","name":"455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg/networkFunctionDefinitionVersions/1.0.0","status":"Succeeded","startTime":"2023-07-27T08:41:01.8378067Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '621'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:42:31 GMT
      etag:
      - '"0200f67b-0000-1100-0000-64c22de00000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","name":"455432af-8fa9-4c95-acc3-86eee4df1396*D624C07777555D34927C0A2B08D32D894F860B37ED62687F7FB2A1AE8B045BC5","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkFunctionDefinitionGroups/ubuntu-vm-nfdg/networkFunctionDefinitionVersions/1.0.0","status":"Succeeded","startTime":"2023-07-27T08:41:01.8378067Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '621'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:42:31 GMT
      etag:
      - '"0200f67b-0000-1100-0000-64c22de00000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:42:33 GMT
      etag:
      - '"10002c82-0000-1100-0000-64c22df90000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14998'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B","name":"aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0","status":"Deleting","startTime":"2023-07-27T08:42:33.3121659Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '594'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:42:33 GMT
      etag:
      - '"02001e7c-0000-1100-0000-64c22df90000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B","name":"aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0","status":"Succeeded","startTime":"2023-07-27T08:42:33.3121659Z","endTime":"2023-07-27T08:42:37.6272883Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '654'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:02 GMT
      etag:
      - '"0200217c-0000-1100-0000-64c22dfd0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B","name":"aad47946-0259-4d0c-a5ba-56212bb845c8*A14CB3C906EF24FA3D408DD057F2AE24B571D82B0D5EA33C6DE47C5BDC4F2A9B","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0","status":"Succeeded","startTime":"2023-07-27T08:42:33.3121659Z","endTime":"2023-07-27T08:42:37.6272883Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '654'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:03 GMT
      etag:
      - '"0200217c-0000-1100-0000-64c22dfd0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:04 GMT
      etag:
      - '"1000e682-0000-1100-0000-64c22e190000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14997'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443","name":"38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0","status":"Deleting","startTime":"2023-07-27T08:43:04.7152779Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '588'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:04 GMT
      etag:
      - '"02003d7c-0000-1100-0000-64c22e180000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443","name":"38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0","status":"Succeeded","startTime":"2023-07-27T08:43:04.7152779Z","endTime":"2023-07-27T08:43:10.5584027Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '648'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:35 GMT
      etag:
      - '"02003f7c-0000-1100-0000-64c22e1e0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --definition-type -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443","name":"38449bce-138a-4496-8a5c-bbe3d49b43f8*D2486BCAB99E2BCF72D1AA248612DB2BD4F1B7EC473B74FDCBE40C6CD1EDB443","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0","status":"Succeeded","startTime":"2023-07-27T08:43:04.7152779Z","endTime":"2023-07-27T08:43:10.5584027Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '648'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:35 GMT
      etag:
      - '"02003f7c-0000-1100-0000-64c22e1e0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0?api-version=2023-04-01-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:36 GMT
      etag:
      - '"0300cd3d-0000-1100-0000-64c22e380000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224","name":"3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0","status":"Deleting","startTime":"2023-07-27T08:43:36.5797462Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '584'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:43:36 GMT
      etag:
      - '"02005a7c-0000-1100-0000-64c22e380000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224","name":"3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0","status":"Succeeded","startTime":"2023-07-27T08:43:36.5797462Z","endTime":"2023-07-27T08:43:41.4670481Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '644'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:06 GMT
      etag:
      - '"0200637c-0000-1100-0000-64c22e3d0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224","name":"3aca03a0-c1b9-4931-9105-e0af1bba2573*1846D68E68668C8C67B84D44A208FE839BD2E9DD81A439CF0FA33146989C6224","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0","status":"Succeeded","startTime":"2023-07-27T08:43:36.5797462Z","endTime":"2023-07-27T08:43:41.4670481Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '644'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:06 GMT
      etag:
      - '"0200637c-0000-1100-0000-64c22e3d0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0?api-version=2023-04-01-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:08 GMT
      etag:
      - '"1000cd83-0000-1100-0000-64c22e580000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14998'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F","name":"03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0","status":"Deleting","startTime":"2023-07-27T08:44:08.0720075Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '596'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:08 GMT
      etag:
      - '"0200ad7c-0000-1100-0000-64c22e580000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F","name":"03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0","status":"Succeeded","startTime":"2023-07-27T08:44:08.0720075Z","endTime":"2023-07-27T08:44:22.4798635Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '656'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:37 GMT
      etag:
      - '"0200c47c-0000-1100-0000-64c22e660000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F","name":"03287562-f38a-4ca3-8596-7d51710c4961*8D93DE1828AACDC1144F7B137A7BDBCA1FB2298A8036FEA31CE0BEA6F8A8908F","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-nfdg-nf-acr-manifest-1-0-0","status":"Succeeded","startTime":"2023-07-27T08:44:08.0720075Z","endTime":"2023-07-27T08:44:22.4798635Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '656'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:37 GMT
      etag:
      - '"0200c47c-0000-1100-0000-64c22e660000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema?api-version=2023-04-01-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:38 GMT
      etag:
      - '"050013be-0000-1100-0000-64c22e770000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02386.1640
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14997'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73","name":"219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema","status":"Deleting","startTime":"2023-07-27T08:44:39.4195502Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73?api-version=2020-01-01-preview
      cache-control:
      - no-cache
      content-length:
      - '566'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:44:38 GMT
      etag:
      - '"0200d37c-0000-1100-0000-64c22e770000"'
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.HybridNetwork/locations/uksouth/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73?api-version=2020-01-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73","name":"219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema","status":"Succeeded","startTime":"2023-07-27T08:44:39.4195502Z","endTime":"2023-07-27T08:44:44.5104073Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '626'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:45:09 GMT
      etag:
      - '"0200d87c-0000-1100-0000-64c22e7c0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -f --debug --force
      User-Agent:
      - AZURECLI/2.49.0 azsdk-python-hybridnetwork/2020-01-01-preview Python/3.8.10
        (Linux-5.10.102.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73?api-version=2020-01-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.HybridNetwork/locations/UKSOUTH/operationStatuses/219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73","name":"219abeba-ae1e-4df1-a118-ca863c1c8109*11248D1E508C64951FD5472E112C703E359E13297009740D5C18AF47B65BEF73","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/patrykkulik-test/providers/Microsoft.HybridNetwork/publishers/ubuntuPublisher/configurationGroupSchemas/ubuntu_ConfigGroupSchema","status":"Succeeded","startTime":"2023-07-27T08:44:39.4195502Z","endTime":"2023-07-27T08:44:44.5104073Z","properties":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '626'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jul 2023 08:45:09 GMT
      etag:
      - '"0200d87c-0000-1100-0000-64c22e7c0000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
