# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for
# license information.
#
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.
# --------------------------------------------------------------------------
from .utils import get_project_data
from ._validators import validate_endpoint

# Data plane


def cf_devcenter_dataplane(cli_ctx, endpoint=None, dev_center=None, project_name=None):
    from azure.cli.core._profile import Profile
    from azext_devcenter.vendored_sdks.devcenter_dataplane import (
        DevCenterClient,
    )

    validate_endpoint(endpoint, dev_center)

    if endpoint is None and dev_center is not None:
        project = get_project_data(cli_ctx, dev_center, project_name)
        endpoint = project["devCenterUri"]

    profile = Profile(cli_ctx=cli_ctx)

    credential = profile.get_login_credentials(resource="https://devcenter.azure.com")

    return DevCenterClient(endpoint, credential[0])


def cf_dev_center_dp(cli_ctx, dev_center, *_):
    return cf_devcenter_dataplane(cli_ctx, dev_center).dev_center


def cf_dev_boxes_dp(cli_ctx, dev_center, *_):
    return cf_devcenter_dataplane(cli_ctx, dev_center).dev_boxes


def cf_project_operations_dp(cli_ctx, dev_center, *_):
    return cf_devcenter_dataplane(cli_ctx, dev_center).projects


def cf_environments_dp(cli_ctx, dev_center, *_):
    return cf_devcenter_dataplane(cli_ctx, dev_center).environments


def cf_deployment_environment_operations_dp(cli_ctx, dev_center, *_):
    return cf_devcenter_dataplane(cli_ctx, dev_center).deployment_environments

# Control plane


def cf_devcenter_cl(cli_ctx, *_):
    from azure.cli.core.commands.client_factory import get_mgmt_service_client
    from azext_devcenter.vendored_sdks.devcenter import DevCenter

    return get_mgmt_service_client(cli_ctx, DevCenter)
