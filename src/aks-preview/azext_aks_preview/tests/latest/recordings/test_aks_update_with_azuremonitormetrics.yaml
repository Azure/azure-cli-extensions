interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.ContainerService/managedClusters/cliakstest000002''
        under resource group ''clitest000001'' was not found. For more details please
        go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '244'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:08:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"location": "westus2", "identity": {"type": "SystemAssigned"}, "properties":
      {"kubernetesVersion": "", "dnsPrefix": "cliakstest-clitestptfp5fag2-79a739",
      "agentPoolProfiles": [{"count": 3, "vmSize": "standard_d2s_v3", "osDiskSizeGB":
      0, "workloadRuntime": "OCIContainer", "osType": "Linux", "enableAutoScaling":
      false, "type": "VirtualMachineScaleSets", "mode": "System", "orchestratorVersion":
      "", "upgradeSettings": {}, "enableNodePublicIP": false, "enableCustomCATrust":
      false, "scaleSetPriority": "Regular", "scaleSetEvictionPolicy": "Delete", "spotMaxPrice":
      -1.0, "nodeTaints": [], "enableEncryptionAtHost": false, "enableUltraSSD": false,
      "enableFIPS": false, "networkProfile": {}, "name": "nodepool1"}], "linuxProfile":
      {"adminUsername": "azureuser", "ssh": {"publicKeys": [{"keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
      azcli_aks_live_test@example.com\n"}]}}, "addonProfiles": {}, "enableRBAC": true,
      "enablePodSecurityPolicy": false, "networkProfile": {"networkPlugin": "kubenet",
      "podCidr": "10.244.0.0/16", "serviceCidr": "10.0.0.0/16", "dnsServiceIP": "10.0.0.10",
      "dockerBridgeCidr": "172.17.0.1/16", "outboundType": "loadBalancer", "loadBalancerSku":
      "standard"}, "disableLocalAccounts": false, "storageProfile": {}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      Content-Length:
      - '1580'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Creating\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Creating\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"backendPoolType\": \"nodeIPConfiguration\"\n
        \   },\n    \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"disableLocalAccounts\":
        false,\n   \"securityProfile\": {},\n   \"storageProfile\": {\n    \"diskCSIDriver\":
        {\n     \"enabled\": true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\":
        {\n     \"enabled\": true\n    },\n    \"snapshotController\": {\n     \"enabled\":
        true\n    }\n   },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n
        \  },\n   \"workloadAutoScalerProfile\": {}\n  },\n  \"identity\": {\n   \"type\":
        \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
      cache-control:
      - no-cache
      content-length:
      - '3514'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:09:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:09:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:09:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:10:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:10:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:11:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:11:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:12:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:12:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:13:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:13:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:14:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:14:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:15:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:15:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:16:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:16:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/762ece28-d502-4a30-8328-a23c213e3a50?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"28ce2e76-02d5-304a-8328-a23c213e3a50\",\n  \"status\":
        \"Succeeded\",\n  \"startTime\": \"2023-05-12T10:09:07.0372783Z\",\n  \"endTime\":
        \"2023-05-12T10:16:44.4814855Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '170'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:17:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --ssh-key-value --node-vm-size --enable-managed-identity
        --output
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Succeeded\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Succeeded\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"Standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\": [\n      {\n
        \      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ],\n     \"backendPoolType\": \"nodeIPConfiguration\"\n    },\n
        \   \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"identityProfile\":
        {\n    \"kubeletidentity\": {\n     \"resourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"snapshotController\": {\n     \"enabled\": true\n    }\n
        \  },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n   },\n   \"workloadAutoScalerProfile\":
        {}\n  },\n  \"identity\": {\n   \"type\": \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4167'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:17:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Succeeded\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Succeeded\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"Standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\": [\n      {\n
        \      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ],\n     \"backendPoolType\": \"nodeIPConfiguration\"\n    },\n
        \   \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"identityProfile\":
        {\n    \"kubeletidentity\": {\n     \"resourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"snapshotController\": {\n     \"enabled\": true\n    }\n
        \  },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n   },\n   \"workloadAutoScalerProfile\":
        {}\n  },\n  \"identity\": {\n   \"type\": \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4167'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:17:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.check_azuremonitormetrics_profile
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2023-01-01
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Succeeded\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Succeeded\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"mode\": \"System\",\n     \"enableEncryptionAtHost\": false,\n
        \    \"enableUltraSSD\": false,\n     \"osType\": \"Linux\",\n     \"osSKU\":
        \"Ubuntu\",\n     \"nodeImageVersion\": \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n
        \    \"upgradeSettings\": {},\n     \"enableFIPS\": false\n    }\n   ],\n
        \  \"linuxProfile\": {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\":
        {\n     \"publicKeys\": [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"networkProfile\": {\n    \"networkPlugin\":
        \"kubenet\",\n    \"loadBalancerSku\": \"Standard\",\n    \"loadBalancerProfile\":
        {\n     \"managedOutboundIPs\": {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\":
        [\n      {\n       \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ]\n    },\n    \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\":
        \"10.0.0.0/16\",\n    \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\":
        \"172.17.0.1/16\",\n    \"outboundType\": \"loadBalancer\",\n    \"podCidrs\":
        [\n     \"10.244.0.0/16\"\n    ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n
        \   ],\n    \"ipFamilies\": [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\":
        100,\n   \"identityProfile\": {\n    \"kubeletidentity\": {\n     \"resourceId\":
        \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"fileCSIDriver\": {\n     \"enabled\": true\n    },\n    \"snapshotController\":
        {\n     \"enabled\": true\n    }\n   },\n   \"oidcIssuerProfile\": {\n    \"enabled\":
        false\n   },\n   \"workloadAutoScalerProfile\": {}\n  },\n  \"identity\":
        {\n   \"type\": \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Basic\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3999'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:17:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_mac_sub_list
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers?api-version=2021-04-01&$select=namespace,registrationstate
  response:
    body:
      string: '{"value":[{"namespace":"Microsoft.Security","registrationState":"Registered"},{"namespace":"Microsoft.Compute","registrationState":"Registered"},{"namespace":"Microsoft.ContainerService","registrationState":"Registered"},{"namespace":"Microsoft.ContainerInstance","registrationState":"Registered"},{"namespace":"Microsoft.OperationsManagement","registrationState":"Registered"},{"namespace":"Microsoft.Capacity","registrationState":"Registered"},{"namespace":"Microsoft.Storage","registrationState":"Registered"},{"namespace":"Microsoft.Advisor","registrationState":"Registered"},{"namespace":"Microsoft.ManagedIdentity","registrationState":"Registered"},{"namespace":"Microsoft.KeyVault","registrationState":"Registered"},{"namespace":"Microsoft.ContainerRegistry","registrationState":"Registered"},{"namespace":"Microsoft.Kusto","registrationState":"Registered"},{"namespace":"Microsoft.Migrate","registrationState":"Registered"},{"namespace":"Microsoft.Diagnostics","registrationState":"Registered"},{"namespace":"Microsoft.MarketplaceNotifications","registrationState":"Registered"},{"namespace":"Microsoft.ChangeAnalysis","registrationState":"Registered"},{"namespace":"microsoft.insights","registrationState":"Registered"},{"namespace":"Microsoft.Logic","registrationState":"Registered"},{"namespace":"Microsoft.Web","registrationState":"Registered"},{"namespace":"Microsoft.ResourceHealth","registrationState":"Registered"},{"namespace":"Microsoft.Monitor","registrationState":"Registered"},{"namespace":"Microsoft.Dashboard","registrationState":"Registered"},{"namespace":"Microsoft.ManagedServices","registrationState":"Registered"},{"namespace":"Microsoft.NotificationHubs","registrationState":"Registered"},{"namespace":"Microsoft.DataLakeStore","registrationState":"Registered"},{"namespace":"Microsoft.Blueprint","registrationState":"Registered"},{"namespace":"Microsoft.Databricks","registrationState":"Registered"},{"namespace":"Microsoft.Relay","registrationState":"Registered"},{"namespace":"Microsoft.Maintenance","registrationState":"Registered"},{"namespace":"Microsoft.HealthcareApis","registrationState":"Registered"},{"namespace":"Microsoft.AppPlatform","registrationState":"Registered"},{"namespace":"Microsoft.DevTestLab","registrationState":"Registered"},{"namespace":"Microsoft.DataLakeAnalytics","registrationState":"Registered"},{"namespace":"Microsoft.Media","registrationState":"Registering"},{"namespace":"Microsoft.Devices","registrationState":"Registered"},{"namespace":"Microsoft.Automation","registrationState":"Registered"},{"namespace":"Microsoft.BotService","registrationState":"Registered"},{"namespace":"Microsoft.Management","registrationState":"Registered"},{"namespace":"Microsoft.CustomProviders","registrationState":"Registered"},{"namespace":"Microsoft.MixedReality","registrationState":"Registered"},{"namespace":"Microsoft.ServiceFabricMesh","registrationState":"Registering"},{"namespace":"Microsoft.DataMigration","registrationState":"Registered"},{"namespace":"Microsoft.RecoveryServices","registrationState":"Registered"},{"namespace":"Microsoft.DesktopVirtualization","registrationState":"Registered"},{"namespace":"Microsoft.DataProtection","registrationState":"Registered"},{"namespace":"Microsoft.DocumentDB","registrationState":"Registered"},{"namespace":"Microsoft.TimeSeriesInsights","registrationState":"Registered"},{"namespace":"Microsoft.Cache","registrationState":"Registered"},{"namespace":"Microsoft.DBforMySQL","registrationState":"Registered"},{"namespace":"Microsoft.SecurityInsights","registrationState":"Registered"},{"namespace":"Microsoft.ApiManagement","registrationState":"Registered"},{"namespace":"Microsoft.EventHub","registrationState":"Registered"},{"namespace":"Microsoft.AVS","registrationState":"Registered"},{"namespace":"Microsoft.PowerBIDedicated","registrationState":"Registered"},{"namespace":"Microsoft.EventGrid","registrationState":"Registered"},{"namespace":"Microsoft.Maps","registrationState":"Registered"},{"namespace":"Microsoft.MachineLearningServices","registrationState":"Registering"},{"namespace":"Microsoft.StreamAnalytics","registrationState":"Registered"},{"namespace":"Microsoft.Search","registrationState":"Registered"},{"namespace":"Microsoft.DBforMariaDB","registrationState":"Registered"},{"namespace":"Microsoft.CognitiveServices","registrationState":"Registered"},{"namespace":"Microsoft.Cdn","registrationState":"Registered"},{"namespace":"Microsoft.HDInsight","registrationState":"Registered"},{"namespace":"Microsoft.ServiceFabric","registrationState":"Registered"},{"namespace":"Microsoft.DBforPostgreSQL","registrationState":"Registered"},{"namespace":"Microsoft.CloudShell","registrationState":"Registered"},{"namespace":"Microsoft.AlertsManagement","registrationState":"Registered"},{"namespace":"Microsoft.OperationalInsights","registrationState":"Registered"},{"namespace":"Microsoft.PolicyInsights","registrationState":"Registered"},{"namespace":"Microsoft.GuestConfiguration","registrationState":"Registered"},{"namespace":"Microsoft.Network","registrationState":"Registered"},{"namespace":"Microsoft.ServiceBus","registrationState":"Registered"},{"namespace":"Microsoft.Sql","registrationState":"Registered"},{"namespace":"Dynatrace.Observability","registrationState":"NotRegistered"},{"namespace":"GitHub.Network","registrationState":"NotRegistered"},{"namespace":"Microsoft.AAD","registrationState":"NotRegistered"},{"namespace":"microsoft.aadiam","registrationState":"NotRegistered"},{"namespace":"Microsoft.Addons","registrationState":"NotRegistered"},{"namespace":"Microsoft.ADHybridHealthService","registrationState":"Registered"},{"namespace":"Microsoft.AgFoodPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.AnalysisServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.AnyBuild","registrationState":"NotRegistered"},{"namespace":"Microsoft.ApiSecurity","registrationState":"NotRegistered"},{"namespace":"Microsoft.App","registrationState":"NotRegistered"},{"namespace":"Microsoft.AppAssessment","registrationState":"NotRegistered"},{"namespace":"Microsoft.AppComplianceAutomation","registrationState":"NotRegistered"},{"namespace":"Microsoft.AppConfiguration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Attestation","registrationState":"NotRegistered"},{"namespace":"Microsoft.Authorization","registrationState":"Registered"},{"namespace":"Microsoft.Automanage","registrationState":"NotRegistered"},{"namespace":"Microsoft.AutonomousDevelopmentPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.AutonomousSystems","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureActiveDirectory","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureArcData","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureCIS","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureData","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzurePercept","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureScan","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureSphere","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureStack","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureStackHCI","registrationState":"NotRegistered"},{"namespace":"Microsoft.BackupSolutions","registrationState":"NotRegistered"},{"namespace":"Microsoft.BareMetalInfrastructure","registrationState":"NotRegistered"},{"namespace":"Microsoft.Batch","registrationState":"NotRegistered"},{"namespace":"Microsoft.Billing","registrationState":"Registered"},{"namespace":"Microsoft.BillingBenefits","registrationState":"NotRegistered"},{"namespace":"Microsoft.Bing","registrationState":"NotRegistered"},{"namespace":"Microsoft.BlockchainTokens","registrationState":"NotRegistered"},{"namespace":"Microsoft.Carbon","registrationState":"NotRegistered"},{"namespace":"Microsoft.CertificateRegistration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Chaos","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicCompute","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicInfrastructureMigrate","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicStorage","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicSubscription","registrationState":"Registered"},{"namespace":"Microsoft.CleanRoom","registrationState":"NotRegistered"},{"namespace":"Microsoft.CloudTest","registrationState":"NotRegistered"},{"namespace":"Microsoft.CodeSigning","registrationState":"NotRegistered"},{"namespace":"Microsoft.Codespaces","registrationState":"NotRegistered"},{"namespace":"Microsoft.CognitiveSearch","registrationState":"NotRegistered"},{"namespace":"Microsoft.Commerce","registrationState":"Registered"},{"namespace":"Microsoft.Communication","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConfidentialLedger","registrationState":"NotRegistered"},{"namespace":"Microsoft.Confluent","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConnectedCache","registrationState":"NotRegistered"},{"namespace":"microsoft.connectedopenstack","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConnectedVehicle","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConnectedVMwarevSphere","registrationState":"NotRegistered"},{"namespace":"Microsoft.Consumption","registrationState":"Registered"},{"namespace":"Microsoft.CostManagement","registrationState":"Registered"},{"namespace":"Microsoft.CostManagementExports","registrationState":"NotRegistered"},{"namespace":"Microsoft.CustomerLockbox","registrationState":"NotRegistered"},{"namespace":"Microsoft.D365CustomerInsights","registrationState":"NotRegistered"},{"namespace":"Microsoft.DatabaseWatcher","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataBox","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataBoxEdge","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataCatalog","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataCollaboration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Datadog","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataFactory","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataReplication","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataShare","registrationState":"NotRegistered"},{"namespace":"Microsoft.DelegatedNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.DeploymentManager","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevAI","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevCenter","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.DeviceUpdate","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevOps","registrationState":"NotRegistered"},{"namespace":"Microsoft.DigitalTwins","registrationState":"NotRegistered"},{"namespace":"Microsoft.DomainRegistration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Easm","registrationState":"NotRegistered"},{"namespace":"Microsoft.EdgeOrder","registrationState":"NotRegistered"},{"namespace":"Microsoft.EdgeOrderPartner","registrationState":"NotRegistered"},{"namespace":"Microsoft.EdgeZones","registrationState":"NotRegistered"},{"namespace":"Microsoft.Elastic","registrationState":"NotRegistered"},{"namespace":"Microsoft.ElasticSan","registrationState":"NotRegistered"},{"namespace":"Microsoft.ExtendedLocation","registrationState":"NotRegistered"},{"namespace":"Microsoft.Falcon","registrationState":"NotRegistered"},{"namespace":"Microsoft.Features","registrationState":"Registered"},{"namespace":"Microsoft.FluidRelay","registrationState":"NotRegistered"},{"namespace":"Microsoft.GraphServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.HanaOnAzure","registrationState":"NotRegistered"},{"namespace":"Microsoft.HardwareSecurityModules","registrationState":"NotRegistered"},{"namespace":"Microsoft.HealthBot","registrationState":"NotRegistered"},{"namespace":"Microsoft.Help","registrationState":"NotRegistered"},{"namespace":"Microsoft.HpcWorkbench","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridCompute","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridConnectivity","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridContainerService","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.Impact","registrationState":"NotRegistered"},{"namespace":"Microsoft.IoTCentral","registrationState":"NotRegistered"},{"namespace":"Microsoft.IoTFirmwareDefense","registrationState":"NotRegistered"},{"namespace":"Microsoft.IoTSecurity","registrationState":"NotRegistered"},{"namespace":"Microsoft.Kubernetes","registrationState":"NotRegistered"},{"namespace":"Microsoft.KubernetesConfiguration","registrationState":"NotRegistered"},{"namespace":"Microsoft.LabServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.LoadTestService","registrationState":"NotRegistered"},{"namespace":"Microsoft.Logz","registrationState":"NotRegistered"},{"namespace":"Microsoft.MachineLearning","registrationState":"NotRegistered"},{"namespace":"Microsoft.ManagedNetworkFabric","registrationState":"NotRegistered"},{"namespace":"Microsoft.ManagedStorageClass","registrationState":"NotRegistered"},{"namespace":"Microsoft.ManufacturingPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.Marketplace","registrationState":"NotRegistered"},{"namespace":"Microsoft.MarketplaceOrdering","registrationState":"Registered"},{"namespace":"Microsoft.Metaverse","registrationState":"NotRegistered"},{"namespace":"Microsoft.Mission","registrationState":"NotRegistered"},{"namespace":"Microsoft.MobileNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.MobilePacketCore","registrationState":"NotRegistered"},{"namespace":"Microsoft.ModSimWorkbench","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetApp","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetworkAnalytics","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetworkCloud","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetworkFunction","registrationState":"NotRegistered"},{"namespace":"Microsoft.Nutanix","registrationState":"NotRegistered"},{"namespace":"Microsoft.ObjectStore","registrationState":"NotRegistered"},{"namespace":"Microsoft.OffAzure","registrationState":"NotRegistered"},{"namespace":"Microsoft.OffAzureSpringBoot","registrationState":"NotRegistered"},{"namespace":"Microsoft.OpenEnergyPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.OpenLogisticsPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.OperatorVoicemail","registrationState":"NotRegistered"},{"namespace":"Microsoft.OracleDiscovery","registrationState":"NotRegistered"},{"namespace":"Microsoft.Orbital","registrationState":"NotRegistered"},{"namespace":"Microsoft.Peering","registrationState":"NotRegistered"},{"namespace":"Microsoft.Pki","registrationState":"NotRegistered"},{"namespace":"Microsoft.PlayFab","registrationState":"NotRegistered"},{"namespace":"Microsoft.Portal","registrationState":"Registered"},{"namespace":"Microsoft.PowerBI","registrationState":"NotRegistered"},{"namespace":"Microsoft.PowerPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.ProfessionalService","registrationState":"NotRegistered"},{"namespace":"Microsoft.ProviderHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.Purview","registrationState":"NotRegistered"},{"namespace":"Microsoft.Quantum","registrationState":"NotRegistered"},{"namespace":"Microsoft.Quota","registrationState":"NotRegistered"},{"namespace":"Microsoft.RecommendationsService","registrationState":"NotRegistered"},{"namespace":"Microsoft.RedHatOpenShift","registrationState":"NotRegistered"},{"namespace":"Microsoft.ResourceConnector","registrationState":"NotRegistered"},{"namespace":"Microsoft.ResourceGraph","registrationState":"Registered"},{"namespace":"Microsoft.Resources","registrationState":"Registered"},{"namespace":"Microsoft.SaaS","registrationState":"NotRegistered"},{"namespace":"Microsoft.SaaSHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.Scom","registrationState":"NotRegistered"},{"namespace":"Microsoft.ScVmm","registrationState":"NotRegistered"},{"namespace":"Microsoft.SecurityDetonation","registrationState":"NotRegistered"},{"namespace":"Microsoft.SecurityDevOps","registrationState":"NotRegistered"},{"namespace":"Microsoft.SerialConsole","registrationState":"Registered"},{"namespace":"Microsoft.ServiceLinker","registrationState":"NotRegistered"},{"namespace":"Microsoft.ServiceNetworking","registrationState":"NotRegistered"},{"namespace":"Microsoft.ServicesHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.SignalRService","registrationState":"NotRegistered"},{"namespace":"Microsoft.Singularity","registrationState":"NotRegistered"},{"namespace":"Microsoft.SoftwarePlan","registrationState":"NotRegistered"},{"namespace":"Microsoft.Solutions","registrationState":"NotRegistered"},{"namespace":"Microsoft.SqlVirtualMachine","registrationState":"NotRegistered"},{"namespace":"Microsoft.StandbyPool","registrationState":"NotRegistered"},{"namespace":"Microsoft.StorageCache","registrationState":"NotRegistered"},{"namespace":"Microsoft.StorageMover","registrationState":"NotRegistered"},{"namespace":"Microsoft.StorageSync","registrationState":"NotRegistered"},{"namespace":"Microsoft.Subscription","registrationState":"NotRegistered"},{"namespace":"microsoft.support","registrationState":"Registered"},{"namespace":"Microsoft.Synapse","registrationState":"NotRegistered"},{"namespace":"Microsoft.Syntex","registrationState":"NotRegistered"},{"namespace":"Microsoft.SystemIntegrityMonitoring","registrationState":"NotRegistered"},{"namespace":"Microsoft.TestBase","registrationState":"NotRegistered"},{"namespace":"Microsoft.UsageBilling","registrationState":"NotRegistered"},{"namespace":"Microsoft.VideoIndexer","registrationState":"NotRegistered"},{"namespace":"Microsoft.VirtualMachineImages","registrationState":"NotRegistered"},{"namespace":"microsoft.visualstudio","registrationState":"NotRegistered"},{"namespace":"Microsoft.VMware","registrationState":"NotRegistered"},{"namespace":"Microsoft.VoiceServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.VSOnline","registrationState":"NotRegistered"},{"namespace":"Microsoft.WindowsESU","registrationState":"NotRegistered"},{"namespace":"Microsoft.WindowsIoT","registrationState":"NotRegistered"},{"namespace":"Microsoft.WindowsPushNotificationServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.WorkloadBuilder","registrationState":"NotRegistered"},{"namespace":"Microsoft.Workloads","registrationState":"NotRegistered"},{"namespace":"NewRelic.Observability","registrationState":"NotRegistered"},{"namespace":"NGINX.NGINXPLUS","registrationState":"NotRegistered"},{"namespace":"PaloAltoNetworks.Cloudngfw","registrationState":"NotRegistered"},{"namespace":"Qumulo.Storage","registrationState":"NotRegistered"},{"namespace":"SolarWinds.Observability","registrationState":"NotRegistered"},{"namespace":"Wandisco.Fusion","registrationState":"NotRegistered"},{"namespace":"Microsoft.ProjectArcadia","registrationState":"NotRegistered"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '19647'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.register_monitor_rp
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.monitor/register?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Monitor","namespace":"Microsoft.Monitor","authorizations":[{"applicationId":"be14bf7e-8ab4-49b0-9dc6-a0eddd6fa73e","roleDefinitionId":"803a038d-eff1-4489-a0c2-dbc204ebac3c"},{"applicationId":"e158b4a5-21ab-442e-ae73-2e19f4e7d763","roleDefinitionId":"e46476d4-e741-4936-a72b-b768349eed70","managedByRoleDefinitionId":"50cd84fb-5e4c-4801-a8d2-4089ab77e6cd"}],"resourceTypes":[{"resourceType":"accounts","locations":["East
        US","Central India","Central US","East US 2","North Europe","South Central
        US","Southeast Asia","UK South","West Europe","West US","West US 2","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2023-04-03","2021-06-03-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SupportsTags, SupportsLocation"},{"resourceType":"operations","locations":["North
        Central US","East US","Australia Central","Australia Southeast","Brazil South","Canada
        Central","Central India","Central US","East Asia","East US 2","North Europe","Norway
        East","South Africa North","South Central US","Southeast Asia","UAE North","UK
        South","West Central US","West Europe","West US","West US 2","East US 2 EUAP","Central
        US EUAP"],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"defaultApiVersion":"2021-06-01-preview","capabilities":"None"},{"resourceType":"locations","locations":[],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationResults","locations":["East
        US","Central India","Central US","East US 2","North Europe","South Central
        US","Southeast Asia","UK South","West Europe","West US","West US 2","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2023-04-03","2021-06-03-preview"],"capabilities":"None"},{"resourceType":"locations/operationStatuses","locations":["East
        US","Central India","Central US","East US 2","North Europe","South Central
        US","Southeast Asia","UK South","West Europe","West US","West US 2","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2023-04-03","2021-06-03-preview"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2246'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.register_dashboard_rp
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.dashboard/register?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Dashboard","namespace":"Microsoft.Dashboard","authorizations":[{"applicationId":"ce34e7e5-485f-4d76-964f-b3d2b16d1e4f","roleDefinitionId":"996b8381-eac0-46be-8daf-9619bafd1073"},{"applicationId":"6f2d169c-08f3-4a4c-a982-bcaf2d038c45"}],"resourceTypes":[{"resourceType":"locations","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationStatuses","locations":["East
        US 2 EUAP","Central US EUAP","South Central US","West Europe","North Europe","UK
        South","East US","East US 2","West Central US","Australia East","Sweden Central","West
        US","West US 3","East Asia"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"grafana","locations":["South
        Central US","West Central US","West Europe","East US","East US 2","North Europe","UK
        South","Australia East","Sweden Central","West US 3","East Asia","East US
        2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"SystemAssignedResourceIdentity,
        SupportsTags, SupportsLocation"},{"resourceType":"operations","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"grafana/privateEndpointConnections","locations":["South
        Central US","West Central US","West Europe","North Europe","UK South","East
        US","East US 2","Australia East","Sweden Central","West US 3","East Asia","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview"],"capabilities":"None"},{"resourceType":"grafana/privateLinkResources","locations":["South
        Central US","West Central US","West Europe","North Europe","UK South","East
        US","East US 2","Australia East","Sweden Central","West US 3","East Asia","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview"],"capabilities":"None"},{"resourceType":"locations/checkNameAvailability","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"grafana/managedPrivateEndpoints","locations":["East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SupportsTags, SupportsLocation"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2807'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_supported_rp_locations
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Monitor?api-version=2022-01-01
  response:
    body:
      string: '{"namespace":"Microsoft.Monitor","resourceTypes":[{"resourceType":"accounts","locations":["East
        US 2 EUAP","Central US EUAP","North Central US","East US","Australia Central","Australia
        Southeast","Brazil South","Canada Central","Central India","Central US","East
        Asia","East US 2","North Europe","Norway East","South Africa North","South
        Central US","Southeast Asia","UAE North","UK South","West Central US","West
        Europe","West US","West US 2"],"apiVersions":["2023-04-01","2021-06-01-preview"],"capabilities":"SupportsTags,
        SupportsLocation"},{"resourceType":"operations","locations":["East US 2 EUAP","Central
        US EUAP","North Central US","East US","Australia Central","Australia Southeast","Brazil
        South","Canada Central","Central India","Central US","East Asia","East US
        2","North Europe","Norway East","South Africa North","South Central US","Southeast
        Asia","UAE North","UK South","West Central US","West Europe","West US","West
        US 2"],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"defaultApiVersion":"2021-06-01-preview","capabilities":"None"},{"resourceType":"locations","locations":[],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationResults","locations":["East
        US 2 EUAP","Central US EUAP","North Central US","East US","Australia Central","Australia
        Southeast","Brazil South","Canada Central","Central India","Central US","East
        Asia","East US 2","North Europe","Norway East","South Africa North","South
        Central US","Southeast Asia","UAE North","UK South","West Central US","West
        Europe","West US","West US 2"],"apiVersions":["2023-04-01","2021-06-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationStatuses","locations":["East
        US 2 EUAP","Central US EUAP","North Central US","East US","Australia Central","Australia
        Southeast","Brazil South","Canada Central","Central India","Central US","East
        Asia","East US 2","North Europe","Norway East","South Africa North","South
        Central US","Southeast Asia","UAE North","UK South","West Central US","West
        Europe","West US","West US 2"],"apiVersions":["2023-04-01","2021-06-01-preview"],"capabilities":"None"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/DefaultResourceGroup-westus2?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:17:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2?api-version=2023-04-03
  response:
    body:
      string: '{"properties":{"accountId":"ec050f19-1529-4ec2-9d0c-e6677ca07ac8","metrics":{"prometheusQueryEndpoint":"https://defaultazuremonitorworkspace-westus2-9jg3.westus2.prometheus.monitor.azure.com","internalId":"mac_ec050f19-1529-4ec2-9d0c-e6677ca07ac8"},"provisioningState":"Succeeded","defaultIngestionSettings":{"dataCollectionRuleResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MA_defaultazuremonitorworkspace-westus2_westus2_managed/providers/Microsoft.Insights/dataCollectionRules/defaultazuremonitorworkspace-westus2","dataCollectionEndpointResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MA_defaultazuremonitorworkspace-westus2_westus2_managed/providers/Microsoft.Insights/dataCollectionEndpoints/defaultazuremonitorworkspace-westus2"},"publicNetworkAccess":"Enabled"},"location":"westus2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-westus2/providers/microsoft.monitor/accounts/defaultazuremonitorworkspace-westus2","name":"DefaultAzureMonitorWorkspace-westus2","type":"Microsoft.Monitor/accounts","etag":"\"3d030879-0000-0800-0000-6452ca160000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-03T20:54:27.8807957Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-03T20:54:27.8807957Z"}}'
    headers:
      api-supported-versions:
      - 2021-06-01-preview, 2021-06-03-preview, 2023-04-01, 2023-04-03
      cache-control:
      - no-cache
      content-length:
      - '1443'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:74683e7d-3ee8-4856-bfe7-e63c83b6737e
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "MSProm-westus2-cliakstest000002", "location": "westus2", "kind":
      "Linux", "properties": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '101'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.create_dce
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"immutableId":"dce-dbc6505b5de04d2fbe162b35dec588a2","configurationAccess":{"endpoint":"https://msprom-westus2-cliakstest000002-sdy0.westus2-1.handler.control.monitor.azure.com"},"logsIngestion":{"endpoint":"https://msprom-westus2-cliakstest000002-sdy0.westus2-1.ingest.monitor.azure.com"},"metricsIngestion":{"endpoint":"https://msprom-westus2-cliakstest000002-sdy0.westus2-1.metrics.ingest.monitor.azure.com"},"networkAcls":{"publicNetworkAccess":"Enabled"},"provisioningState":"Succeeded"},"location":"westus2","kind":"Linux","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002","name":"MSProm-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionEndpoints","etag":"\"4e08a563-0000-0800-0000-645e12330000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:21.7263493Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:21.7263493Z"}}'
    headers:
      api-supported-versions:
      - 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1138'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '59'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "kind": "Linux", "properties": {"dataCollectionEndpointId":
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002",
      "dataSources": {"prometheusForwarder": [{"name": "PrometheusDataSource", "streams":
      ["Microsoft-PrometheusMetrics"], "labelIncludeFilter": {}}]}, "dataFlows": [{"destinations":
      ["MonitoringAccount1"], "streams": ["Microsoft-PrometheusMetrics"]}], "description":
      "DCR description", "destinations": {"monitoringAccounts": [{"accountResourceId":
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2",
      "name": "MonitoringAccount1"}]}}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '802'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.create_dcr
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"description":"DCR description","immutableId":"dcr-47f9c942a60a4808984936e13fba633e","dataCollectionEndpointId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002","dataSources":{"prometheusForwarder":[{"streams":["Microsoft-PrometheusMetrics"],"labelIncludeFilter":{},"name":"PrometheusDataSource"}]},"destinations":{"monitoringAccounts":[{"accountResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2","accountId":"ec050f19-1529-4ec2-9d0c-e6677ca07ac8","name":"MonitoringAccount1"}]},"dataFlows":[{"streams":["Microsoft-PrometheusMetrics"],"destinations":["MonitoringAccount1"]}],"provisioningState":"Succeeded"},"location":"westus2","kind":"Linux","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002","name":"MSProm-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionRules","etag":"\"4e08b564-0000-0800-0000-645e12360000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:25.8820682Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:25.8820682Z"}}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1497'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '149'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"dataCollectionRuleId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002",
      "description": "Promtheus data collection association between DCR, DCE and target
      AKS resource"}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '325'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.create_dcra
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations/ContainerInsightsMetricsExtension-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"description":"Promtheus data collection association
        between DCR, DCE and target AKS resource","dataCollectionRuleId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations/ContainerInsightsMetricsExtension-westus2-cliakstest000002","name":"ContainerInsightsMetricsExtension-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionRuleAssociations","etag":"\"4e086465-0000-0800-0000-645e12390000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:28.5135106Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:28.5135106Z"}}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1030'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_recording_rules_template
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations?api-version=2023-01-01-preview
  response:
    body:
      string: "{\r\n  \"value\": [\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/NodeRecordingRulesRuleGroup\",\r\n
        \     \"name\": \"NodeRecordingRulesRuleGroup\",\r\n      \"type\": \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n
        \     \"location\": \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n        \"displayInformation\":
        {\r\n          \"AlertRuleNamePrefix\": \"NodeRecordingRulesRuleGroup\",\r\n
        \         \"RuleTitle\": \"This would be the info message for prom recording
        rules\"\r\n        },\r\n        \"rulesArmTemplate\": {\r\n          \"$schema\":
        \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"NodeRecordingRulesRuleGroup\",\r\n              \"minLength\": 1,\r\n              \"metadata\":
        {\r\n                \"description\": \"prefix of the alert rule name\"\r\n
        \             }\r\n            },\r\n            \"alertName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"[concat(parameters('alertNamePrefix'),
        ' - ', parameters('clusterNameForPrometheus'))]\",\r\n              \"minLength\":
        1,\r\n              \"metadata\": {\r\n                \"description\": \"Name
        of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Node Recording Rules RuleGroup\",\r\n                \"scopes\": \"[variables('scopes')]\",\r\n
        \               \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"instance:node_num_cpu:sum\",\r\n
        \                   \"expression\": \"count without (cpu, mode) (  node_cpu_seconds_total{job=\\\"node\\\",mode=\\\"idle\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance:node_cpu_utilisation:rate5m\",\r\n                    \"expression\":
        \"1 - avg without (cpu) (  sum without (mode) (rate(node_cpu_seconds_total{job=\\\"node\\\",
        mode=~\\\"idle|iowait|steal\\\"}[5m])))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_load1_per_cpu:ratio\",\r\n
        \                   \"expression\": \"(  node_load1{job=\\\"node\\\"}/  instance:node_num_cpu:sum{job=\\\"node\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance:node_memory_utilisation:ratio\",\r\n                    \"expression\":
        \"1 - (  (    node_memory_MemAvailable_bytes{job=\\\"node\\\"}    or    (
        \     node_memory_Buffers_bytes{job=\\\"node\\\"}      +      node_memory_Cached_bytes{job=\\\"node\\\"}
        \     +      node_memory_MemFree_bytes{job=\\\"node\\\"}      +      node_memory_Slab_bytes{job=\\\"node\\\"}
        \   )  )/  node_memory_MemTotal_bytes{job=\\\"node\\\"})\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"instance:node_vmstat_pgmajfault:rate5m\",\r\n
        \                   \"expression\": \"rate(node_vmstat_pgmajfault{job=\\\"node\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance_device:node_disk_io_time_seconds:rate5m\",\r\n                    \"expression\":
        \"rate(node_disk_io_time_seconds_total{job=\\\"node\\\", device!=\\\"\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance_device:node_disk_io_time_weighted_seconds:rate5m\",\r\n                    \"expression\":
        \"rate(node_disk_io_time_weighted_seconds_total{job=\\\"node\\\", device!=\\\"\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance:node_network_receive_bytes_excluding_lo:rate5m\",\r\n                    \"expression\":
        \"sum without (device) (  rate(node_network_receive_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_network_transmit_bytes_excluding_lo:rate5m\",\r\n
        \                   \"expression\": \"sum without (device) (  rate(node_network_transmit_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_network_receive_drop_excluding_lo:rate5m\",\r\n
        \                   \"expression\": \"sum without (device) (  rate(node_network_receive_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_network_transmit_drop_excluding_lo:rate5m\",\r\n
        \                   \"expression\": \"sum without (device) (  rate(node_network_transmit_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  }\r\n                ]\r\n
        \             }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n
        \   },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/KubernetesRecordingRulesRuleGroup\",\r\n
        \     \"name\": \"KubernetesRecordingRulesRuleGroup\",\r\n      \"type\":
        \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n      \"location\":
        \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \       \"displayInformation\": {\r\n          \"AlertRuleNamePrefix\": \"KubernetesRecordingRulesRuleGroup\",\r\n
        \         \"RuleTitle\": \"This would be the info message for prom recording
        rules\"\r\n        },\r\n        \"rulesArmTemplate\": {\r\n          \"$schema\":
        \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"KubernetesRecordingRulesRuleGroup\",\r\n              \"minLength\": 1,\r\n
        \             \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Kubernetes Recording Rules RuleGroup\",\r\n                \"scopes\": \"[variables('scopes')]\",\r\n
        \               \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate\",\r\n
        \                   \"expression\": \"sum by (cluster, namespace, pod, container)
        (  irate(container_cpu_usage_seconds_total{job=\\\"cadvisor\\\", image!=\\\"\\\"}[5m]))
        * on (cluster, namespace, pod) group_left(node) topk by (cluster, namespace,
        pod) (  1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node_namespace_pod_container:container_memory_working_set_bytes\",\r\n                    \"expression\":
        \"container_memory_working_set_bytes{job=\\\"cadvisor\\\", image!=\\\"\\\"}*
        on (namespace, pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace,
        pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"node_namespace_pod_container:container_memory_rss\",\r\n
        \                   \"expression\": \"container_memory_rss{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}* on (namespace, pod) group_left(node) topk by(namespace,
        pod) (1,  max by(namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node_namespace_pod_container:container_memory_cache\",\r\n                    \"expression\":
        \"container_memory_cache{job=\\\"cadvisor\\\", image!=\\\"\\\"}* on (namespace,
        pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod,
        node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"node_namespace_pod_container:container_memory_swap\",\r\n
        \                   \"expression\": \"container_memory_swap{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}* on (namespace, pod) group_left(node) topk by(namespace,
        pod) (1,  max by(namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_memory:active:kube_pod_container_resource_requests\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_memory:kube_pod_container_resource_requests:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_cpu:kube_pod_container_resource_requests:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_memory:active:kube_pod_container_resource_limits\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_memory:kube_pod_container_resource_limits:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        ( (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1) )\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_cpu:kube_pod_container_resource_limits:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n                    \"expression\":
        \"max by (cluster, namespace, workload, pod) (  label_replace(    label_replace(
        \     kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"ReplicaSet\\\"},
        \     \\\"replicaset\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"    )
        * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace)
        (      1, max by (replicaset, namespace, owner_name) (        kube_replicaset_owner{job=\\\"kube-state-metrics\\\"}
        \     )    ),    \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"
        \ ))\",\r\n                    \"labels\": {\r\n                      \"workload_type\":
        \"deployment\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \                   \"expression\": \"max by (cluster, namespace, workload,
        pod) (  label_replace(    kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"DaemonSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \                   \"labels\": {\r\n                      \"workload_type\":
        \"daemonset\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \                   \"expression\": \"max by (cluster, namespace, workload,
        pod) (  label_replace(    kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"StatefulSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \                   \"labels\": {\r\n                      \"workload_type\":
        \"statefulset\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \                   \"expression\": \"max by (cluster, namespace, workload,
        pod) (  label_replace(    kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"Job\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \                   \"labels\": {\r\n                      \"workload_type\":
        \"job\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \":node_memory_MemAvailable_bytes:sum\",\r\n
        \                   \"expression\": \"sum(  node_memory_MemAvailable_bytes{job=\\\"node\\\"}
        or  (    node_memory_Buffers_bytes{job=\\\"node\\\"} +    node_memory_Cached_bytes{job=\\\"node\\\"}
        +    node_memory_MemFree_bytes{job=\\\"node\\\"} +    node_memory_Slab_bytes{job=\\\"node\\\"}
        \ )) by (cluster)\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:node_cpu:ratio_rate5m\",\r\n                    \"expression\":
        \"sum(rate(node_cpu_seconds_total{job=\\\"node\\\",mode!=\\\"idle\\\",mode!=\\\"iowait\\\",mode!=\\\"steal\\\"}[5m]))
        by (cluster) /count(sum(node_cpu_seconds_total{job=\\\"node\\\"}) by (cluster,
        instance, cpu)) by (cluster)\"\r\n                  }\r\n                ]\r\n
        \             }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n
        \   },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/NodeRecordingRulesRuleGroup-Win\",\r\n
        \     \"name\": \"NodeRecordingRulesRuleGroup-Win\",\r\n      \"type\": \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n
        \     \"location\": \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n        \"displayInformation\":
        {\r\n          \"AlertRuleNamePrefix\": \"NodeRecordingRulesRuleGroup-Win\",\r\n
        \         \"RuleTitle\": \"Windows Recording Rules\"\r\n        },\r\n        \"rulesArmTemplate\":
        {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"NodeRecordingRulesRuleGroup-Win\",\r\n              \"minLength\": 1,\r\n
        \             \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Node Recording Rules RuleGroup for Windows\",\r\n                \"scopes\":
        \"[variables('scopes')]\",\r\n                \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"node:windows_node:sum\",\r\n
        \                   \"expression\": \"count (windows_system_system_up_time{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_num_cpu:sum\",\r\n                    \"expression\":
        \"count by (instance) (sum by (instance, core) (windows_cpu_time_total{job=\\\"windows-exporter\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_cpu_utilisation:avg5m\",\r\n                    \"expression\":
        \"1 - avg(rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_cpu_utilisation:avg5m\",\r\n                    \"expression\":
        \"1 - avg by (instance) (rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_memory_utilisation:\",\r\n                    \"expression\":
        \"1 -sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"})/sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_memory_MemFreeCached_bytes:sum\",\r\n                    \"expression\":
        \"sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"} + windows_memory_cache_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_totalCached_bytes:sum\",\r\n                    \"expression\":
        \"(windows_memory_cache_bytes{job=\\\"windows-exporter\\\"} + windows_memory_modified_page_list_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_standby_cache_core_bytes{job=\\\"windows-exporter\\\"} +
        windows_memory_standby_cache_normal_priority_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_standby_cache_reserve_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_memory_MemTotal_bytes:sum\",\r\n                    \"expression\":
        \"sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_bytes_available:sum\",\r\n                    \"expression\":
        \"sum by (instance) ((windows_memory_available_bytes{job=\\\"windows-exporter\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_bytes_total:sum\",\r\n                    \"expression\":
        \"sum by (instance) (windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_utilisation:ratio\",\r\n                    \"expression\":
        \"(node:windows_node_memory_bytes_total:sum - node:windows_node_memory_bytes_available:sum)
        / scalar(sum(node:windows_node_memory_bytes_total:sum))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"node:windows_node_memory_utilisation:\",\r\n
        \                   \"expression\": \"1 - (node:windows_node_memory_bytes_available:sum
        / node:windows_node_memory_bytes_total:sum)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"node:windows_node_memory_swap_io_pages:irate\",\r\n
        \                   \"expression\": \"irate(windows_memory_swap_page_operations_total{job=\\\"windows-exporter\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_disk_utilisation:avg_irate\",\r\n                    \"expression\":
        \"avg(irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_disk_utilisation:avg_irate\",\r\n                    \"expression\":
        \"avg by (instance) ((irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \                 }\r\n                ]\r\n              }\r\n            }\r\n
        \         ]\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n
        \     \"name\": \"NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n      \"type\":
        \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n      \"location\":
        \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \       \"displayInformation\": {\r\n          \"AlertRuleNamePrefix\": \"NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n
        \         \"RuleTitle\": \"Windows Recording Rules\"\r\n        },\r\n        \"rulesArmTemplate\":
        {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n              \"minLength\":
        1,\r\n              \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Node and Kubernetes Recording Rules RuleGroup for Windows\",\r\n                \"scopes\":
        \"[variables('scopes')]\",\r\n                \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"node:windows_node_filesystem_usage:\",\r\n
        \                   \"expression\": \"max by (instance,volume)((windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"}
        - windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}) / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_filesystem_avail:\",\r\n                    \"expression\":
        \"max by (instance, volume) (windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}
        / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \":windows_node_net_utilisation:sum_irate\",\r\n
        \                   \"expression\": \"sum(irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_net_utilisation:sum_irate\",\r\n                    \"expression\":
        \"sum by (instance) ((irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_net_saturation:sum_irate\",\r\n                    \"expression\":
        \"sum(irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m]))
        + sum(irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_net_saturation:sum_irate\",\r\n                    \"expression\":
        \"sum by (instance) ((irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"windows_pod_container_available\",\r\n                    \"expression\":
        \"windows_container_available{job=\\\"windows-exporter\\\"} * on(container_id)
        group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_total_runtime\",\r\n
        \                   \"expression\": \"windows_container_cpu_usage_seconds_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_memory_usage\",\r\n
        \                   \"expression\": \"windows_container_memory_usage_commit_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_private_working_set_usage\",\r\n
        \                   \"expression\": \"windows_container_memory_usage_private_working_set_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_network_received_bytes_total\",\r\n
        \                   \"expression\": \"windows_container_network_receive_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_network_transmitted_bytes_total\",\r\n
        \                   \"expression\": \"windows_container_network_transmit_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_memory_request\",\r\n
        \                   \"expression\": \"max by (namespace, pod, container) (kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_memory_limit\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_cpu_cores_request\",\r\n
        \                   \"expression\": \"max by (namespace, pod, container) (
        kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_cpu_cores_limit\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_pod_container:windows_container_cpu_usage_seconds_total:sum_rate\",\r\n
        \                   \"expression\": \"sum by (namespace, pod, container) (rate(windows_container_total_runtime{}[5m]))\"\r\n
        \                 }\r\n                ]\r\n              }\r\n            }\r\n
        \         ]\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/KubernetesAlert-DefaultAlerts\",\r\n
        \     \"name\": \"KubernetesAlert-DefaultAlerts\",\r\n      \"type\": \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n
        \     \"location\": \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n        \"displayInformation\":
        {\r\n          \"AlertRuleNamePrefix\": \"KubernetesAlert-DefaultAlerts\",\r\n
        \         \"RuleTitle\": \"This would be the info message for prom\"\r\n        },\r\n
        \       \"rulesArmTemplate\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"KubernetesAlert-DefaultAlerts\",\r\n              \"minLength\": 1,\r\n
        \             \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Kubernetes Alert RuleGroup-DefaultAlerts\",\r\n                \"scopes\":
        \"[variables('scopes')]\",\r\n                \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"alert\": \"KubePodCrashLooping\",\r\n
        \                   \"expression\": \"max_over_time(kube_pod_container_status_waiting_reason{reason=\\\"CrashLoopBackOff\\\",
        job=\\\"kube-state-metrics\\\"}[5m]) >= 1\",\r\n                    \"for\":
        \"PT15M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubePodNotReady\",\r\n                    \"expression\": \"sum by (namespace,
        pod, cluster) (  max by(namespace, pod, cluster) (    kube_pod_status_phase{job=\\\"kube-state-metrics\\\",
        phase=~\\\"Pending|Unknown\\\"}  ) * on(namespace, pod, cluster) group_left(owner_kind)
        topk by(namespace, pod, cluster) (    1, max by(namespace, pod, owner_kind,
        cluster) (kube_pod_owner{owner_kind!=\\\"Job\\\"})  )) > 0\",\r\n                    \"for\":
        \"PT15M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeDeploymentReplicasMismatch\",\r\n                    \"expression\":
        \"(  kube_deployment_spec_replicas{job=\\\"kube-state-metrics\\\"}    >  kube_deployment_status_replicas_available{job=\\\"kube-state-metrics\\\"})
        and (  changes(kube_deployment_status_replicas_updated{job=\\\"kube-state-metrics\\\"}[10m])
        \   ==  0)\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeStatefulSetReplicasMismatch\",\r\n                    \"expression\":
        \"(  kube_statefulset_status_replicas_ready{job=\\\"kube-state-metrics\\\"}
        \   !=  kube_statefulset_status_replicas{job=\\\"kube-state-metrics\\\"})
        and (  changes(kube_statefulset_status_replicas_updated{job=\\\"kube-state-metrics\\\"}[10m])
        \   ==  0)\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeJobNotCompleted\",\r\n                    \"expression\": \"time() -
        max by(namespace, job_name, cluster) (kube_job_status_start_time{job=\\\"kube-state-metrics\\\"}
        \ and kube_job_status_active{job=\\\"kube-state-metrics\\\"} > 0) > 43200\",\r\n
        \                   \"labels\": {\r\n                      \"severity\": \"warning\"\r\n
        \                   },\r\n                    \"Severity\": 3,\r\n                    \"actions\":
        \"[variables('actionsForPrometheusRuleGroups')]\"\r\n                  },\r\n
        \                 {\r\n                    \"alert\": \"KubeJobFailed\",\r\n
        \                   \"expression\": \"kube_job_failed{job=\\\"kube-state-metrics\\\"}
        \ > 0\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeHpaReplicasMismatch\",\r\n                    \"expression\": \"(kube_horizontalpodautoscaler_status_desired_replicas{job=\\\"kube-state-metrics\\\"}
        \ !=kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"})
        \ and(kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}
        \ >kube_horizontalpodautoscaler_spec_min_replicas{job=\\\"kube-state-metrics\\\"})
        \ and(kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}
        \ <kube_horizontalpodautoscaler_spec_max_replicas{job=\\\"kube-state-metrics\\\"})
        \ and changes(kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}[15m])
        == 0\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeHpaMaxedOut\",\r\n                    \"expression\": \"kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}
        \ ==kube_horizontalpodautoscaler_spec_max_replicas{job=\\\"kube-state-metrics\\\"}\",\r\n
        \                   \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeCPUQuotaOvercommit\",\r\n                    \"expression\": \"sum(min
        without(resource) (kube_resourcequota{job=\\\"kube-state-metrics\\\", type=\\\"hard\\\",
        resource=~\\\"(cpu|requests.cpu)\\\"}))  /sum(kube_node_status_allocatable{resource=\\\"cpu\\\",
        job=\\\"kube-state-metrics\\\"})  > 1.5\",\r\n                    \"for\":
        \"PT5M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeMemoryQuotaOvercommit\",\r\n                    \"expression\": \"sum(min
        without(resource) (kube_resourcequota{job=\\\"kube-state-metrics\\\", type=\\\"hard\\\",
        resource=~\\\"(memory|requests.memory)\\\"}))  /sum(kube_node_status_allocatable{resource=\\\"memory\\\",
        job=\\\"kube-state-metrics\\\"})  > 1.5\",\r\n                    \"for\":
        \"PT5M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeQuotaAlmostFull\",\r\n                    \"expression\": \"kube_resourcequota{job=\\\"kube-state-metrics\\\",
        type=\\\"used\\\"}  / ignoring(instance, job, type)(kube_resourcequota{job=\\\"kube-state-metrics\\\",
        type=\\\"hard\\\"} > 0)  > 0.9 < 1\",\r\n                    \"for\": \"PT15M\",\r\n
        \                   \"labels\": {\r\n                      \"severity\": \"warning\"\r\n
        \                   },\r\n                    \"Severity\": 3,\r\n                    \"actions\":
        \"[variables('actionsForPrometheusRuleGroups')]\"\r\n                  },\r\n
        \                 {\r\n                    \"alert\": \"KubeVersionMismatch\",\r\n
        \                   \"expression\": \"count by (cluster) (count by (git_version,
        cluster) (label_replace(kubernetes_build_info{job!~\\\"kube-dns|coredns\\\"},\\\"git_version\\\",\\\"$1\\\",\\\"git_version\\\",\\\"(v[0-9]*.[0-9]*).*\\\")))
        > 1\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeNodeNotReady\",\r\n                    \"expression\": \"kube_node_status_condition{job=\\\"kube-state-metrics\\\",condition=\\\"Ready\\\",status=\\\"true\\\"}
        == 0\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeNodeUnreachable\",\r\n                    \"expression\": \"(kube_node_spec_taint{job=\\\"kube-state-metrics\\\",key=\\\"node.kubernetes.io/unreachable\\\",effect=\\\"NoSchedule\\\"}
        unless ignoring(key,value) kube_node_spec_taint{job=\\\"kube-state-metrics\\\",key=~\\\"ToBeDeletedByClusterAutoscaler|cloud.google.com/impending-node-termination|aws-node-termination-handler/spot-itn\\\"})
        == 1\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeletTooManyPods\",\r\n                    \"expression\": \"count by(cluster,
        node) (  (kube_pod_status_phase{job=\\\"kube-state-metrics\\\",phase=\\\"Running\\\"}
        == 1) * on(instance,pod,namespace,cluster) group_left(node) topk by(instance,pod,namespace,cluster)
        (1, kube_pod_info{job=\\\"kube-state-metrics\\\"}))/max by(cluster, node)
        (  kube_node_status_capacity{job=\\\"kube-state-metrics\\\",resource=\\\"pods\\\"}
        != 1) > 0.95\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeNodeReadinessFlapping\",\r\n                    \"expression\": \"sum(changes(kube_node_status_condition{status=\\\"true\\\",condition=\\\"Ready\\\"}[15m]))
        by (cluster, node) > 2\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 }\r\n                ]\r\n              }\r\n            }\r\n
        \         ]\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}"
    headers:
      api-supported-versions:
      - 2023-01-01-preview
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '49079'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002",
      "name": "NodeRecordingRulesRuleGroup-cliakstest000002", "type": "Microsoft.AlertsManagement/prometheusRuleGroups",
      "location": "westus2", "properties": {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "instance:node_num_cpu:sum", "expression": "count without (cpu,
      mode) (  node_cpu_seconds_total{job=\"node\",mode=\"idle\"})"}, {"record": "instance:node_cpu_utilisation:rate5m",
      "expression": "1 - avg without (cpu) (  sum without (mode) (rate(node_cpu_seconds_total{job=\"node\",
      mode=~\"idle|iowait|steal\"}[5m])))"}, {"record": "instance:node_load1_per_cpu:ratio",
      "expression": "(  node_load1{job=\"node\"}/  instance:node_num_cpu:sum{job=\"node\"})"},
      {"record": "instance:node_memory_utilisation:ratio", "expression": "1 - (  (    node_memory_MemAvailable_bytes{job=\"node\"}    or    (      node_memory_Buffers_bytes{job=\"node\"}      +      node_memory_Cached_bytes{job=\"node\"}      +      node_memory_MemFree_bytes{job=\"node\"}      +      node_memory_Slab_bytes{job=\"node\"}    )  )/  node_memory_MemTotal_bytes{job=\"node\"})"},
      {"record": "instance:node_vmstat_pgmajfault:rate5m", "expression": "rate(node_vmstat_pgmajfault{job=\"node\"}[5m])"},
      {"record": "instance_device:node_disk_io_time_seconds:rate5m", "expression":
      "rate(node_disk_io_time_seconds_total{job=\"node\", device!=\"\"}[5m])"}, {"record":
      "instance_device:node_disk_io_time_weighted_seconds:rate5m", "expression": "rate(node_disk_io_time_weighted_seconds_total{job=\"node\",
      device!=\"\"}[5m])"}, {"record": "instance:node_network_receive_bytes_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_receive_bytes_total{job=\"node\",
      device!=\"lo\"}[5m]))"}, {"record": "instance:node_network_transmit_bytes_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_transmit_bytes_total{job=\"node\",
      device!=\"lo\"}[5m]))"}, {"record": "instance:node_network_receive_drop_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_receive_drop_total{job=\"node\",
      device!=\"lo\"}[5m]))"}, {"record": "instance:node_network_transmit_drop_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_transmit_drop_total{job=\"node\",
      device!=\"lo\"}[5m]))"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '2653'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.NodeRecordingRulesRuleGroup-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002\",\r\n
        \ \"name\": \"NodeRecordingRulesRuleGroup-cliakstest000002\",\r\n  \"type\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\": \"cliakstest000002\",\r\n
        \   \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"instance:node_num_cpu:sum\",\r\n
        \       \"expression\": \"count without (cpu, mode) (  node_cpu_seconds_total{job=\\\"node\\\",mode=\\\"idle\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"instance:node_cpu_utilisation:rate5m\",\r\n
        \       \"expression\": \"1 - avg without (cpu) (  sum without (mode) (rate(node_cpu_seconds_total{job=\\\"node\\\",
        mode=~\\\"idle|iowait|steal\\\"}[5m])))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_load1_per_cpu:ratio\",\r\n        \"expression\": \"(  node_load1{job=\\\"node\\\"}/
        \ instance:node_num_cpu:sum{job=\\\"node\\\"})\"\r\n      },\r\n      {\r\n
        \       \"record\": \"instance:node_memory_utilisation:ratio\",\r\n        \"expression\":
        \"1 - (  (    node_memory_MemAvailable_bytes{job=\\\"node\\\"}    or    (
        \     node_memory_Buffers_bytes{job=\\\"node\\\"}      +      node_memory_Cached_bytes{job=\\\"node\\\"}
        \     +      node_memory_MemFree_bytes{job=\\\"node\\\"}      +      node_memory_Slab_bytes{job=\\\"node\\\"}
        \   )  )/  node_memory_MemTotal_bytes{job=\\\"node\\\"})\"\r\n      },\r\n
        \     {\r\n        \"record\": \"instance:node_vmstat_pgmajfault:rate5m\",\r\n
        \       \"expression\": \"rate(node_vmstat_pgmajfault{job=\\\"node\\\"}[5m])\"\r\n
        \     },\r\n      {\r\n        \"record\": \"instance_device:node_disk_io_time_seconds:rate5m\",\r\n
        \       \"expression\": \"rate(node_disk_io_time_seconds_total{job=\\\"node\\\",
        device!=\\\"\\\"}[5m])\"\r\n      },\r\n      {\r\n        \"record\": \"instance_device:node_disk_io_time_weighted_seconds:rate5m\",\r\n
        \       \"expression\": \"rate(node_disk_io_time_weighted_seconds_total{job=\\\"node\\\",
        device!=\\\"\\\"}[5m])\"\r\n      },\r\n      {\r\n        \"record\": \"instance:node_network_receive_bytes_excluding_lo:rate5m\",\r\n
        \       \"expression\": \"sum without (device) (  rate(node_network_receive_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_network_transmit_bytes_excluding_lo:rate5m\",\r\n        \"expression\":
        \"sum without (device) (  rate(node_network_transmit_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_network_receive_drop_excluding_lo:rate5m\",\r\n        \"expression\":
        \"sum without (device) (  rate(node_network_receive_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_network_transmit_drop_excluding_lo:rate5m\",\r\n        \"expression\":
        \"sum without (device) (  rate(node_network_transmit_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n
        \ }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '3096'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002",
      "name": "KubernetesRecordingRulesRuleGroup-cliakstest000002", "type": "Microsoft.AlertsManagement/prometheusRuleGroups",
      "location": "westus2", "properties": {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate",
      "expression": "sum by (cluster, namespace, pod, container) (  irate(container_cpu_usage_seconds_total{job=\"cadvisor\",
      image!=\"\"}[5m])) * on (cluster, namespace, pod) group_left(node) topk by (cluster,
      namespace, pod) (  1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=\"\"}))"},
      {"record": "node_namespace_pod_container:container_memory_working_set_bytes",
      "expression": "container_memory_working_set_bytes{job=\"cadvisor\", image!=\"\"}*
      on (namespace, pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace,
      pod, node) (kube_pod_info{node!=\"\"}))"}, {"record": "node_namespace_pod_container:container_memory_rss",
      "expression": "container_memory_rss{job=\"cadvisor\", image!=\"\"}* on (namespace,
      pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod, node)
      (kube_pod_info{node!=\"\"}))"}, {"record": "node_namespace_pod_container:container_memory_cache",
      "expression": "container_memory_cache{job=\"cadvisor\", image!=\"\"}* on (namespace,
      pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod, node)
      (kube_pod_info{node!=\"\"}))"}, {"record": "node_namespace_pod_container:container_memory_swap",
      "expression": "container_memory_swap{job=\"cadvisor\", image!=\"\"}* on (namespace,
      pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod, node)
      (kube_pod_info{node!=\"\"}))"}, {"record": "cluster:namespace:pod_memory:active:kube_pod_container_resource_requests",
      "expression": "kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (  (kube_pod_status_phase{phase=~\"Pending|Running\"}
      == 1))"}, {"record": "namespace_memory:kube_pod_container_resource_requests:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests",
      "expression": "kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (  (kube_pod_status_phase{phase=~\"Pending|Running\"}
      == 1))"}, {"record": "namespace_cpu:kube_pod_container_resource_requests:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "cluster:namespace:pod_memory:active:kube_pod_container_resource_limits",
      "expression": "kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (  (kube_pod_status_phase{phase=~\"Pending|Running\"}
      == 1))"}, {"record": "namespace_memory:kube_pod_container_resource_limits:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits",
      "expression": "kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (
      (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1) )"}, {"record": "namespace_cpu:kube_pod_container_resource_limits:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "namespace_workload_pod:kube_pod_owner:relabel", "expression": "max
      by (cluster, namespace, workload, pod) (  label_replace(    label_replace(      kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"ReplicaSet\"},      \"replicaset\", \"$1\", \"owner_name\", \"(.*)\"    )
      * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace)
      (      1, max by (replicaset, namespace, owner_name) (        kube_replicaset_owner{job=\"kube-state-metrics\"}      )    ),    \"workload\",
      \"$1\", \"owner_name\", \"(.*)\"  ))", "labels": {"workload_type": "deployment"}},
      {"record": "namespace_workload_pod:kube_pod_owner:relabel", "expression": "max
      by (cluster, namespace, workload, pod) (  label_replace(    kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"DaemonSet\"},    \"workload\", \"$1\", \"owner_name\", \"(.*)\"  ))",
      "labels": {"workload_type": "daemonset"}}, {"record": "namespace_workload_pod:kube_pod_owner:relabel",
      "expression": "max by (cluster, namespace, workload, pod) (  label_replace(    kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"StatefulSet\"},    \"workload\", \"$1\", \"owner_name\", \"(.*)\"  ))",
      "labels": {"workload_type": "statefulset"}}, {"record": "namespace_workload_pod:kube_pod_owner:relabel",
      "expression": "max by (cluster, namespace, workload, pod) (  label_replace(    kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"Job\"},    \"workload\", \"$1\", \"owner_name\", \"(.*)\"  ))",
      "labels": {"workload_type": "job"}}, {"record": ":node_memory_MemAvailable_bytes:sum",
      "expression": "sum(  node_memory_MemAvailable_bytes{job=\"node\"} or  (    node_memory_Buffers_bytes{job=\"node\"}
      +    node_memory_Cached_bytes{job=\"node\"} +    node_memory_MemFree_bytes{job=\"node\"}
      +    node_memory_Slab_bytes{job=\"node\"}  )) by (cluster)"}, {"record": "cluster:node_cpu:ratio_rate5m",
      "expression": "sum(rate(node_cpu_seconds_total{job=\"node\",mode!=\"idle\",mode!=\"iowait\",mode!=\"steal\"}[5m]))
      by (cluster) /count(sum(node_cpu_seconds_total{job=\"node\"}) by (cluster, instance,
      cpu)) by (cluster)"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '7331'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.KubernetesRecordingRulesRuleGroup-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002\",\r\n
        \ \"name\": \"KubernetesRecordingRulesRuleGroup-cliakstest000002\",\r\n  \"type\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\": \"cliakstest000002\",\r\n
        \   \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate\",\r\n
        \       \"expression\": \"sum by (cluster, namespace, pod, container) (  irate(container_cpu_usage_seconds_total{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}[5m])) * on (cluster, namespace, pod) group_left(node) topk
        by (cluster, namespace, pod) (  1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node_namespace_pod_container:container_memory_working_set_bytes\",\r\n
        \       \"expression\": \"container_memory_working_set_bytes{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}* on (namespace, pod) group_left(node) topk by(namespace,
        pod) (1,  max by(namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node_namespace_pod_container:container_memory_rss\",\r\n
        \       \"expression\": \"container_memory_rss{job=\\\"cadvisor\\\", image!=\\\"\\\"}*
        on (namespace, pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace,
        pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n      },\r\n      {\r\n        \"record\":
        \"node_namespace_pod_container:container_memory_cache\",\r\n        \"expression\":
        \"container_memory_cache{job=\\\"cadvisor\\\", image!=\\\"\\\"}* on (namespace,
        pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod,
        node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n      },\r\n      {\r\n        \"record\":
        \"node_namespace_pod_container:container_memory_swap\",\r\n        \"expression\":
        \"container_memory_swap{job=\\\"cadvisor\\\", image!=\\\"\\\"}* on (namespace,
        pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod,
        node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n      },\r\n      {\r\n        \"record\":
        \"cluster:namespace:pod_memory:active:kube_pod_container_resource_requests\",\r\n
        \       \"expression\": \"kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_memory:kube_pod_container_resource_requests:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests\",\r\n
        \       \"expression\": \"kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_cpu:kube_pod_container_resource_requests:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:namespace:pod_memory:active:kube_pod_container_resource_limits\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_memory:kube_pod_container_resource_limits:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        ( (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1) )\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_cpu:kube_pod_container_resource_limits:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   label_replace(      kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"ReplicaSet\\\"},
        \     \\\"replicaset\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"    )
        * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace)
        (      1, max by (replicaset, namespace, owner_name) (        kube_replicaset_owner{job=\\\"kube-state-metrics\\\"}
        \     )    ),    \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"
        \ ))\",\r\n        \"labels\": {\r\n          \"workload_type\": \"deployment\"\r\n
        \       }\r\n      },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"DaemonSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \       \"labels\": {\r\n          \"workload_type\": \"daemonset\"\r\n        }\r\n
        \     },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"StatefulSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \       \"labels\": {\r\n          \"workload_type\": \"statefulset\"\r\n
        \       }\r\n      },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"Job\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \       \"labels\": {\r\n          \"workload_type\": \"job\"\r\n        }\r\n
        \     },\r\n      {\r\n        \"record\": \":node_memory_MemAvailable_bytes:sum\",\r\n
        \       \"expression\": \"sum(  node_memory_MemAvailable_bytes{job=\\\"node\\\"}
        or  (    node_memory_Buffers_bytes{job=\\\"node\\\"} +    node_memory_Cached_bytes{job=\\\"node\\\"}
        +    node_memory_MemFree_bytes{job=\\\"node\\\"} +    node_memory_Slab_bytes{job=\\\"node\\\"}
        \ )) by (cluster)\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:node_cpu:ratio_rate5m\",\r\n
        \       \"expression\": \"sum(rate(node_cpu_seconds_total{job=\\\"node\\\",mode!=\\\"idle\\\",mode!=\\\"iowait\\\",mode!=\\\"steal\\\"}[5m]))
        by (cluster) /count(sum(node_cpu_seconds_total{job=\\\"node\\\"}) by (cluster,
        instance, cpu)) by (cluster)\"\r\n      }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n
        \ }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '8170'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002",
      "name": "NodeRecordingRulesRuleGroup-Win-cliakstest000002", "type": "Microsoft.AlertsManagement/prometheusRuleGroups",
      "location": "westus2", "properties": {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "node:windows_node:sum", "expression": "count (windows_system_system_up_time{job=\"windows-exporter\"})"},
      {"record": "node:windows_node_num_cpu:sum", "expression": "count by (instance)
      (sum by (instance, core) (windows_cpu_time_total{job=\"windows-exporter\"}))"},
      {"record": ":windows_node_cpu_utilisation:avg5m", "expression": "1 - avg(rate(windows_cpu_time_total{job=\"windows-exporter\",mode=\"idle\"}[5m]))"},
      {"record": "node:windows_node_cpu_utilisation:avg5m", "expression": "1 - avg
      by (instance) (rate(windows_cpu_time_total{job=\"windows-exporter\",mode=\"idle\"}[5m]))"},
      {"record": ":windows_node_memory_utilisation:", "expression": "1 -sum(windows_memory_available_bytes{job=\"windows-exporter\"})/sum(windows_os_visible_memory_bytes{job=\"windows-exporter\"})"},
      {"record": ":windows_node_memory_MemFreeCached_bytes:sum", "expression": "sum(windows_memory_available_bytes{job=\"windows-exporter\"}
      + windows_memory_cache_bytes{job=\"windows-exporter\"})"}, {"record": "node:windows_node_memory_totalCached_bytes:sum",
      "expression": "(windows_memory_cache_bytes{job=\"windows-exporter\"} + windows_memory_modified_page_list_bytes{job=\"windows-exporter\"}
      + windows_memory_standby_cache_core_bytes{job=\"windows-exporter\"} + windows_memory_standby_cache_normal_priority_bytes{job=\"windows-exporter\"}
      + windows_memory_standby_cache_reserve_bytes{job=\"windows-exporter\"})"}, {"record":
      ":windows_node_memory_MemTotal_bytes:sum", "expression": "sum(windows_os_visible_memory_bytes{job=\"windows-exporter\"})"},
      {"record": "node:windows_node_memory_bytes_available:sum", "expression": "sum
      by (instance) ((windows_memory_available_bytes{job=\"windows-exporter\"}))"},
      {"record": "node:windows_node_memory_bytes_total:sum", "expression": "sum by
      (instance) (windows_os_visible_memory_bytes{job=\"windows-exporter\"})"}, {"record":
      "node:windows_node_memory_utilisation:ratio", "expression": "(node:windows_node_memory_bytes_total:sum
      - node:windows_node_memory_bytes_available:sum) / scalar(sum(node:windows_node_memory_bytes_total:sum))"},
      {"record": "node:windows_node_memory_utilisation:", "expression": "1 - (node:windows_node_memory_bytes_available:sum
      / node:windows_node_memory_bytes_total:sum)"}, {"record": "node:windows_node_memory_swap_io_pages:irate",
      "expression": "irate(windows_memory_swap_page_operations_total{job=\"windows-exporter\"}[5m])"},
      {"record": ":windows_node_disk_utilisation:avg_irate", "expression": "avg(irate(windows_logical_disk_read_seconds_total{job=\"windows-exporter\"}[5m])
      + irate(windows_logical_disk_write_seconds_total{job=\"windows-exporter\"}[5m]))"},
      {"record": "node:windows_node_disk_utilisation:avg_irate", "expression": "avg
      by (instance) ((irate(windows_logical_disk_read_seconds_total{job=\"windows-exporter\"}[5m])
      + irate(windows_logical_disk_write_seconds_total{job=\"windows-exporter\"}[5m])))"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '3501'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.NodeRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n
        \ \"name\": \"NodeRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n  \"type\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\": \"cliakstest000002\",\r\n
        \   \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"node:windows_node:sum\",\r\n
        \       \"expression\": \"count (windows_system_system_up_time{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_num_cpu:sum\",\r\n
        \       \"expression\": \"count by (instance) (sum by (instance, core) (windows_cpu_time_total{job=\\\"windows-exporter\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_cpu_utilisation:avg5m\",\r\n
        \       \"expression\": \"1 - avg(rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_cpu_utilisation:avg5m\",\r\n
        \       \"expression\": \"1 - avg by (instance) (rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_memory_utilisation:\",\r\n
        \       \"expression\": \"1 -sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"})/sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_memory_MemFreeCached_bytes:sum\",\r\n
        \       \"expression\": \"sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_cache_bytes{job=\\\"windows-exporter\\\"})\"\r\n      },\r\n
        \     {\r\n        \"record\": \"node:windows_node_memory_totalCached_bytes:sum\",\r\n
        \       \"expression\": \"(windows_memory_cache_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_modified_page_list_bytes{job=\\\"windows-exporter\\\"} +
        windows_memory_standby_cache_core_bytes{job=\\\"windows-exporter\\\"} + windows_memory_standby_cache_normal_priority_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_standby_cache_reserve_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_memory_MemTotal_bytes:sum\",\r\n
        \       \"expression\": \"sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_memory_bytes_available:sum\",\r\n
        \       \"expression\": \"sum by (instance) ((windows_memory_available_bytes{job=\\\"windows-exporter\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_memory_bytes_total:sum\",\r\n
        \       \"expression\": \"sum by (instance) (windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_memory_utilisation:ratio\",\r\n
        \       \"expression\": \"(node:windows_node_memory_bytes_total:sum - node:windows_node_memory_bytes_available:sum)
        / scalar(sum(node:windows_node_memory_bytes_total:sum))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"node:windows_node_memory_utilisation:\",\r\n
        \       \"expression\": \"1 - (node:windows_node_memory_bytes_available:sum
        / node:windows_node_memory_bytes_total:sum)\"\r\n      },\r\n      {\r\n        \"record\":
        \"node:windows_node_memory_swap_io_pages:irate\",\r\n        \"expression\":
        \"irate(windows_memory_swap_page_operations_total{job=\\\"windows-exporter\\\"}[5m])\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_disk_utilisation:avg_irate\",\r\n
        \       \"expression\": \"avg(irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_disk_utilisation:avg_irate\",\r\n
        \       \"expression\": \"avg by (instance) ((irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \     }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n  }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '4080'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002",
      "name": "NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002", "type":
      "Microsoft.AlertsManagement/prometheusRuleGroups", "location": "westus2", "properties":
      {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "node:windows_node_filesystem_usage:", "expression": "max by (instance,volume)((windows_logical_disk_size_bytes{job=\"windows-exporter\"}
      - windows_logical_disk_free_bytes{job=\"windows-exporter\"}) / windows_logical_disk_size_bytes{job=\"windows-exporter\"})"},
      {"record": "node:windows_node_filesystem_avail:", "expression": "max by (instance,
      volume) (windows_logical_disk_free_bytes{job=\"windows-exporter\"} / windows_logical_disk_size_bytes{job=\"windows-exporter\"})"},
      {"record": ":windows_node_net_utilisation:sum_irate", "expression": "sum(irate(windows_net_bytes_total{job=\"windows-exporter\"}[5m]))"},
      {"record": "node:windows_node_net_utilisation:sum_irate", "expression": "sum
      by (instance) ((irate(windows_net_bytes_total{job=\"windows-exporter\"}[5m])))"},
      {"record": ":windows_node_net_saturation:sum_irate", "expression": "sum(irate(windows_net_packets_received_discarded_total{job=\"windows-exporter\"}[5m]))
      + sum(irate(windows_net_packets_outbound_discarded_total{job=\"windows-exporter\"}[5m]))"},
      {"record": "node:windows_node_net_saturation:sum_irate", "expression": "sum
      by (instance) ((irate(windows_net_packets_received_discarded_total{job=\"windows-exporter\"}[5m])
      + irate(windows_net_packets_outbound_discarded_total{job=\"windows-exporter\"}[5m])))"},
      {"record": "windows_pod_container_available", "expression": "windows_container_available{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_total_runtime",
      "expression": "windows_container_cpu_usage_seconds_total{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_memory_usage",
      "expression": "windows_container_memory_usage_commit_bytes{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_private_working_set_usage",
      "expression": "windows_container_memory_usage_private_working_set_bytes{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_network_received_bytes_total",
      "expression": "windows_container_network_receive_bytes_total{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_network_transmitted_bytes_total",
      "expression": "windows_container_network_transmit_bytes_total{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "kube_pod_windows_container_resource_memory_request",
      "expression": "max by (namespace, pod, container) (kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"})
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "kube_pod_windows_container_resource_memory_limit", "expression": "kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "kube_pod_windows_container_resource_cpu_cores_request", "expression": "max
      by (namespace, pod, container) ( kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"})
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "kube_pod_windows_container_resource_cpu_cores_limit", "expression": "kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "namespace_pod_container:windows_container_cpu_usage_seconds_total:sum_rate",
      "expression": "sum by (namespace, pod, container) (rate(windows_container_total_runtime{}[5m]))"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '4923'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n
        \ \"name\": \"NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n
        \ \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\":
        \"westus2\",\r\n  \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\":
        \"cliakstest000002\",\r\n    \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"node:windows_node_filesystem_usage:\",\r\n
        \       \"expression\": \"max by (instance,volume)((windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"}
        - windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}) / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_filesystem_avail:\",\r\n
        \       \"expression\": \"max by (instance, volume) (windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}
        / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n      },\r\n
        \     {\r\n        \"record\": \":windows_node_net_utilisation:sum_irate\",\r\n
        \       \"expression\": \"sum(irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_net_utilisation:sum_irate\",\r\n
        \       \"expression\": \"sum by (instance) ((irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_net_saturation:sum_irate\",\r\n
        \       \"expression\": \"sum(irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m]))
        + sum(irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_net_saturation:sum_irate\",\r\n
        \       \"expression\": \"sum by (instance) ((irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"windows_pod_container_available\",\r\n
        \       \"expression\": \"windows_container_available{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_total_runtime\",\r\n        \"expression\": \"windows_container_cpu_usage_seconds_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_memory_usage\",\r\n        \"expression\": \"windows_container_memory_usage_commit_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_private_working_set_usage\",\r\n        \"expression\":
        \"windows_container_memory_usage_private_working_set_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_network_received_bytes_total\",\r\n        \"expression\":
        \"windows_container_network_receive_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_network_transmitted_bytes_total\",\r\n        \"expression\":
        \"windows_container_network_transmit_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"kube_pod_windows_container_resource_memory_request\",\r\n        \"expression\":
        \"max by (namespace, pod, container) (kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"kube_pod_windows_container_resource_memory_limit\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"kube_pod_windows_container_resource_cpu_cores_request\",\r\n
        \       \"expression\": \"max by (namespace, pod, container) ( kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"kube_pod_windows_container_resource_cpu_cores_limit\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_pod_container:windows_container_cpu_usage_seconds_total:sum_rate\",\r\n
        \       \"expression\": \"sum by (namespace, pod, container) (rate(windows_container_total_runtime{}[5m]))\"\r\n
        \     }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n  }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '5570'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.check_azuremonitormetrics_profile
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2023-01-01
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Succeeded\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Succeeded\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"mode\": \"System\",\n     \"enableEncryptionAtHost\": false,\n
        \    \"enableUltraSSD\": false,\n     \"osType\": \"Linux\",\n     \"osSKU\":
        \"Ubuntu\",\n     \"nodeImageVersion\": \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n
        \    \"upgradeSettings\": {},\n     \"enableFIPS\": false\n    }\n   ],\n
        \  \"linuxProfile\": {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\":
        {\n     \"publicKeys\": [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"networkProfile\": {\n    \"networkPlugin\":
        \"kubenet\",\n    \"loadBalancerSku\": \"Standard\",\n    \"loadBalancerProfile\":
        {\n     \"managedOutboundIPs\": {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\":
        [\n      {\n       \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ]\n    },\n    \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\":
        \"10.0.0.0/16\",\n    \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\":
        \"172.17.0.1/16\",\n    \"outboundType\": \"loadBalancer\",\n    \"podCidrs\":
        [\n     \"10.244.0.0/16\"\n    ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n
        \   ],\n    \"ipFamilies\": [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\":
        100,\n   \"identityProfile\": {\n    \"kubeletidentity\": {\n     \"resourceId\":
        \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"fileCSIDriver\": {\n     \"enabled\": true\n    },\n    \"snapshotController\":
        {\n     \"enabled\": true\n    }\n   },\n   \"oidcIssuerProfile\": {\n    \"enabled\":
        false\n   },\n   \"workloadAutoScalerProfile\": {}\n  },\n  \"identity\":
        {\n   \"type\": \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Basic\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3999'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:17:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_mac_sub_list
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers?api-version=2021-04-01&$select=namespace,registrationstate
  response:
    body:
      string: '{"value":[{"namespace":"Microsoft.Security","registrationState":"Registered"},{"namespace":"Microsoft.Compute","registrationState":"Registered"},{"namespace":"Microsoft.ContainerService","registrationState":"Registered"},{"namespace":"Microsoft.ContainerInstance","registrationState":"Registered"},{"namespace":"Microsoft.OperationsManagement","registrationState":"Registered"},{"namespace":"Microsoft.Capacity","registrationState":"Registered"},{"namespace":"Microsoft.Storage","registrationState":"Registered"},{"namespace":"Microsoft.Advisor","registrationState":"Registered"},{"namespace":"Microsoft.ManagedIdentity","registrationState":"Registered"},{"namespace":"Microsoft.KeyVault","registrationState":"Registered"},{"namespace":"Microsoft.ContainerRegistry","registrationState":"Registered"},{"namespace":"Microsoft.Kusto","registrationState":"Registered"},{"namespace":"Microsoft.Migrate","registrationState":"Registered"},{"namespace":"Microsoft.Diagnostics","registrationState":"Registered"},{"namespace":"Microsoft.MarketplaceNotifications","registrationState":"Registered"},{"namespace":"Microsoft.ChangeAnalysis","registrationState":"Registered"},{"namespace":"microsoft.insights","registrationState":"Registered"},{"namespace":"Microsoft.Logic","registrationState":"Registered"},{"namespace":"Microsoft.Web","registrationState":"Registered"},{"namespace":"Microsoft.ResourceHealth","registrationState":"Registered"},{"namespace":"Microsoft.Monitor","registrationState":"Registered"},{"namespace":"Microsoft.Dashboard","registrationState":"Registered"},{"namespace":"Microsoft.ManagedServices","registrationState":"Registered"},{"namespace":"Microsoft.NotificationHubs","registrationState":"Registered"},{"namespace":"Microsoft.DataLakeStore","registrationState":"Registered"},{"namespace":"Microsoft.Blueprint","registrationState":"Registered"},{"namespace":"Microsoft.Databricks","registrationState":"Registered"},{"namespace":"Microsoft.Relay","registrationState":"Registered"},{"namespace":"Microsoft.Maintenance","registrationState":"Registered"},{"namespace":"Microsoft.HealthcareApis","registrationState":"Registered"},{"namespace":"Microsoft.AppPlatform","registrationState":"Registered"},{"namespace":"Microsoft.DevTestLab","registrationState":"Registered"},{"namespace":"Microsoft.DataLakeAnalytics","registrationState":"Registered"},{"namespace":"Microsoft.Media","registrationState":"Registering"},{"namespace":"Microsoft.Devices","registrationState":"Registered"},{"namespace":"Microsoft.Automation","registrationState":"Registered"},{"namespace":"Microsoft.BotService","registrationState":"Registered"},{"namespace":"Microsoft.Management","registrationState":"Registered"},{"namespace":"Microsoft.CustomProviders","registrationState":"Registered"},{"namespace":"Microsoft.MixedReality","registrationState":"Registered"},{"namespace":"Microsoft.ServiceFabricMesh","registrationState":"Registering"},{"namespace":"Microsoft.DataMigration","registrationState":"Registered"},{"namespace":"Microsoft.RecoveryServices","registrationState":"Registered"},{"namespace":"Microsoft.DesktopVirtualization","registrationState":"Registered"},{"namespace":"Microsoft.DataProtection","registrationState":"Registered"},{"namespace":"Microsoft.DocumentDB","registrationState":"Registered"},{"namespace":"Microsoft.TimeSeriesInsights","registrationState":"Registered"},{"namespace":"Microsoft.Cache","registrationState":"Registered"},{"namespace":"Microsoft.DBforMySQL","registrationState":"Registered"},{"namespace":"Microsoft.SecurityInsights","registrationState":"Registered"},{"namespace":"Microsoft.ApiManagement","registrationState":"Registered"},{"namespace":"Microsoft.EventHub","registrationState":"Registered"},{"namespace":"Microsoft.AVS","registrationState":"Registered"},{"namespace":"Microsoft.PowerBIDedicated","registrationState":"Registered"},{"namespace":"Microsoft.EventGrid","registrationState":"Registered"},{"namespace":"Microsoft.Maps","registrationState":"Registered"},{"namespace":"Microsoft.MachineLearningServices","registrationState":"Registering"},{"namespace":"Microsoft.StreamAnalytics","registrationState":"Registered"},{"namespace":"Microsoft.Search","registrationState":"Registered"},{"namespace":"Microsoft.DBforMariaDB","registrationState":"Registered"},{"namespace":"Microsoft.CognitiveServices","registrationState":"Registered"},{"namespace":"Microsoft.Cdn","registrationState":"Registered"},{"namespace":"Microsoft.HDInsight","registrationState":"Registered"},{"namespace":"Microsoft.ServiceFabric","registrationState":"Registered"},{"namespace":"Microsoft.DBforPostgreSQL","registrationState":"Registered"},{"namespace":"Microsoft.CloudShell","registrationState":"Registered"},{"namespace":"Microsoft.AlertsManagement","registrationState":"Registered"},{"namespace":"Microsoft.OperationalInsights","registrationState":"Registered"},{"namespace":"Microsoft.PolicyInsights","registrationState":"Registered"},{"namespace":"Microsoft.GuestConfiguration","registrationState":"Registered"},{"namespace":"Microsoft.Network","registrationState":"Registered"},{"namespace":"Microsoft.ServiceBus","registrationState":"Registered"},{"namespace":"Microsoft.Sql","registrationState":"Registered"},{"namespace":"Dynatrace.Observability","registrationState":"NotRegistered"},{"namespace":"GitHub.Network","registrationState":"NotRegistered"},{"namespace":"Microsoft.AAD","registrationState":"NotRegistered"},{"namespace":"microsoft.aadiam","registrationState":"NotRegistered"},{"namespace":"Microsoft.Addons","registrationState":"NotRegistered"},{"namespace":"Microsoft.ADHybridHealthService","registrationState":"Registered"},{"namespace":"Microsoft.AgFoodPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.AnalysisServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.AnyBuild","registrationState":"NotRegistered"},{"namespace":"Microsoft.ApiSecurity","registrationState":"NotRegistered"},{"namespace":"Microsoft.App","registrationState":"NotRegistered"},{"namespace":"Microsoft.AppAssessment","registrationState":"NotRegistered"},{"namespace":"Microsoft.AppComplianceAutomation","registrationState":"NotRegistered"},{"namespace":"Microsoft.AppConfiguration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Attestation","registrationState":"NotRegistered"},{"namespace":"Microsoft.Authorization","registrationState":"Registered"},{"namespace":"Microsoft.Automanage","registrationState":"NotRegistered"},{"namespace":"Microsoft.AutonomousDevelopmentPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.AutonomousSystems","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureActiveDirectory","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureArcData","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureCIS","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureData","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzurePercept","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureScan","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureSphere","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureStack","registrationState":"NotRegistered"},{"namespace":"Microsoft.AzureStackHCI","registrationState":"NotRegistered"},{"namespace":"Microsoft.BackupSolutions","registrationState":"NotRegistered"},{"namespace":"Microsoft.BareMetalInfrastructure","registrationState":"NotRegistered"},{"namespace":"Microsoft.Batch","registrationState":"NotRegistered"},{"namespace":"Microsoft.Billing","registrationState":"Registered"},{"namespace":"Microsoft.BillingBenefits","registrationState":"NotRegistered"},{"namespace":"Microsoft.Bing","registrationState":"NotRegistered"},{"namespace":"Microsoft.BlockchainTokens","registrationState":"NotRegistered"},{"namespace":"Microsoft.Carbon","registrationState":"NotRegistered"},{"namespace":"Microsoft.CertificateRegistration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Chaos","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicCompute","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicInfrastructureMigrate","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicStorage","registrationState":"NotRegistered"},{"namespace":"Microsoft.ClassicSubscription","registrationState":"Registered"},{"namespace":"Microsoft.CleanRoom","registrationState":"NotRegistered"},{"namespace":"Microsoft.CloudTest","registrationState":"NotRegistered"},{"namespace":"Microsoft.CodeSigning","registrationState":"NotRegistered"},{"namespace":"Microsoft.Codespaces","registrationState":"NotRegistered"},{"namespace":"Microsoft.CognitiveSearch","registrationState":"NotRegistered"},{"namespace":"Microsoft.Commerce","registrationState":"Registered"},{"namespace":"Microsoft.Communication","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConfidentialLedger","registrationState":"NotRegistered"},{"namespace":"Microsoft.Confluent","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConnectedCache","registrationState":"NotRegistered"},{"namespace":"microsoft.connectedopenstack","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConnectedVehicle","registrationState":"NotRegistered"},{"namespace":"Microsoft.ConnectedVMwarevSphere","registrationState":"NotRegistered"},{"namespace":"Microsoft.Consumption","registrationState":"Registered"},{"namespace":"Microsoft.CostManagement","registrationState":"Registered"},{"namespace":"Microsoft.CostManagementExports","registrationState":"NotRegistered"},{"namespace":"Microsoft.CustomerLockbox","registrationState":"NotRegistered"},{"namespace":"Microsoft.D365CustomerInsights","registrationState":"NotRegistered"},{"namespace":"Microsoft.DatabaseWatcher","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataBox","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataBoxEdge","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataCatalog","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataCollaboration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Datadog","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataFactory","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataReplication","registrationState":"NotRegistered"},{"namespace":"Microsoft.DataShare","registrationState":"NotRegistered"},{"namespace":"Microsoft.DelegatedNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.DeploymentManager","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevAI","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevCenter","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.DeviceUpdate","registrationState":"NotRegistered"},{"namespace":"Microsoft.DevOps","registrationState":"NotRegistered"},{"namespace":"Microsoft.DigitalTwins","registrationState":"NotRegistered"},{"namespace":"Microsoft.DomainRegistration","registrationState":"NotRegistered"},{"namespace":"Microsoft.Easm","registrationState":"NotRegistered"},{"namespace":"Microsoft.EdgeOrder","registrationState":"NotRegistered"},{"namespace":"Microsoft.EdgeOrderPartner","registrationState":"NotRegistered"},{"namespace":"Microsoft.EdgeZones","registrationState":"NotRegistered"},{"namespace":"Microsoft.Elastic","registrationState":"NotRegistered"},{"namespace":"Microsoft.ElasticSan","registrationState":"NotRegistered"},{"namespace":"Microsoft.ExtendedLocation","registrationState":"NotRegistered"},{"namespace":"Microsoft.Falcon","registrationState":"NotRegistered"},{"namespace":"Microsoft.Features","registrationState":"Registered"},{"namespace":"Microsoft.FluidRelay","registrationState":"NotRegistered"},{"namespace":"Microsoft.GraphServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.HanaOnAzure","registrationState":"NotRegistered"},{"namespace":"Microsoft.HardwareSecurityModules","registrationState":"NotRegistered"},{"namespace":"Microsoft.HealthBot","registrationState":"NotRegistered"},{"namespace":"Microsoft.Help","registrationState":"NotRegistered"},{"namespace":"Microsoft.HpcWorkbench","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridCompute","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridConnectivity","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridContainerService","registrationState":"NotRegistered"},{"namespace":"Microsoft.HybridNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.Impact","registrationState":"NotRegistered"},{"namespace":"Microsoft.IoTCentral","registrationState":"NotRegistered"},{"namespace":"Microsoft.IoTFirmwareDefense","registrationState":"NotRegistered"},{"namespace":"Microsoft.IoTSecurity","registrationState":"NotRegistered"},{"namespace":"Microsoft.Kubernetes","registrationState":"NotRegistered"},{"namespace":"Microsoft.KubernetesConfiguration","registrationState":"NotRegistered"},{"namespace":"Microsoft.LabServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.LoadTestService","registrationState":"NotRegistered"},{"namespace":"Microsoft.Logz","registrationState":"NotRegistered"},{"namespace":"Microsoft.MachineLearning","registrationState":"NotRegistered"},{"namespace":"Microsoft.ManagedNetworkFabric","registrationState":"NotRegistered"},{"namespace":"Microsoft.ManagedStorageClass","registrationState":"NotRegistered"},{"namespace":"Microsoft.ManufacturingPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.Marketplace","registrationState":"NotRegistered"},{"namespace":"Microsoft.MarketplaceOrdering","registrationState":"Registered"},{"namespace":"Microsoft.Metaverse","registrationState":"NotRegistered"},{"namespace":"Microsoft.Mission","registrationState":"NotRegistered"},{"namespace":"Microsoft.MobileNetwork","registrationState":"NotRegistered"},{"namespace":"Microsoft.MobilePacketCore","registrationState":"NotRegistered"},{"namespace":"Microsoft.ModSimWorkbench","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetApp","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetworkAnalytics","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetworkCloud","registrationState":"NotRegistered"},{"namespace":"Microsoft.NetworkFunction","registrationState":"NotRegistered"},{"namespace":"Microsoft.Nutanix","registrationState":"NotRegistered"},{"namespace":"Microsoft.ObjectStore","registrationState":"NotRegistered"},{"namespace":"Microsoft.OffAzure","registrationState":"NotRegistered"},{"namespace":"Microsoft.OffAzureSpringBoot","registrationState":"NotRegistered"},{"namespace":"Microsoft.OpenEnergyPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.OpenLogisticsPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.OperatorVoicemail","registrationState":"NotRegistered"},{"namespace":"Microsoft.OracleDiscovery","registrationState":"NotRegistered"},{"namespace":"Microsoft.Orbital","registrationState":"NotRegistered"},{"namespace":"Microsoft.Peering","registrationState":"NotRegistered"},{"namespace":"Microsoft.Pki","registrationState":"NotRegistered"},{"namespace":"Microsoft.PlayFab","registrationState":"NotRegistered"},{"namespace":"Microsoft.Portal","registrationState":"Registered"},{"namespace":"Microsoft.PowerBI","registrationState":"NotRegistered"},{"namespace":"Microsoft.PowerPlatform","registrationState":"NotRegistered"},{"namespace":"Microsoft.ProfessionalService","registrationState":"NotRegistered"},{"namespace":"Microsoft.ProviderHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.Purview","registrationState":"NotRegistered"},{"namespace":"Microsoft.Quantum","registrationState":"NotRegistered"},{"namespace":"Microsoft.Quota","registrationState":"NotRegistered"},{"namespace":"Microsoft.RecommendationsService","registrationState":"NotRegistered"},{"namespace":"Microsoft.RedHatOpenShift","registrationState":"NotRegistered"},{"namespace":"Microsoft.ResourceConnector","registrationState":"NotRegistered"},{"namespace":"Microsoft.ResourceGraph","registrationState":"Registered"},{"namespace":"Microsoft.Resources","registrationState":"Registered"},{"namespace":"Microsoft.SaaS","registrationState":"NotRegistered"},{"namespace":"Microsoft.SaaSHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.Scom","registrationState":"NotRegistered"},{"namespace":"Microsoft.ScVmm","registrationState":"NotRegistered"},{"namespace":"Microsoft.SecurityDetonation","registrationState":"NotRegistered"},{"namespace":"Microsoft.SecurityDevOps","registrationState":"NotRegistered"},{"namespace":"Microsoft.SerialConsole","registrationState":"Registered"},{"namespace":"Microsoft.ServiceLinker","registrationState":"NotRegistered"},{"namespace":"Microsoft.ServiceNetworking","registrationState":"NotRegistered"},{"namespace":"Microsoft.ServicesHub","registrationState":"NotRegistered"},{"namespace":"Microsoft.SignalRService","registrationState":"NotRegistered"},{"namespace":"Microsoft.Singularity","registrationState":"NotRegistered"},{"namespace":"Microsoft.SoftwarePlan","registrationState":"NotRegistered"},{"namespace":"Microsoft.Solutions","registrationState":"NotRegistered"},{"namespace":"Microsoft.SqlVirtualMachine","registrationState":"NotRegistered"},{"namespace":"Microsoft.StandbyPool","registrationState":"NotRegistered"},{"namespace":"Microsoft.StorageCache","registrationState":"NotRegistered"},{"namespace":"Microsoft.StorageMover","registrationState":"NotRegistered"},{"namespace":"Microsoft.StorageSync","registrationState":"NotRegistered"},{"namespace":"Microsoft.Subscription","registrationState":"NotRegistered"},{"namespace":"microsoft.support","registrationState":"Registered"},{"namespace":"Microsoft.Synapse","registrationState":"NotRegistered"},{"namespace":"Microsoft.Syntex","registrationState":"NotRegistered"},{"namespace":"Microsoft.SystemIntegrityMonitoring","registrationState":"NotRegistered"},{"namespace":"Microsoft.TestBase","registrationState":"NotRegistered"},{"namespace":"Microsoft.UsageBilling","registrationState":"NotRegistered"},{"namespace":"Microsoft.VideoIndexer","registrationState":"NotRegistered"},{"namespace":"Microsoft.VirtualMachineImages","registrationState":"NotRegistered"},{"namespace":"microsoft.visualstudio","registrationState":"NotRegistered"},{"namespace":"Microsoft.VMware","registrationState":"NotRegistered"},{"namespace":"Microsoft.VoiceServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.VSOnline","registrationState":"NotRegistered"},{"namespace":"Microsoft.WindowsESU","registrationState":"NotRegistered"},{"namespace":"Microsoft.WindowsIoT","registrationState":"NotRegistered"},{"namespace":"Microsoft.WindowsPushNotificationServices","registrationState":"NotRegistered"},{"namespace":"Microsoft.WorkloadBuilder","registrationState":"NotRegistered"},{"namespace":"Microsoft.Workloads","registrationState":"NotRegistered"},{"namespace":"NewRelic.Observability","registrationState":"NotRegistered"},{"namespace":"NGINX.NGINXPLUS","registrationState":"NotRegistered"},{"namespace":"PaloAltoNetworks.Cloudngfw","registrationState":"NotRegistered"},{"namespace":"Qumulo.Storage","registrationState":"NotRegistered"},{"namespace":"SolarWinds.Observability","registrationState":"NotRegistered"},{"namespace":"Wandisco.Fusion","registrationState":"NotRegistered"},{"namespace":"Microsoft.ProjectArcadia","registrationState":"NotRegistered"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '19647'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.register_monitor_rp
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.monitor/register?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Monitor","namespace":"Microsoft.Monitor","authorizations":[{"applicationId":"be14bf7e-8ab4-49b0-9dc6-a0eddd6fa73e","roleDefinitionId":"803a038d-eff1-4489-a0c2-dbc204ebac3c"},{"applicationId":"e158b4a5-21ab-442e-ae73-2e19f4e7d763","roleDefinitionId":"e46476d4-e741-4936-a72b-b768349eed70","managedByRoleDefinitionId":"50cd84fb-5e4c-4801-a8d2-4089ab77e6cd"}],"resourceTypes":[{"resourceType":"accounts","locations":["East
        US","Central India","Central US","East US 2","North Europe","South Central
        US","Southeast Asia","UK South","West Europe","West US","West US 2","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2023-04-03","2021-06-03-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SupportsTags, SupportsLocation"},{"resourceType":"operations","locations":["North
        Central US","East US","Australia Central","Australia Southeast","Brazil South","Canada
        Central","Central India","Central US","East Asia","East US 2","North Europe","Norway
        East","South Africa North","South Central US","Southeast Asia","UAE North","UK
        South","West Central US","West Europe","West US","West US 2","East US 2 EUAP","Central
        US EUAP"],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"defaultApiVersion":"2021-06-01-preview","capabilities":"None"},{"resourceType":"locations","locations":[],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationResults","locations":["East
        US","Central India","Central US","East US 2","North Europe","South Central
        US","Southeast Asia","UK South","West Europe","West US","West US 2","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2023-04-03","2021-06-03-preview"],"capabilities":"None"},{"resourceType":"locations/operationStatuses","locations":["East
        US","Central India","Central US","East US 2","North Europe","South Central
        US","Southeast Asia","UK South","West Europe","West US","West US 2","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2023-04-03","2021-06-03-preview"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2246'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.register_dashboard_rp
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.dashboard/register?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Dashboard","namespace":"Microsoft.Dashboard","authorizations":[{"applicationId":"ce34e7e5-485f-4d76-964f-b3d2b16d1e4f","roleDefinitionId":"996b8381-eac0-46be-8daf-9619bafd1073"},{"applicationId":"6f2d169c-08f3-4a4c-a982-bcaf2d038c45"}],"resourceTypes":[{"resourceType":"locations","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationStatuses","locations":["East
        US 2 EUAP","Central US EUAP","South Central US","West Europe","North Europe","UK
        South","East US","East US 2","West Central US","Australia East","Sweden Central","West
        US","West US 3","East Asia"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"grafana","locations":["South
        Central US","West Central US","West Europe","East US","East US 2","North Europe","UK
        South","Australia East","Sweden Central","West US 3","East Asia","East US
        2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"SystemAssignedResourceIdentity,
        SupportsTags, SupportsLocation"},{"resourceType":"operations","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"grafana/privateEndpointConnections","locations":["South
        Central US","West Central US","West Europe","North Europe","UK South","East
        US","East US 2","Australia East","Sweden Central","West US 3","East Asia","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview"],"capabilities":"None"},{"resourceType":"grafana/privateLinkResources","locations":["South
        Central US","West Central US","West Europe","North Europe","UK South","East
        US","East US 2","Australia East","Sweden Central","West US 3","East Asia","East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview"],"capabilities":"None"},{"resourceType":"locations/checkNameAvailability","locations":[],"apiVersions":["2022-10-01-preview","2022-08-01","2022-05-01-preview","2021-09-01-preview"],"capabilities":"None"},{"resourceType":"grafana/managedPrivateEndpoints","locations":["East
        US 2 EUAP","Central US EUAP"],"apiVersions":["2022-10-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SupportsTags, SupportsLocation"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2807'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_supported_rp_locations
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Monitor?api-version=2022-01-01
  response:
    body:
      string: '{"namespace":"Microsoft.Monitor","resourceTypes":[{"resourceType":"accounts","locations":["East
        US 2 EUAP","Central US EUAP","North Central US","East US","Australia Central","Australia
        Southeast","Brazil South","Canada Central","Central India","Central US","East
        Asia","East US 2","North Europe","Norway East","South Africa North","South
        Central US","Southeast Asia","UAE North","UK South","West Central US","West
        Europe","West US","West US 2"],"apiVersions":["2023-04-01","2021-06-01-preview"],"capabilities":"SupportsTags,
        SupportsLocation"},{"resourceType":"operations","locations":["East US 2 EUAP","Central
        US EUAP","North Central US","East US","Australia Central","Australia Southeast","Brazil
        South","Canada Central","Central India","Central US","East Asia","East US
        2","North Europe","Norway East","South Africa North","South Central US","Southeast
        Asia","UAE North","UK South","West Central US","West Europe","West US","West
        US 2"],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"defaultApiVersion":"2021-06-01-preview","capabilities":"None"},{"resourceType":"locations","locations":[],"apiVersions":["2023-04-03","2023-04-01","2021-06-03-preview","2021-06-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationResults","locations":["East
        US 2 EUAP","Central US EUAP","North Central US","East US","Australia Central","Australia
        Southeast","Brazil South","Canada Central","Central India","Central US","East
        Asia","East US 2","North Europe","Norway East","South Africa North","South
        Central US","Southeast Asia","UAE North","UK South","West Central US","West
        Europe","West US","West US 2"],"apiVersions":["2023-04-01","2021-06-01-preview"],"capabilities":"None"},{"resourceType":"locations/operationStatuses","locations":["East
        US 2 EUAP","Central US EUAP","North Central US","East US","Australia Central","Australia
        Southeast","Brazil South","Canada Central","Central India","Central US","East
        Asia","East US 2","North Europe","Norway East","South Africa North","South
        Central US","Southeast Asia","UAE North","UK South","West Central US","West
        Europe","West US","West US 2"],"apiVersions":["2023-04-01","2021-06-01-preview"],"capabilities":"None"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/DefaultResourceGroup-westus2?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:17:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2?api-version=2023-04-03
  response:
    body:
      string: '{"properties":{"accountId":"ec050f19-1529-4ec2-9d0c-e6677ca07ac8","metrics":{"prometheusQueryEndpoint":"https://defaultazuremonitorworkspace-westus2-9jg3.westus2.prometheus.monitor.azure.com","internalId":"mac_ec050f19-1529-4ec2-9d0c-e6677ca07ac8"},"provisioningState":"Succeeded","defaultIngestionSettings":{"dataCollectionRuleResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MA_defaultazuremonitorworkspace-westus2_westus2_managed/providers/Microsoft.Insights/dataCollectionRules/defaultazuremonitorworkspace-westus2","dataCollectionEndpointResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MA_defaultazuremonitorworkspace-westus2_westus2_managed/providers/Microsoft.Insights/dataCollectionEndpoints/defaultazuremonitorworkspace-westus2"},"publicNetworkAccess":"Enabled"},"location":"westus2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-westus2/providers/microsoft.monitor/accounts/defaultazuremonitorworkspace-westus2","name":"DefaultAzureMonitorWorkspace-westus2","type":"Microsoft.Monitor/accounts","etag":"\"3d030879-0000-0800-0000-6452ca160000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-03T20:54:27.8807957Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-03T20:54:27.8807957Z"}}'
    headers:
      api-supported-versions:
      - 2021-06-01-preview, 2021-06-03-preview, 2023-04-01, 2023-04-03
      cache-control:
      - no-cache
      content-length:
      - '1443'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:74683e7d-3ee8-4856-bfe7-e63c83b6737e
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "MSProm-westus2-cliakstest000002", "location": "westus2", "kind":
      "Linux", "properties": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '101'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.create_dce
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"immutableId":"dce-dbc6505b5de04d2fbe162b35dec588a2","configurationAccess":{"endpoint":"https://msprom-westus2-cliakstest000002-sdy0.westus2-1.handler.control.monitor.azure.com"},"logsIngestion":{"endpoint":"https://msprom-westus2-cliakstest000002-sdy0.westus2-1.ingest.monitor.azure.com"},"metricsIngestion":{"endpoint":"https://msprom-westus2-cliakstest000002-sdy0.westus2-1.metrics.ingest.monitor.azure.com"},"networkAcls":{"publicNetworkAccess":"Enabled"},"provisioningState":"Succeeded"},"location":"westus2","kind":"Linux","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002","name":"MSProm-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionEndpoints","etag":"\"4e08276a-0000-0800-0000-645e124f0000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:21.7263493Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:50.4962224Z"}}'
    headers:
      api-supported-versions:
      - 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1138'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '59'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "kind": "Linux", "properties": {"dataCollectionEndpointId":
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002",
      "dataSources": {"prometheusForwarder": [{"name": "PrometheusDataSource", "streams":
      ["Microsoft-PrometheusMetrics"], "labelIncludeFilter": {}}]}, "dataFlows": [{"destinations":
      ["MonitoringAccount1"], "streams": ["Microsoft-PrometheusMetrics"]}], "description":
      "DCR description", "destinations": {"monitoringAccounts": [{"accountResourceId":
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2",
      "name": "MonitoringAccount1"}]}}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '802'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.create_dcr
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"description":"DCR description","immutableId":"dcr-47f9c942a60a4808984936e13fba633e","dataCollectionEndpointId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002","dataSources":{"prometheusForwarder":[{"streams":["Microsoft-PrometheusMetrics"],"labelIncludeFilter":{},"name":"PrometheusDataSource"}]},"destinations":{"monitoringAccounts":[{"accountResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2","accountId":"ec050f19-1529-4ec2-9d0c-e6677ca07ac8","name":"MonitoringAccount1"}]},"dataFlows":[{"streams":["Microsoft-PrometheusMetrics"],"destinations":["MonitoringAccount1"]}],"provisioningState":"Succeeded"},"location":"westus2","kind":"Linux","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002","name":"MSProm-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionRules","etag":"\"4e08816a-0000-0800-0000-645e12510000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:25.8820682Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:52.4817462Z"}}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1497'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '149'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"dataCollectionRuleId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002",
      "description": "Promtheus data collection association between DCR, DCE and target
      AKS resource"}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '325'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.create_dcra
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations/ContainerInsightsMetricsExtension-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"description":"Promtheus data collection association
        between DCR, DCE and target AKS resource","dataCollectionRuleId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations/ContainerInsightsMetricsExtension-westus2-cliakstest000002","name":"ContainerInsightsMetricsExtension-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionRuleAssociations","etag":"\"4e08f56a-0000-0800-0000-645e12530000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:54.3369938Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:54.3369938Z"}}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1030'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_recording_rules_template
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations?api-version=2023-01-01-preview
  response:
    body:
      string: "{\r\n  \"value\": [\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/NodeRecordingRulesRuleGroup\",\r\n
        \     \"name\": \"NodeRecordingRulesRuleGroup\",\r\n      \"type\": \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n
        \     \"location\": \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n        \"displayInformation\":
        {\r\n          \"AlertRuleNamePrefix\": \"NodeRecordingRulesRuleGroup\",\r\n
        \         \"RuleTitle\": \"This would be the info message for prom recording
        rules\"\r\n        },\r\n        \"rulesArmTemplate\": {\r\n          \"$schema\":
        \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"NodeRecordingRulesRuleGroup\",\r\n              \"minLength\": 1,\r\n              \"metadata\":
        {\r\n                \"description\": \"prefix of the alert rule name\"\r\n
        \             }\r\n            },\r\n            \"alertName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"[concat(parameters('alertNamePrefix'),
        ' - ', parameters('clusterNameForPrometheus'))]\",\r\n              \"minLength\":
        1,\r\n              \"metadata\": {\r\n                \"description\": \"Name
        of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Node Recording Rules RuleGroup\",\r\n                \"scopes\": \"[variables('scopes')]\",\r\n
        \               \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"instance:node_num_cpu:sum\",\r\n
        \                   \"expression\": \"count without (cpu, mode) (  node_cpu_seconds_total{job=\\\"node\\\",mode=\\\"idle\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance:node_cpu_utilisation:rate5m\",\r\n                    \"expression\":
        \"1 - avg without (cpu) (  sum without (mode) (rate(node_cpu_seconds_total{job=\\\"node\\\",
        mode=~\\\"idle|iowait|steal\\\"}[5m])))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_load1_per_cpu:ratio\",\r\n
        \                   \"expression\": \"(  node_load1{job=\\\"node\\\"}/  instance:node_num_cpu:sum{job=\\\"node\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance:node_memory_utilisation:ratio\",\r\n                    \"expression\":
        \"1 - (  (    node_memory_MemAvailable_bytes{job=\\\"node\\\"}    or    (
        \     node_memory_Buffers_bytes{job=\\\"node\\\"}      +      node_memory_Cached_bytes{job=\\\"node\\\"}
        \     +      node_memory_MemFree_bytes{job=\\\"node\\\"}      +      node_memory_Slab_bytes{job=\\\"node\\\"}
        \   )  )/  node_memory_MemTotal_bytes{job=\\\"node\\\"})\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"instance:node_vmstat_pgmajfault:rate5m\",\r\n
        \                   \"expression\": \"rate(node_vmstat_pgmajfault{job=\\\"node\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance_device:node_disk_io_time_seconds:rate5m\",\r\n                    \"expression\":
        \"rate(node_disk_io_time_seconds_total{job=\\\"node\\\", device!=\\\"\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance_device:node_disk_io_time_weighted_seconds:rate5m\",\r\n                    \"expression\":
        \"rate(node_disk_io_time_weighted_seconds_total{job=\\\"node\\\", device!=\\\"\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"instance:node_network_receive_bytes_excluding_lo:rate5m\",\r\n                    \"expression\":
        \"sum without (device) (  rate(node_network_receive_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_network_transmit_bytes_excluding_lo:rate5m\",\r\n
        \                   \"expression\": \"sum without (device) (  rate(node_network_transmit_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_network_receive_drop_excluding_lo:rate5m\",\r\n
        \                   \"expression\": \"sum without (device) (  rate(node_network_receive_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"instance:node_network_transmit_drop_excluding_lo:rate5m\",\r\n
        \                   \"expression\": \"sum without (device) (  rate(node_network_transmit_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n                  }\r\n                ]\r\n
        \             }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n
        \   },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/KubernetesRecordingRulesRuleGroup\",\r\n
        \     \"name\": \"KubernetesRecordingRulesRuleGroup\",\r\n      \"type\":
        \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n      \"location\":
        \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \       \"displayInformation\": {\r\n          \"AlertRuleNamePrefix\": \"KubernetesRecordingRulesRuleGroup\",\r\n
        \         \"RuleTitle\": \"This would be the info message for prom recording
        rules\"\r\n        },\r\n        \"rulesArmTemplate\": {\r\n          \"$schema\":
        \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"KubernetesRecordingRulesRuleGroup\",\r\n              \"minLength\": 1,\r\n
        \             \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Kubernetes Recording Rules RuleGroup\",\r\n                \"scopes\": \"[variables('scopes')]\",\r\n
        \               \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate\",\r\n
        \                   \"expression\": \"sum by (cluster, namespace, pod, container)
        (  irate(container_cpu_usage_seconds_total{job=\\\"cadvisor\\\", image!=\\\"\\\"}[5m]))
        * on (cluster, namespace, pod) group_left(node) topk by (cluster, namespace,
        pod) (  1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node_namespace_pod_container:container_memory_working_set_bytes\",\r\n                    \"expression\":
        \"container_memory_working_set_bytes{job=\\\"cadvisor\\\", image!=\\\"\\\"}*
        on (namespace, pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace,
        pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"node_namespace_pod_container:container_memory_rss\",\r\n
        \                   \"expression\": \"container_memory_rss{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}* on (namespace, pod) group_left(node) topk by(namespace,
        pod) (1,  max by(namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node_namespace_pod_container:container_memory_cache\",\r\n                    \"expression\":
        \"container_memory_cache{job=\\\"cadvisor\\\", image!=\\\"\\\"}* on (namespace,
        pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod,
        node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"node_namespace_pod_container:container_memory_swap\",\r\n
        \                   \"expression\": \"container_memory_swap{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}* on (namespace, pod) group_left(node) topk by(namespace,
        pod) (1,  max by(namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_memory:active:kube_pod_container_resource_requests\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_memory:kube_pod_container_resource_requests:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_cpu:kube_pod_container_resource_requests:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_memory:active:kube_pod_container_resource_limits\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_memory:kube_pod_container_resource_limits:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        ( (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1) )\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_cpu:kube_pod_container_resource_limits:sum\",\r\n
        \                   \"expression\": \"sum by (namespace, cluster) (    sum
        by (namespace, pod, cluster) (        max by (namespace, pod, container, cluster)
        (          kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n                    \"expression\":
        \"max by (cluster, namespace, workload, pod) (  label_replace(    label_replace(
        \     kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"ReplicaSet\\\"},
        \     \\\"replicaset\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"    )
        * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace)
        (      1, max by (replicaset, namespace, owner_name) (        kube_replicaset_owner{job=\\\"kube-state-metrics\\\"}
        \     )    ),    \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"
        \ ))\",\r\n                    \"labels\": {\r\n                      \"workload_type\":
        \"deployment\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \                   \"expression\": \"max by (cluster, namespace, workload,
        pod) (  label_replace(    kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"DaemonSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \                   \"labels\": {\r\n                      \"workload_type\":
        \"daemonset\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \                   \"expression\": \"max by (cluster, namespace, workload,
        pod) (  label_replace(    kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"StatefulSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \                   \"labels\": {\r\n                      \"workload_type\":
        \"statefulset\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \                   \"expression\": \"max by (cluster, namespace, workload,
        pod) (  label_replace(    kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"Job\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \                   \"labels\": {\r\n                      \"workload_type\":
        \"job\"\r\n                    }\r\n                  },\r\n                  {\r\n
        \                   \"record\": \":node_memory_MemAvailable_bytes:sum\",\r\n
        \                   \"expression\": \"sum(  node_memory_MemAvailable_bytes{job=\\\"node\\\"}
        or  (    node_memory_Buffers_bytes{job=\\\"node\\\"} +    node_memory_Cached_bytes{job=\\\"node\\\"}
        +    node_memory_MemFree_bytes{job=\\\"node\\\"} +    node_memory_Slab_bytes{job=\\\"node\\\"}
        \ )) by (cluster)\"\r\n                  },\r\n                  {\r\n                    \"record\":
        \"cluster:node_cpu:ratio_rate5m\",\r\n                    \"expression\":
        \"sum(rate(node_cpu_seconds_total{job=\\\"node\\\",mode!=\\\"idle\\\",mode!=\\\"iowait\\\",mode!=\\\"steal\\\"}[5m]))
        by (cluster) /count(sum(node_cpu_seconds_total{job=\\\"node\\\"}) by (cluster,
        instance, cpu)) by (cluster)\"\r\n                  }\r\n                ]\r\n
        \             }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n
        \   },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/NodeRecordingRulesRuleGroup-Win\",\r\n
        \     \"name\": \"NodeRecordingRulesRuleGroup-Win\",\r\n      \"type\": \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n
        \     \"location\": \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n        \"displayInformation\":
        {\r\n          \"AlertRuleNamePrefix\": \"NodeRecordingRulesRuleGroup-Win\",\r\n
        \         \"RuleTitle\": \"Windows Recording Rules\"\r\n        },\r\n        \"rulesArmTemplate\":
        {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"NodeRecordingRulesRuleGroup-Win\",\r\n              \"minLength\": 1,\r\n
        \             \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Node Recording Rules RuleGroup for Windows\",\r\n                \"scopes\":
        \"[variables('scopes')]\",\r\n                \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"node:windows_node:sum\",\r\n
        \                   \"expression\": \"count (windows_system_system_up_time{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_num_cpu:sum\",\r\n                    \"expression\":
        \"count by (instance) (sum by (instance, core) (windows_cpu_time_total{job=\\\"windows-exporter\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_cpu_utilisation:avg5m\",\r\n                    \"expression\":
        \"1 - avg(rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_cpu_utilisation:avg5m\",\r\n                    \"expression\":
        \"1 - avg by (instance) (rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_memory_utilisation:\",\r\n                    \"expression\":
        \"1 -sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"})/sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_memory_MemFreeCached_bytes:sum\",\r\n                    \"expression\":
        \"sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"} + windows_memory_cache_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_totalCached_bytes:sum\",\r\n                    \"expression\":
        \"(windows_memory_cache_bytes{job=\\\"windows-exporter\\\"} + windows_memory_modified_page_list_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_standby_cache_core_bytes{job=\\\"windows-exporter\\\"} +
        windows_memory_standby_cache_normal_priority_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_standby_cache_reserve_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_memory_MemTotal_bytes:sum\",\r\n                    \"expression\":
        \"sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_bytes_available:sum\",\r\n                    \"expression\":
        \"sum by (instance) ((windows_memory_available_bytes{job=\\\"windows-exporter\\\"}))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_bytes_total:sum\",\r\n                    \"expression\":
        \"sum by (instance) (windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_memory_utilisation:ratio\",\r\n                    \"expression\":
        \"(node:windows_node_memory_bytes_total:sum - node:windows_node_memory_bytes_available:sum)
        / scalar(sum(node:windows_node_memory_bytes_total:sum))\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"node:windows_node_memory_utilisation:\",\r\n
        \                   \"expression\": \"1 - (node:windows_node_memory_bytes_available:sum
        / node:windows_node_memory_bytes_total:sum)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"node:windows_node_memory_swap_io_pages:irate\",\r\n
        \                   \"expression\": \"irate(windows_memory_swap_page_operations_total{job=\\\"windows-exporter\\\"}[5m])\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_disk_utilisation:avg_irate\",\r\n                    \"expression\":
        \"avg(irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_disk_utilisation:avg_irate\",\r\n                    \"expression\":
        \"avg by (instance) ((irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \                 }\r\n                ]\r\n              }\r\n            }\r\n
        \         ]\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n
        \     \"name\": \"NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n      \"type\":
        \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n      \"location\":
        \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \       \"displayInformation\": {\r\n          \"AlertRuleNamePrefix\": \"NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n
        \         \"RuleTitle\": \"Windows Recording Rules\"\r\n        },\r\n        \"rulesArmTemplate\":
        {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"NodeAndKubernetesRecordingRulesRuleGroup-Win\",\r\n              \"minLength\":
        1,\r\n              \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Node and Kubernetes Recording Rules RuleGroup for Windows\",\r\n                \"scopes\":
        \"[variables('scopes')]\",\r\n                \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"record\": \"node:windows_node_filesystem_usage:\",\r\n
        \                   \"expression\": \"max by (instance,volume)((windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"}
        - windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}) / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_filesystem_avail:\",\r\n                    \"expression\":
        \"max by (instance, volume) (windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}
        / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \":windows_node_net_utilisation:sum_irate\",\r\n
        \                   \"expression\": \"sum(irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_net_utilisation:sum_irate\",\r\n                    \"expression\":
        \"sum by (instance) ((irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \":windows_node_net_saturation:sum_irate\",\r\n                    \"expression\":
        \"sum(irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m]))
        + sum(irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"node:windows_node_net_saturation:sum_irate\",\r\n                    \"expression\":
        \"sum by (instance) ((irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \                 },\r\n                  {\r\n                    \"record\":
        \"windows_pod_container_available\",\r\n                    \"expression\":
        \"windows_container_available{job=\\\"windows-exporter\\\"} * on(container_id)
        group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_total_runtime\",\r\n
        \                   \"expression\": \"windows_container_cpu_usage_seconds_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_memory_usage\",\r\n
        \                   \"expression\": \"windows_container_memory_usage_commit_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_private_working_set_usage\",\r\n
        \                   \"expression\": \"windows_container_memory_usage_private_working_set_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_network_received_bytes_total\",\r\n
        \                   \"expression\": \"windows_container_network_receive_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"windows_container_network_transmitted_bytes_total\",\r\n
        \                   \"expression\": \"windows_container_network_transmit_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_memory_request\",\r\n
        \                   \"expression\": \"max by (namespace, pod, container) (kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_memory_limit\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_cpu_cores_request\",\r\n
        \                   \"expression\": \"max by (namespace, pod, container) (
        kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"kube_pod_windows_container_resource_cpu_cores_limit\",\r\n
        \                   \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n                  },\r\n
        \                 {\r\n                    \"record\": \"namespace_pod_container:windows_container_cpu_usage_seconds_total:sum_rate\",\r\n
        \                   \"expression\": \"sum by (namespace, pod, container) (rate(windows_container_total_runtime{}[5m]))\"\r\n
        \                 }\r\n                ]\r\n              }\r\n            }\r\n
        \         ]\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"subscriptions/79a7390d-3a85-432d-9f6f-a11a703c8b83/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2/providers/microsoft.alertsManagement/alertRuleRecommendations/KubernetesAlert-DefaultAlerts\",\r\n
        \     \"name\": \"KubernetesAlert-DefaultAlerts\",\r\n      \"type\": \"Microsoft.AlertsManagement/AlertRuleRecommendations\",\r\n
        \     \"location\": \"global\",\r\n      \"properties\": {\r\n        \"alertRuleType\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n        \"displayInformation\":
        {\r\n          \"AlertRuleNamePrefix\": \"KubernetesAlert-DefaultAlerts\",\r\n
        \         \"RuleTitle\": \"This would be the info message for prom\"\r\n        },\r\n
        \       \"rulesArmTemplate\": {\r\n          \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\r\n
        \         \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\": {\r\n
        \           \"targetResourceId\": {\r\n              \"type\": \"string\",\r\n
        \             \"defaultValue\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \           },\r\n            \"targetResourceName\": {\r\n              \"type\":
        \"string\",\r\n              \"defaultValue\": \"defaultazuremonitorworkspace-westus2\"\r\n
        \           },\r\n            \"actionGroupIds\": {\r\n              \"type\":
        \"array\",\r\n              \"defaultValue\": [],\r\n              \"metadata\":
        {\r\n                \"description\": \"Insert Action groups ids to attach
        them to the below alert rules.\"\r\n              }\r\n            },\r\n
        \           \"location\": {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"westus2\"\r\n            },\r\n            \"clusterNameForPrometheus\":
        {\r\n              \"type\": \"string\"\r\n            },\r\n            \"alertNamePrefix\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"KubernetesAlert-DefaultAlerts\",\r\n              \"minLength\": 1,\r\n
        \             \"metadata\": {\r\n                \"description\": \"prefix
        of the alert rule name\"\r\n              }\r\n            },\r\n            \"alertName\":
        {\r\n              \"type\": \"string\",\r\n              \"defaultValue\":
        \"[concat(parameters('alertNamePrefix'), ' - ', parameters('clusterNameForPrometheus'))]\",\r\n
        \             \"minLength\": 1,\r\n              \"metadata\": {\r\n                \"description\":
        \"Name of the alert rule\"\r\n              }\r\n            }\r\n          },\r\n
        \         \"variables\": {\r\n            \"scopes\": \"[array(parameters('targetResourceId'))]\",\r\n
        \           \"copy\": [\r\n              {\r\n                \"name\": \"actionsForPrometheusRuleGroups\",\r\n
        \               \"count\": \"[length(parameters('actionGroupIds'))]\",\r\n
        \               \"input\": {\r\n                  \"actiongroupId\": \"[parameters('actionGroupIds')[copyIndex('actionsForPrometheusRuleGroups')]]\"\r\n
        \               }\r\n              }\r\n            ]\r\n          },\r\n
        \         \"resources\": [\r\n            {\r\n              \"name\": \"[parameters('alertName')]\",\r\n
        \             \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n
        \             \"apiVersion\": \"2021-07-22-preview\",\r\n              \"location\":
        \"[parameters('location')]\",\r\n              \"properties\": {\r\n                \"description\":
        \"Kubernetes Alert RuleGroup-DefaultAlerts\",\r\n                \"scopes\":
        \"[variables('scopes')]\",\r\n                \"clusterName\": \"[parameters('clusterNameForPrometheus')]\",\r\n
        \               \"interval\": \"PT1M\",\r\n                \"rules\": [\r\n
        \                 {\r\n                    \"alert\": \"KubePodCrashLooping\",\r\n
        \                   \"expression\": \"max_over_time(kube_pod_container_status_waiting_reason{reason=\\\"CrashLoopBackOff\\\",
        job=\\\"kube-state-metrics\\\"}[5m]) >= 1\",\r\n                    \"for\":
        \"PT15M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubePodNotReady\",\r\n                    \"expression\": \"sum by (namespace,
        pod, cluster) (  max by(namespace, pod, cluster) (    kube_pod_status_phase{job=\\\"kube-state-metrics\\\",
        phase=~\\\"Pending|Unknown\\\"}  ) * on(namespace, pod, cluster) group_left(owner_kind)
        topk by(namespace, pod, cluster) (    1, max by(namespace, pod, owner_kind,
        cluster) (kube_pod_owner{owner_kind!=\\\"Job\\\"})  )) > 0\",\r\n                    \"for\":
        \"PT15M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeDeploymentReplicasMismatch\",\r\n                    \"expression\":
        \"(  kube_deployment_spec_replicas{job=\\\"kube-state-metrics\\\"}    >  kube_deployment_status_replicas_available{job=\\\"kube-state-metrics\\\"})
        and (  changes(kube_deployment_status_replicas_updated{job=\\\"kube-state-metrics\\\"}[10m])
        \   ==  0)\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeStatefulSetReplicasMismatch\",\r\n                    \"expression\":
        \"(  kube_statefulset_status_replicas_ready{job=\\\"kube-state-metrics\\\"}
        \   !=  kube_statefulset_status_replicas{job=\\\"kube-state-metrics\\\"})
        and (  changes(kube_statefulset_status_replicas_updated{job=\\\"kube-state-metrics\\\"}[10m])
        \   ==  0)\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeJobNotCompleted\",\r\n                    \"expression\": \"time() -
        max by(namespace, job_name, cluster) (kube_job_status_start_time{job=\\\"kube-state-metrics\\\"}
        \ and kube_job_status_active{job=\\\"kube-state-metrics\\\"} > 0) > 43200\",\r\n
        \                   \"labels\": {\r\n                      \"severity\": \"warning\"\r\n
        \                   },\r\n                    \"Severity\": 3,\r\n                    \"actions\":
        \"[variables('actionsForPrometheusRuleGroups')]\"\r\n                  },\r\n
        \                 {\r\n                    \"alert\": \"KubeJobFailed\",\r\n
        \                   \"expression\": \"kube_job_failed{job=\\\"kube-state-metrics\\\"}
        \ > 0\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeHpaReplicasMismatch\",\r\n                    \"expression\": \"(kube_horizontalpodautoscaler_status_desired_replicas{job=\\\"kube-state-metrics\\\"}
        \ !=kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"})
        \ and(kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}
        \ >kube_horizontalpodautoscaler_spec_min_replicas{job=\\\"kube-state-metrics\\\"})
        \ and(kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}
        \ <kube_horizontalpodautoscaler_spec_max_replicas{job=\\\"kube-state-metrics\\\"})
        \ and changes(kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}[15m])
        == 0\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeHpaMaxedOut\",\r\n                    \"expression\": \"kube_horizontalpodautoscaler_status_current_replicas{job=\\\"kube-state-metrics\\\"}
        \ ==kube_horizontalpodautoscaler_spec_max_replicas{job=\\\"kube-state-metrics\\\"}\",\r\n
        \                   \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeCPUQuotaOvercommit\",\r\n                    \"expression\": \"sum(min
        without(resource) (kube_resourcequota{job=\\\"kube-state-metrics\\\", type=\\\"hard\\\",
        resource=~\\\"(cpu|requests.cpu)\\\"}))  /sum(kube_node_status_allocatable{resource=\\\"cpu\\\",
        job=\\\"kube-state-metrics\\\"})  > 1.5\",\r\n                    \"for\":
        \"PT5M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeMemoryQuotaOvercommit\",\r\n                    \"expression\": \"sum(min
        without(resource) (kube_resourcequota{job=\\\"kube-state-metrics\\\", type=\\\"hard\\\",
        resource=~\\\"(memory|requests.memory)\\\"}))  /sum(kube_node_status_allocatable{resource=\\\"memory\\\",
        job=\\\"kube-state-metrics\\\"})  > 1.5\",\r\n                    \"for\":
        \"PT5M\",\r\n                    \"labels\": {\r\n                      \"severity\":
        \"warning\"\r\n                    },\r\n                    \"Severity\":
        3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeQuotaAlmostFull\",\r\n                    \"expression\": \"kube_resourcequota{job=\\\"kube-state-metrics\\\",
        type=\\\"used\\\"}  / ignoring(instance, job, type)(kube_resourcequota{job=\\\"kube-state-metrics\\\",
        type=\\\"hard\\\"} > 0)  > 0.9 < 1\",\r\n                    \"for\": \"PT15M\",\r\n
        \                   \"labels\": {\r\n                      \"severity\": \"warning\"\r\n
        \                   },\r\n                    \"Severity\": 3,\r\n                    \"actions\":
        \"[variables('actionsForPrometheusRuleGroups')]\"\r\n                  },\r\n
        \                 {\r\n                    \"alert\": \"KubeVersionMismatch\",\r\n
        \                   \"expression\": \"count by (cluster) (count by (git_version,
        cluster) (label_replace(kubernetes_build_info{job!~\\\"kube-dns|coredns\\\"},\\\"git_version\\\",\\\"$1\\\",\\\"git_version\\\",\\\"(v[0-9]*.[0-9]*).*\\\")))
        > 1\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeNodeNotReady\",\r\n                    \"expression\": \"kube_node_status_condition{job=\\\"kube-state-metrics\\\",condition=\\\"Ready\\\",status=\\\"true\\\"}
        == 0\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeNodeUnreachable\",\r\n                    \"expression\": \"(kube_node_spec_taint{job=\\\"kube-state-metrics\\\",key=\\\"node.kubernetes.io/unreachable\\\",effect=\\\"NoSchedule\\\"}
        unless ignoring(key,value) kube_node_spec_taint{job=\\\"kube-state-metrics\\\",key=~\\\"ToBeDeletedByClusterAutoscaler|cloud.google.com/impending-node-termination|aws-node-termination-handler/spot-itn\\\"})
        == 1\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeletTooManyPods\",\r\n                    \"expression\": \"count by(cluster,
        node) (  (kube_pod_status_phase{job=\\\"kube-state-metrics\\\",phase=\\\"Running\\\"}
        == 1) * on(instance,pod,namespace,cluster) group_left(node) topk by(instance,pod,namespace,cluster)
        (1, kube_pod_info{job=\\\"kube-state-metrics\\\"}))/max by(cluster, node)
        (  kube_node_status_capacity{job=\\\"kube-state-metrics\\\",resource=\\\"pods\\\"}
        != 1) > 0.95\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 },\r\n                  {\r\n                    \"alert\":
        \"KubeNodeReadinessFlapping\",\r\n                    \"expression\": \"sum(changes(kube_node_status_condition{status=\\\"true\\\",condition=\\\"Ready\\\"}[15m]))
        by (cluster, node) > 2\",\r\n                    \"for\": \"PT15M\",\r\n                    \"labels\":
        {\r\n                      \"severity\": \"warning\"\r\n                    },\r\n
        \                   \"Severity\": 3,\r\n                    \"actions\": \"[variables('actionsForPrometheusRuleGroups')]\"\r\n
        \                 }\r\n                ]\r\n              }\r\n            }\r\n
        \         ]\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}"
    headers:
      api-supported-versions:
      - 2023-01-01-preview
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '49079'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002",
      "name": "NodeRecordingRulesRuleGroup-cliakstest000002", "type": "Microsoft.AlertsManagement/prometheusRuleGroups",
      "location": "westus2", "properties": {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "instance:node_num_cpu:sum", "expression": "count without (cpu,
      mode) (  node_cpu_seconds_total{job=\"node\",mode=\"idle\"})"}, {"record": "instance:node_cpu_utilisation:rate5m",
      "expression": "1 - avg without (cpu) (  sum without (mode) (rate(node_cpu_seconds_total{job=\"node\",
      mode=~\"idle|iowait|steal\"}[5m])))"}, {"record": "instance:node_load1_per_cpu:ratio",
      "expression": "(  node_load1{job=\"node\"}/  instance:node_num_cpu:sum{job=\"node\"})"},
      {"record": "instance:node_memory_utilisation:ratio", "expression": "1 - (  (    node_memory_MemAvailable_bytes{job=\"node\"}    or    (      node_memory_Buffers_bytes{job=\"node\"}      +      node_memory_Cached_bytes{job=\"node\"}      +      node_memory_MemFree_bytes{job=\"node\"}      +      node_memory_Slab_bytes{job=\"node\"}    )  )/  node_memory_MemTotal_bytes{job=\"node\"})"},
      {"record": "instance:node_vmstat_pgmajfault:rate5m", "expression": "rate(node_vmstat_pgmajfault{job=\"node\"}[5m])"},
      {"record": "instance_device:node_disk_io_time_seconds:rate5m", "expression":
      "rate(node_disk_io_time_seconds_total{job=\"node\", device!=\"\"}[5m])"}, {"record":
      "instance_device:node_disk_io_time_weighted_seconds:rate5m", "expression": "rate(node_disk_io_time_weighted_seconds_total{job=\"node\",
      device!=\"\"}[5m])"}, {"record": "instance:node_network_receive_bytes_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_receive_bytes_total{job=\"node\",
      device!=\"lo\"}[5m]))"}, {"record": "instance:node_network_transmit_bytes_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_transmit_bytes_total{job=\"node\",
      device!=\"lo\"}[5m]))"}, {"record": "instance:node_network_receive_drop_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_receive_drop_total{job=\"node\",
      device!=\"lo\"}[5m]))"}, {"record": "instance:node_network_transmit_drop_excluding_lo:rate5m",
      "expression": "sum without (device) (  rate(node_network_transmit_drop_total{job=\"node\",
      device!=\"lo\"}[5m]))"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '2653'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.NodeRecordingRulesRuleGroup-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002\",\r\n
        \ \"name\": \"NodeRecordingRulesRuleGroup-cliakstest000002\",\r\n  \"type\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\": \"cliakstest000002\",\r\n
        \   \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"instance:node_num_cpu:sum\",\r\n
        \       \"expression\": \"count without (cpu, mode) (  node_cpu_seconds_total{job=\\\"node\\\",mode=\\\"idle\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"instance:node_cpu_utilisation:rate5m\",\r\n
        \       \"expression\": \"1 - avg without (cpu) (  sum without (mode) (rate(node_cpu_seconds_total{job=\\\"node\\\",
        mode=~\\\"idle|iowait|steal\\\"}[5m])))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_load1_per_cpu:ratio\",\r\n        \"expression\": \"(  node_load1{job=\\\"node\\\"}/
        \ instance:node_num_cpu:sum{job=\\\"node\\\"})\"\r\n      },\r\n      {\r\n
        \       \"record\": \"instance:node_memory_utilisation:ratio\",\r\n        \"expression\":
        \"1 - (  (    node_memory_MemAvailable_bytes{job=\\\"node\\\"}    or    (
        \     node_memory_Buffers_bytes{job=\\\"node\\\"}      +      node_memory_Cached_bytes{job=\\\"node\\\"}
        \     +      node_memory_MemFree_bytes{job=\\\"node\\\"}      +      node_memory_Slab_bytes{job=\\\"node\\\"}
        \   )  )/  node_memory_MemTotal_bytes{job=\\\"node\\\"})\"\r\n      },\r\n
        \     {\r\n        \"record\": \"instance:node_vmstat_pgmajfault:rate5m\",\r\n
        \       \"expression\": \"rate(node_vmstat_pgmajfault{job=\\\"node\\\"}[5m])\"\r\n
        \     },\r\n      {\r\n        \"record\": \"instance_device:node_disk_io_time_seconds:rate5m\",\r\n
        \       \"expression\": \"rate(node_disk_io_time_seconds_total{job=\\\"node\\\",
        device!=\\\"\\\"}[5m])\"\r\n      },\r\n      {\r\n        \"record\": \"instance_device:node_disk_io_time_weighted_seconds:rate5m\",\r\n
        \       \"expression\": \"rate(node_disk_io_time_weighted_seconds_total{job=\\\"node\\\",
        device!=\\\"\\\"}[5m])\"\r\n      },\r\n      {\r\n        \"record\": \"instance:node_network_receive_bytes_excluding_lo:rate5m\",\r\n
        \       \"expression\": \"sum without (device) (  rate(node_network_receive_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_network_transmit_bytes_excluding_lo:rate5m\",\r\n        \"expression\":
        \"sum without (device) (  rate(node_network_transmit_bytes_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_network_receive_drop_excluding_lo:rate5m\",\r\n        \"expression\":
        \"sum without (device) (  rate(node_network_receive_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      },\r\n      {\r\n        \"record\":
        \"instance:node_network_transmit_drop_excluding_lo:rate5m\",\r\n        \"expression\":
        \"sum without (device) (  rate(node_network_transmit_drop_total{job=\\\"node\\\",
        device!=\\\"lo\\\"}[5m]))\"\r\n      }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n
        \ }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '3096'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002",
      "name": "KubernetesRecordingRulesRuleGroup-cliakstest000002", "type": "Microsoft.AlertsManagement/prometheusRuleGroups",
      "location": "westus2", "properties": {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate",
      "expression": "sum by (cluster, namespace, pod, container) (  irate(container_cpu_usage_seconds_total{job=\"cadvisor\",
      image!=\"\"}[5m])) * on (cluster, namespace, pod) group_left(node) topk by (cluster,
      namespace, pod) (  1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=\"\"}))"},
      {"record": "node_namespace_pod_container:container_memory_working_set_bytes",
      "expression": "container_memory_working_set_bytes{job=\"cadvisor\", image!=\"\"}*
      on (namespace, pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace,
      pod, node) (kube_pod_info{node!=\"\"}))"}, {"record": "node_namespace_pod_container:container_memory_rss",
      "expression": "container_memory_rss{job=\"cadvisor\", image!=\"\"}* on (namespace,
      pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod, node)
      (kube_pod_info{node!=\"\"}))"}, {"record": "node_namespace_pod_container:container_memory_cache",
      "expression": "container_memory_cache{job=\"cadvisor\", image!=\"\"}* on (namespace,
      pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod, node)
      (kube_pod_info{node!=\"\"}))"}, {"record": "node_namespace_pod_container:container_memory_swap",
      "expression": "container_memory_swap{job=\"cadvisor\", image!=\"\"}* on (namespace,
      pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod, node)
      (kube_pod_info{node!=\"\"}))"}, {"record": "cluster:namespace:pod_memory:active:kube_pod_container_resource_requests",
      "expression": "kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (  (kube_pod_status_phase{phase=~\"Pending|Running\"}
      == 1))"}, {"record": "namespace_memory:kube_pod_container_resource_requests:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests",
      "expression": "kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (  (kube_pod_status_phase{phase=~\"Pending|Running\"}
      == 1))"}, {"record": "namespace_cpu:kube_pod_container_resource_requests:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "cluster:namespace:pod_memory:active:kube_pod_container_resource_limits",
      "expression": "kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (  (kube_pod_status_phase{phase=~\"Pending|Running\"}
      == 1))"}, {"record": "namespace_memory:kube_pod_container_resource_limits:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits",
      "expression": "kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}  *
      on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster) (
      (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1) )"}, {"record": "namespace_cpu:kube_pod_container_resource_limits:sum",
      "expression": "sum by (namespace, cluster) (    sum by (namespace, pod, cluster)
      (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}        )
      * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster)
      (          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1        )    ))"},
      {"record": "namespace_workload_pod:kube_pod_owner:relabel", "expression": "max
      by (cluster, namespace, workload, pod) (  label_replace(    label_replace(      kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"ReplicaSet\"},      \"replicaset\", \"$1\", \"owner_name\", \"(.*)\"    )
      * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace)
      (      1, max by (replicaset, namespace, owner_name) (        kube_replicaset_owner{job=\"kube-state-metrics\"}      )    ),    \"workload\",
      \"$1\", \"owner_name\", \"(.*)\"  ))", "labels": {"workload_type": "deployment"}},
      {"record": "namespace_workload_pod:kube_pod_owner:relabel", "expression": "max
      by (cluster, namespace, workload, pod) (  label_replace(    kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"DaemonSet\"},    \"workload\", \"$1\", \"owner_name\", \"(.*)\"  ))",
      "labels": {"workload_type": "daemonset"}}, {"record": "namespace_workload_pod:kube_pod_owner:relabel",
      "expression": "max by (cluster, namespace, workload, pod) (  label_replace(    kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"StatefulSet\"},    \"workload\", \"$1\", \"owner_name\", \"(.*)\"  ))",
      "labels": {"workload_type": "statefulset"}}, {"record": "namespace_workload_pod:kube_pod_owner:relabel",
      "expression": "max by (cluster, namespace, workload, pod) (  label_replace(    kube_pod_owner{job=\"kube-state-metrics\",
      owner_kind=\"Job\"},    \"workload\", \"$1\", \"owner_name\", \"(.*)\"  ))",
      "labels": {"workload_type": "job"}}, {"record": ":node_memory_MemAvailable_bytes:sum",
      "expression": "sum(  node_memory_MemAvailable_bytes{job=\"node\"} or  (    node_memory_Buffers_bytes{job=\"node\"}
      +    node_memory_Cached_bytes{job=\"node\"} +    node_memory_MemFree_bytes{job=\"node\"}
      +    node_memory_Slab_bytes{job=\"node\"}  )) by (cluster)"}, {"record": "cluster:node_cpu:ratio_rate5m",
      "expression": "sum(rate(node_cpu_seconds_total{job=\"node\",mode!=\"idle\",mode!=\"iowait\",mode!=\"steal\"}[5m]))
      by (cluster) /count(sum(node_cpu_seconds_total{job=\"node\"}) by (cluster, instance,
      cpu)) by (cluster)"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '7331'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.KubernetesRecordingRulesRuleGroup-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002\",\r\n
        \ \"name\": \"KubernetesRecordingRulesRuleGroup-cliakstest000002\",\r\n  \"type\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\": \"cliakstest000002\",\r\n
        \   \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate\",\r\n
        \       \"expression\": \"sum by (cluster, namespace, pod, container) (  irate(container_cpu_usage_seconds_total{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}[5m])) * on (cluster, namespace, pod) group_left(node) topk
        by (cluster, namespace, pod) (  1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node_namespace_pod_container:container_memory_working_set_bytes\",\r\n
        \       \"expression\": \"container_memory_working_set_bytes{job=\\\"cadvisor\\\",
        image!=\\\"\\\"}* on (namespace, pod) group_left(node) topk by(namespace,
        pod) (1,  max by(namespace, pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node_namespace_pod_container:container_memory_rss\",\r\n
        \       \"expression\": \"container_memory_rss{job=\\\"cadvisor\\\", image!=\\\"\\\"}*
        on (namespace, pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace,
        pod, node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n      },\r\n      {\r\n        \"record\":
        \"node_namespace_pod_container:container_memory_cache\",\r\n        \"expression\":
        \"container_memory_cache{job=\\\"cadvisor\\\", image!=\\\"\\\"}* on (namespace,
        pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod,
        node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n      },\r\n      {\r\n        \"record\":
        \"node_namespace_pod_container:container_memory_swap\",\r\n        \"expression\":
        \"container_memory_swap{job=\\\"cadvisor\\\", image!=\\\"\\\"}* on (namespace,
        pod) group_left(node) topk by(namespace, pod) (1,  max by(namespace, pod,
        node) (kube_pod_info{node!=\\\"\\\"}))\"\r\n      },\r\n      {\r\n        \"record\":
        \"cluster:namespace:pod_memory:active:kube_pod_container_resource_requests\",\r\n
        \       \"expression\": \"kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_memory:kube_pod_container_resource_requests:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests\",\r\n
        \       \"expression\": \"kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_cpu:kube_pod_container_resource_requests:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:namespace:pod_memory:active:kube_pod_container_resource_limits\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        (  (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_memory:kube_pod_container_resource_limits:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \ * on (namespace, pod, cluster)group_left() max by (namespace, pod, cluster)
        ( (kube_pod_status_phase{phase=~\\\"Pending|Running\\\"} == 1) )\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_cpu:kube_pod_container_resource_limits:sum\",\r\n
        \       \"expression\": \"sum by (namespace, cluster) (    sum by (namespace,
        pod, cluster) (        max by (namespace, pod, container, cluster) (          kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        \       ) * on(namespace, pod, cluster) group_left() max by (namespace, pod,
        cluster) (          kube_pod_status_phase{phase=~\\\"Pending|Running\\\"}
        == 1        )    ))\"\r\n      },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   label_replace(      kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"ReplicaSet\\\"},
        \     \\\"replicaset\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"    )
        * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace)
        (      1, max by (replicaset, namespace, owner_name) (        kube_replicaset_owner{job=\\\"kube-state-metrics\\\"}
        \     )    ),    \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"
        \ ))\",\r\n        \"labels\": {\r\n          \"workload_type\": \"deployment\"\r\n
        \       }\r\n      },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"DaemonSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \       \"labels\": {\r\n          \"workload_type\": \"daemonset\"\r\n        }\r\n
        \     },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"StatefulSet\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \       \"labels\": {\r\n          \"workload_type\": \"statefulset\"\r\n
        \       }\r\n      },\r\n      {\r\n        \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\",\r\n
        \       \"expression\": \"max by (cluster, namespace, workload, pod) (  label_replace(
        \   kube_pod_owner{job=\\\"kube-state-metrics\\\", owner_kind=\\\"Job\\\"},
        \   \\\"workload\\\", \\\"$1\\\", \\\"owner_name\\\", \\\"(.*)\\\"  ))\",\r\n
        \       \"labels\": {\r\n          \"workload_type\": \"job\"\r\n        }\r\n
        \     },\r\n      {\r\n        \"record\": \":node_memory_MemAvailable_bytes:sum\",\r\n
        \       \"expression\": \"sum(  node_memory_MemAvailable_bytes{job=\\\"node\\\"}
        or  (    node_memory_Buffers_bytes{job=\\\"node\\\"} +    node_memory_Cached_bytes{job=\\\"node\\\"}
        +    node_memory_MemFree_bytes{job=\\\"node\\\"} +    node_memory_Slab_bytes{job=\\\"node\\\"}
        \ )) by (cluster)\"\r\n      },\r\n      {\r\n        \"record\": \"cluster:node_cpu:ratio_rate5m\",\r\n
        \       \"expression\": \"sum(rate(node_cpu_seconds_total{job=\\\"node\\\",mode!=\\\"idle\\\",mode!=\\\"iowait\\\",mode!=\\\"steal\\\"}[5m]))
        by (cluster) /count(sum(node_cpu_seconds_total{job=\\\"node\\\"}) by (cluster,
        instance, cpu)) by (cluster)\"\r\n      }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n
        \ }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '8170'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:17:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002",
      "name": "NodeRecordingRulesRuleGroup-Win-cliakstest000002", "type": "Microsoft.AlertsManagement/prometheusRuleGroups",
      "location": "westus2", "properties": {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "node:windows_node:sum", "expression": "count (windows_system_system_up_time{job=\"windows-exporter\"})"},
      {"record": "node:windows_node_num_cpu:sum", "expression": "count by (instance)
      (sum by (instance, core) (windows_cpu_time_total{job=\"windows-exporter\"}))"},
      {"record": ":windows_node_cpu_utilisation:avg5m", "expression": "1 - avg(rate(windows_cpu_time_total{job=\"windows-exporter\",mode=\"idle\"}[5m]))"},
      {"record": "node:windows_node_cpu_utilisation:avg5m", "expression": "1 - avg
      by (instance) (rate(windows_cpu_time_total{job=\"windows-exporter\",mode=\"idle\"}[5m]))"},
      {"record": ":windows_node_memory_utilisation:", "expression": "1 -sum(windows_memory_available_bytes{job=\"windows-exporter\"})/sum(windows_os_visible_memory_bytes{job=\"windows-exporter\"})"},
      {"record": ":windows_node_memory_MemFreeCached_bytes:sum", "expression": "sum(windows_memory_available_bytes{job=\"windows-exporter\"}
      + windows_memory_cache_bytes{job=\"windows-exporter\"})"}, {"record": "node:windows_node_memory_totalCached_bytes:sum",
      "expression": "(windows_memory_cache_bytes{job=\"windows-exporter\"} + windows_memory_modified_page_list_bytes{job=\"windows-exporter\"}
      + windows_memory_standby_cache_core_bytes{job=\"windows-exporter\"} + windows_memory_standby_cache_normal_priority_bytes{job=\"windows-exporter\"}
      + windows_memory_standby_cache_reserve_bytes{job=\"windows-exporter\"})"}, {"record":
      ":windows_node_memory_MemTotal_bytes:sum", "expression": "sum(windows_os_visible_memory_bytes{job=\"windows-exporter\"})"},
      {"record": "node:windows_node_memory_bytes_available:sum", "expression": "sum
      by (instance) ((windows_memory_available_bytes{job=\"windows-exporter\"}))"},
      {"record": "node:windows_node_memory_bytes_total:sum", "expression": "sum by
      (instance) (windows_os_visible_memory_bytes{job=\"windows-exporter\"})"}, {"record":
      "node:windows_node_memory_utilisation:ratio", "expression": "(node:windows_node_memory_bytes_total:sum
      - node:windows_node_memory_bytes_available:sum) / scalar(sum(node:windows_node_memory_bytes_total:sum))"},
      {"record": "node:windows_node_memory_utilisation:", "expression": "1 - (node:windows_node_memory_bytes_available:sum
      / node:windows_node_memory_bytes_total:sum)"}, {"record": "node:windows_node_memory_swap_io_pages:irate",
      "expression": "irate(windows_memory_swap_page_operations_total{job=\"windows-exporter\"}[5m])"},
      {"record": ":windows_node_disk_utilisation:avg_irate", "expression": "avg(irate(windows_logical_disk_read_seconds_total{job=\"windows-exporter\"}[5m])
      + irate(windows_logical_disk_write_seconds_total{job=\"windows-exporter\"}[5m]))"},
      {"record": "node:windows_node_disk_utilisation:avg_irate", "expression": "avg
      by (instance) ((irate(windows_logical_disk_read_seconds_total{job=\"windows-exporter\"}[5m])
      + irate(windows_logical_disk_write_seconds_total{job=\"windows-exporter\"}[5m])))"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '3501'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.NodeRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n
        \ \"name\": \"NodeRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n  \"type\":
        \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\": \"cliakstest000002\",\r\n
        \   \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"node:windows_node:sum\",\r\n
        \       \"expression\": \"count (windows_system_system_up_time{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_num_cpu:sum\",\r\n
        \       \"expression\": \"count by (instance) (sum by (instance, core) (windows_cpu_time_total{job=\\\"windows-exporter\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_cpu_utilisation:avg5m\",\r\n
        \       \"expression\": \"1 - avg(rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_cpu_utilisation:avg5m\",\r\n
        \       \"expression\": \"1 - avg by (instance) (rate(windows_cpu_time_total{job=\\\"windows-exporter\\\",mode=\\\"idle\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_memory_utilisation:\",\r\n
        \       \"expression\": \"1 -sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"})/sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_memory_MemFreeCached_bytes:sum\",\r\n
        \       \"expression\": \"sum(windows_memory_available_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_cache_bytes{job=\\\"windows-exporter\\\"})\"\r\n      },\r\n
        \     {\r\n        \"record\": \"node:windows_node_memory_totalCached_bytes:sum\",\r\n
        \       \"expression\": \"(windows_memory_cache_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_modified_page_list_bytes{job=\\\"windows-exporter\\\"} +
        windows_memory_standby_cache_core_bytes{job=\\\"windows-exporter\\\"} + windows_memory_standby_cache_normal_priority_bytes{job=\\\"windows-exporter\\\"}
        + windows_memory_standby_cache_reserve_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_memory_MemTotal_bytes:sum\",\r\n
        \       \"expression\": \"sum(windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_memory_bytes_available:sum\",\r\n
        \       \"expression\": \"sum by (instance) ((windows_memory_available_bytes{job=\\\"windows-exporter\\\"}))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_memory_bytes_total:sum\",\r\n
        \       \"expression\": \"sum by (instance) (windows_os_visible_memory_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_memory_utilisation:ratio\",\r\n
        \       \"expression\": \"(node:windows_node_memory_bytes_total:sum - node:windows_node_memory_bytes_available:sum)
        / scalar(sum(node:windows_node_memory_bytes_total:sum))\"\r\n      },\r\n
        \     {\r\n        \"record\": \"node:windows_node_memory_utilisation:\",\r\n
        \       \"expression\": \"1 - (node:windows_node_memory_bytes_available:sum
        / node:windows_node_memory_bytes_total:sum)\"\r\n      },\r\n      {\r\n        \"record\":
        \"node:windows_node_memory_swap_io_pages:irate\",\r\n        \"expression\":
        \"irate(windows_memory_swap_page_operations_total{job=\\\"windows-exporter\\\"}[5m])\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_disk_utilisation:avg_irate\",\r\n
        \       \"expression\": \"avg(irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_disk_utilisation:avg_irate\",\r\n
        \       \"expression\": \"avg by (instance) ((irate(windows_logical_disk_read_seconds_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_logical_disk_write_seconds_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \     }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n  }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '4080'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:18:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002",
      "name": "NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002", "type":
      "Microsoft.AlertsManagement/prometheusRuleGroups", "location": "westus2", "properties":
      {"scopes": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2"],
      "enabled": true, "clusterName": "cliakstest000002", "interval": "PT1M", "rules":
      [{"record": "node:windows_node_filesystem_usage:", "expression": "max by (instance,volume)((windows_logical_disk_size_bytes{job=\"windows-exporter\"}
      - windows_logical_disk_free_bytes{job=\"windows-exporter\"}) / windows_logical_disk_size_bytes{job=\"windows-exporter\"})"},
      {"record": "node:windows_node_filesystem_avail:", "expression": "max by (instance,
      volume) (windows_logical_disk_free_bytes{job=\"windows-exporter\"} / windows_logical_disk_size_bytes{job=\"windows-exporter\"})"},
      {"record": ":windows_node_net_utilisation:sum_irate", "expression": "sum(irate(windows_net_bytes_total{job=\"windows-exporter\"}[5m]))"},
      {"record": "node:windows_node_net_utilisation:sum_irate", "expression": "sum
      by (instance) ((irate(windows_net_bytes_total{job=\"windows-exporter\"}[5m])))"},
      {"record": ":windows_node_net_saturation:sum_irate", "expression": "sum(irate(windows_net_packets_received_discarded_total{job=\"windows-exporter\"}[5m]))
      + sum(irate(windows_net_packets_outbound_discarded_total{job=\"windows-exporter\"}[5m]))"},
      {"record": "node:windows_node_net_saturation:sum_irate", "expression": "sum
      by (instance) ((irate(windows_net_packets_received_discarded_total{job=\"windows-exporter\"}[5m])
      + irate(windows_net_packets_outbound_discarded_total{job=\"windows-exporter\"}[5m])))"},
      {"record": "windows_pod_container_available", "expression": "windows_container_available{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_total_runtime",
      "expression": "windows_container_cpu_usage_seconds_total{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_memory_usage",
      "expression": "windows_container_memory_usage_commit_bytes{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_private_working_set_usage",
      "expression": "windows_container_memory_usage_private_working_set_bytes{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_network_received_bytes_total",
      "expression": "windows_container_network_receive_bytes_total{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "windows_container_network_transmitted_bytes_total",
      "expression": "windows_container_network_transmit_bytes_total{job=\"windows-exporter\"}
      * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\"kube-state-metrics\"})
      by(container, container_id, pod, namespace)"}, {"record": "kube_pod_windows_container_resource_memory_request",
      "expression": "max by (namespace, pod, container) (kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"})
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "kube_pod_windows_container_resource_memory_limit", "expression": "kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "kube_pod_windows_container_resource_cpu_cores_request", "expression": "max
      by (namespace, pod, container) ( kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"})
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "kube_pod_windows_container_resource_cpu_cores_limit", "expression": "kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}
      * on(container,pod,namespace) (windows_pod_container_available)"}, {"record":
      "namespace_pod_container:windows_container_cpu_usage_seconds_total:sum_rate",
      "expression": "sum by (namespace, pod, container) (rate(windows_container_total_runtime{}[5m]))"}]}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '4923'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.put_rules.NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: "{\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n
        \ \"name\": \"NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002\",\r\n
        \ \"type\": \"Microsoft.AlertsManagement/prometheusRuleGroups\",\r\n  \"location\":
        \"westus2\",\r\n  \"properties\": {\r\n    \"enabled\": true,\r\n    \"clusterName\":
        \"cliakstest000002\",\r\n    \"scopes\": [\r\n      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2\"\r\n
        \   ],\r\n    \"rules\": [\r\n      {\r\n        \"record\": \"node:windows_node_filesystem_usage:\",\r\n
        \       \"expression\": \"max by (instance,volume)((windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"}
        - windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}) / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_filesystem_avail:\",\r\n
        \       \"expression\": \"max by (instance, volume) (windows_logical_disk_free_bytes{job=\\\"windows-exporter\\\"}
        / windows_logical_disk_size_bytes{job=\\\"windows-exporter\\\"})\"\r\n      },\r\n
        \     {\r\n        \"record\": \":windows_node_net_utilisation:sum_irate\",\r\n
        \       \"expression\": \"sum(irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_net_utilisation:sum_irate\",\r\n
        \       \"expression\": \"sum by (instance) ((irate(windows_net_bytes_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \     },\r\n      {\r\n        \"record\": \":windows_node_net_saturation:sum_irate\",\r\n
        \       \"expression\": \"sum(irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m]))
        + sum(irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m]))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"node:windows_node_net_saturation:sum_irate\",\r\n
        \       \"expression\": \"sum by (instance) ((irate(windows_net_packets_received_discarded_total{job=\\\"windows-exporter\\\"}[5m])
        + irate(windows_net_packets_outbound_discarded_total{job=\\\"windows-exporter\\\"}[5m])))\"\r\n
        \     },\r\n      {\r\n        \"record\": \"windows_pod_container_available\",\r\n
        \       \"expression\": \"windows_container_available{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_total_runtime\",\r\n        \"expression\": \"windows_container_cpu_usage_seconds_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_memory_usage\",\r\n        \"expression\": \"windows_container_memory_usage_commit_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_private_working_set_usage\",\r\n        \"expression\":
        \"windows_container_memory_usage_private_working_set_bytes{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_network_received_bytes_total\",\r\n        \"expression\":
        \"windows_container_network_receive_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"windows_container_network_transmitted_bytes_total\",\r\n        \"expression\":
        \"windows_container_network_transmit_bytes_total{job=\\\"windows-exporter\\\"}
        * on(container_id) group_left(container, pod, namespace) max(kube_pod_container_info{job=\\\"kube-state-metrics\\\"})
        by(container, container_id, pod, namespace)\"\r\n      },\r\n      {\r\n        \"record\":
        \"kube_pod_windows_container_resource_memory_request\",\r\n        \"expression\":
        \"max by (namespace, pod, container) (kube_pod_container_resource_requests{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"kube_pod_windows_container_resource_memory_limit\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"memory\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"kube_pod_windows_container_resource_cpu_cores_request\",\r\n
        \       \"expression\": \"max by (namespace, pod, container) ( kube_pod_container_resource_requests{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"})
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"kube_pod_windows_container_resource_cpu_cores_limit\",\r\n
        \       \"expression\": \"kube_pod_container_resource_limits{resource=\\\"cpu\\\",job=\\\"kube-state-metrics\\\"}
        * on(container,pod,namespace) (windows_pod_container_available)\"\r\n      },\r\n
        \     {\r\n        \"record\": \"namespace_pod_container:windows_container_cpu_usage_seconds_total:sum_rate\",\r\n
        \       \"expression\": \"sum by (namespace, pod, container) (rate(windows_container_total_runtime{}[5m]))\"\r\n
        \     }\r\n    ],\r\n    \"interval\": \"PT1M\"\r\n  }\r\n}"
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '5570'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:18:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '299'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "sku": {"name": "Base", "tier": "Free"}, "identity":
      {"type": "SystemAssigned"}, "properties": {"kubernetesVersion": "1.25.6", "dnsPrefix":
      "cliakstest-clitestptfp5fag2-79a739", "agentPoolProfiles": [{"count": 3, "vmSize":
      "standard_d2s_v3", "osDiskSizeGB": 128, "osDiskType": "Managed", "kubeletDiskType":
      "OS", "workloadRuntime": "OCIContainer", "maxPods": 110, "osType": "Linux",
      "osSKU": "Ubuntu", "enableAutoScaling": false, "type": "VirtualMachineScaleSets",
      "mode": "System", "orchestratorVersion": "1.25.6", "upgradeSettings": {}, "powerState":
      {"code": "Running"}, "enableNodePublicIP": false, "enableCustomCATrust": false,
      "enableEncryptionAtHost": false, "enableUltraSSD": false, "enableFIPS": false,
      "networkProfile": {}, "name": "nodepool1"}], "linuxProfile": {"adminUsername":
      "azureuser", "ssh": {"publicKeys": [{"keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
      azcli_aks_live_test@example.com\n"}]}}, "servicePrincipalProfile": {"clientId":"00000000-0000-0000-0000-000000000001"},
      "oidcIssuerProfile": {"enabled": false}, "nodeResourceGroup": "MC_clitest000001_cliakstest000002_westus2",
      "enableRBAC": true, "enablePodSecurityPolicy": false, "networkProfile": {"networkPlugin":
      "kubenet", "podCidr": "10.244.0.0/16", "serviceCidr": "10.0.0.0/16", "dnsServiceIP":
      "10.0.0.10", "dockerBridgeCidr": "172.17.0.1/16", "outboundType": "loadBalancer",
      "loadBalancerSku": "Standard", "loadBalancerProfile": {"managedOutboundIPs":
      {"count": 1, "countIPv6": 0}, "effectiveOutboundIPs": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5"}],
      "backendPoolType": "nodeIPConfiguration"}, "podCidrs": ["10.244.0.0/16"], "serviceCidrs":
      ["10.0.0.0/16"], "ipFamilies": ["IPv4"]}, "identityProfile": {"kubeletidentity":
      {"resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool",
      "clientId":"00000000-0000-0000-0000-000000000001", "objectId":"00000000-0000-0000-0000-000000000001"}},
      "disableLocalAccounts": false, "securityProfile": {}, "storageProfile": {},
      "workloadAutoScalerProfile": {}, "azureMonitorProfile": {"metrics": {"enabled":
      true, "kubeStateMetrics": {"metricLabelsAllowlist": "", "metricAnnotationsAllowList":
      ""}}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '2802'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Updating\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Updating\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"Standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\": [\n      {\n
        \      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ],\n     \"backendPoolType\": \"nodeIPConfiguration\"\n    },\n
        \   \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"identityProfile\":
        {\n    \"kubeletidentity\": {\n     \"resourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"snapshotController\": {\n     \"enabled\": true\n    }\n
        \  },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n   },\n   \"workloadAutoScalerProfile\":
        {},\n   \"azureMonitorProfile\": {\n    \"metrics\": {\n     \"enabled\":
        true,\n     \"kubeStateMetrics\": {\n      \"metricLabelsAllowlist\": \"\",\n
        \     \"metricAnnotationsAllowList\": \"\"\n     }\n    }\n   }\n  },\n  \"identity\":
        {\n   \"type\": \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/1d535bb0-e1f0-477a-ac23-05115d14c9c9?api-version=2016-03-30
      cache-control:
      - no-cache
      content-length:
      - '4352'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:18:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/1d535bb0-e1f0-477a-ac23-05115d14c9c9?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"b05b531d-f0e1-7a47-ac23-05115d14c9c9\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:18:06.6840445Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:18:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/1d535bb0-e1f0-477a-ac23-05115d14c9c9?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"b05b531d-f0e1-7a47-ac23-05115d14c9c9\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:18:06.6840445Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:18:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/1d535bb0-e1f0-477a-ac23-05115d14c9c9?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"b05b531d-f0e1-7a47-ac23-05115d14c9c9\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:18:06.6840445Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:19:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/1d535bb0-e1f0-477a-ac23-05115d14c9c9?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"b05b531d-f0e1-7a47-ac23-05115d14c9c9\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:18:06.6840445Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:19:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/1d535bb0-e1f0-477a-ac23-05115d14c9c9?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"b05b531d-f0e1-7a47-ac23-05115d14c9c9\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:18:06.6840445Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:20:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/1d535bb0-e1f0-477a-ac23-05115d14c9c9?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"b05b531d-f0e1-7a47-ac23-05115d14c9c9\",\n  \"status\":
        \"Succeeded\",\n  \"startTime\": \"2023-05-12T10:18:06.6840445Z\",\n  \"endTime\":
        \"2023-05-12T10:20:20.8468603Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '170'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:20:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --enable-azuremonitormetrics --enable-managed-identity
        --enable-windows-recording-rules
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Succeeded\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Succeeded\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"Standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\": [\n      {\n
        \      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ],\n     \"backendPoolType\": \"nodeIPConfiguration\"\n    },\n
        \   \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"identityProfile\":
        {\n    \"kubeletidentity\": {\n     \"resourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"snapshotController\": {\n     \"enabled\": true\n    }\n
        \  },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n   },\n   \"workloadAutoScalerProfile\":
        {},\n   \"azureMonitorProfile\": {\n    \"metrics\": {\n     \"enabled\":
        true,\n     \"kubeStateMetrics\": {\n      \"metricLabelsAllowlist\": \"\",\n
        \     \"metricAnnotationsAllowList\": \"\"\n     }\n    }\n   }\n  },\n  \"identity\":
        {\n   \"type\": \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4354'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:20:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Succeeded\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Succeeded\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"Standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\": [\n      {\n
        \      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ],\n     \"backendPoolType\": \"nodeIPConfiguration\"\n    },\n
        \   \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"identityProfile\":
        {\n    \"kubeletidentity\": {\n     \"resourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"snapshotController\": {\n     \"enabled\": true\n    }\n
        \  },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n   },\n   \"workloadAutoScalerProfile\":
        {},\n   \"azureMonitorProfile\": {\n    \"metrics\": {\n     \"enabled\":
        true,\n     \"kubeStateMetrics\": {\n      \"metricLabelsAllowlist\": \"\",\n
        \     \"metricAnnotationsAllowList\": \"\"\n     }\n    }\n   }\n  },\n  \"identity\":
        {\n   \"type\": \"SystemAssigned\",\n   \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n
        \  \"tenantId\": \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\":
        {\n   \"name\": \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4354'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:20:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_dcra
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations?api-version=2022-06-01
  response:
    body:
      string: '{"value":[{"properties":{"description":"Promtheus data collection association
        between DCR, DCE and target AKS resource","dataCollectionRuleId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations/ContainerInsightsMetricsExtension-westus2-cliakstest000002","name":"ContainerInsightsMetricsExtension-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionRuleAssociations","etag":"\"4e08f56a-0000-0800-0000-645e12530000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:54.3369938Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:54.3369938Z"}}],"nextLink":null}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1058'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:20:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_dce_from_dcr
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"description":"DCR description","immutableId":"dcr-47f9c942a60a4808984936e13fba633e","dataCollectionEndpointId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002","dataSources":{"prometheusForwarder":[{"streams":["Microsoft-PrometheusMetrics"],"labelIncludeFilter":{},"name":"PrometheusDataSource"}]},"destinations":{"monitoringAccounts":[{"accountResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2","accountId":"ec050f19-1529-4ec2-9d0c-e6677ca07ac8","name":"MonitoringAccount1"}]},"dataFlows":[{"streams":["Microsoft-PrometheusMetrics"],"destinations":["MonitoringAccount1"]}],"provisioningState":"Succeeded"},"location":"westus2","kind":"Linux","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002","name":"MSProm-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionRules","etag":"\"4e08816a-0000-0800-0000-645e12510000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:25.8820682Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:52.4817462Z"}}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1497'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:20:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_dcr_if_prometheus_enabled
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: '{"properties":{"description":"DCR description","immutableId":"dcr-47f9c942a60a4808984936e13fba633e","dataCollectionEndpointId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002","dataSources":{"prometheusForwarder":[{"streams":["Microsoft-PrometheusMetrics"],"labelIncludeFilter":{},"name":"PrometheusDataSource"}]},"destinations":{"monitoringAccounts":[{"accountResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/DefaultResourceGroup-westus2/providers/microsoft.monitor/accounts/DefaultAzureMonitorWorkspace-westus2","accountId":"ec050f19-1529-4ec2-9d0c-e6677ca07ac8","name":"MonitoringAccount1"}]},"dataFlows":[{"streams":["Microsoft-PrometheusMetrics"],"destinations":["MonitoringAccount1"]}],"provisioningState":"Succeeded"},"location":"westus2","kind":"Linux","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002","name":"MSProm-westus2-cliakstest000002","type":"Microsoft.Insights/dataCollectionRules","etag":"\"4e08816a-0000-0800-0000-645e12510000\"","systemData":{"createdBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","createdByType":"Application","createdAt":"2023-05-12T10:17:25.8820682Z","lastModifiedBy":"3fac8b4e-cd90-4baa-a5d2-66d52bc8349d","lastModifiedByType":"Application","lastModifiedAt":"2023-05-12T10:17:52.4817462Z"}}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '1497'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:20:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_dcra
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations/ContainerInsightsMetricsExtension-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: ''
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:20:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_dcr
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionRules/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: ''
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:20:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_dce
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.Insights/dataCollectionEndpoints/MSProm-westus2-cliakstest000002?api-version=2022-06-01
  response:
    body:
      string: ''
    headers:
      api-supported-versions:
      - 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:20:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.NodeRecordingRulesRuleGroup-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:20:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.KubernetesRecordingRulesRuleGroup-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:20:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.NodeRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:21:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      api-supported-versions:
      - 2021-07-22-preview, 2023-03-01
      arr-disable-session-affinity:
      - 'true'
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:21:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.get_dcra
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002/providers/Microsoft.Insights/dataCollectionRuleAssociations?api-version=2022-06-01
  response:
    body:
      string: '{"value":[],"nextLink":null}'
    headers:
      api-supported-versions:
      - 2019-11-01-preview, 2021-04-01, 2021-09-01-preview, 2022-06-01, 2023-03-11
      cache-control:
      - no-cache
      content-length:
      - '28'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 12 May 2023 10:21:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:2bbfbac8-e1b0-44af-b9c6-3a40669d37e3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.NodeRecordingRulesRuleGroup-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Fri, 12 May 2023 10:21:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.KubernetesRecordingRulesRuleGroup-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/KubernetesRecordingRulesRuleGroup-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Fri, 12 May 2023 10:21:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.NodeRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Fri, 12 May 2023 10:21:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - python/3.8.10 (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29) AZURECLI/2.48.1
        azuremonitormetrics.delete_rule.NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstestowvpah
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.AlertsManagement/prometheusRuleGroups/NodeAndKubernetesRecordingRulesRuleGroup-Win-cliakstest000002?api-version=2023-03-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Fri, 12 May 2023 10:21:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 204
      message: No Content
- request:
    body: '{"location": "westus2", "sku": {"name": "Base", "tier": "Free"}, "identity":
      {"type": "SystemAssigned"}, "properties": {"kubernetesVersion": "1.25.6", "dnsPrefix":
      "cliakstest-clitestptfp5fag2-79a739", "agentPoolProfiles": [{"count": 3, "vmSize":
      "standard_d2s_v3", "osDiskSizeGB": 128, "osDiskType": "Managed", "kubeletDiskType":
      "OS", "workloadRuntime": "OCIContainer", "maxPods": 110, "osType": "Linux",
      "osSKU": "Ubuntu", "enableAutoScaling": false, "type": "VirtualMachineScaleSets",
      "mode": "System", "orchestratorVersion": "1.25.6", "upgradeSettings": {}, "powerState":
      {"code": "Running"}, "enableNodePublicIP": false, "enableCustomCATrust": false,
      "enableEncryptionAtHost": false, "enableUltraSSD": false, "enableFIPS": false,
      "networkProfile": {}, "name": "nodepool1"}], "linuxProfile": {"adminUsername":
      "azureuser", "ssh": {"publicKeys": [{"keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
      azcli_aks_live_test@example.com\n"}]}}, "servicePrincipalProfile": {"clientId":"00000000-0000-0000-0000-000000000001"},
      "oidcIssuerProfile": {"enabled": false}, "nodeResourceGroup": "MC_clitest000001_cliakstest000002_westus2",
      "enableRBAC": true, "enablePodSecurityPolicy": false, "networkProfile": {"networkPlugin":
      "kubenet", "podCidr": "10.244.0.0/16", "serviceCidr": "10.0.0.0/16", "dnsServiceIP":
      "10.0.0.10", "dockerBridgeCidr": "172.17.0.1/16", "outboundType": "loadBalancer",
      "loadBalancerSku": "Standard", "loadBalancerProfile": {"managedOutboundIPs":
      {"count": 1, "countIPv6": 0}, "effectiveOutboundIPs": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5"}],
      "backendPoolType": "nodeIPConfiguration"}, "podCidrs": ["10.244.0.0/16"], "serviceCidrs":
      ["10.0.0.0/16"], "ipFamilies": ["IPv4"]}, "identityProfile": {"kubeletidentity":
      {"resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool",
      "clientId":"00000000-0000-0000-0000-000000000001", "objectId":"00000000-0000-0000-0000-000000000001"}},
      "disableLocalAccounts": false, "securityProfile": {}, "storageProfile": {},
      "workloadAutoScalerProfile": {}, "azureMonitorProfile": {"metrics": {"enabled":
      false}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      Content-Length:
      - '2718'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Updating\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Updating\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"Standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\": [\n      {\n
        \      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ],\n     \"backendPoolType\": \"nodeIPConfiguration\"\n    },\n
        \   \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"identityProfile\":
        {\n    \"kubeletidentity\": {\n     \"resourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"snapshotController\": {\n     \"enabled\": true\n    }\n
        \  },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n   },\n   \"workloadAutoScalerProfile\":
        {},\n   \"azureMonitorProfile\": {\n    \"metrics\": {\n     \"enabled\":
        false\n    }\n   }\n  },\n  \"identity\": {\n   \"type\": \"SystemAssigned\",\n
        \  \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n   \"tenantId\":
        \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\": {\n   \"name\":
        \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/d8012523-40f1-43a7-8b73-e6f886b73977?api-version=2016-03-30
      cache-control:
      - no-cache
      content-length:
      - '4244'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:21:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/d8012523-40f1-43a7-8b73-e6f886b73977?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"232501d8-f140-a743-8b73-e6f886b73977\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:21:17.1548335Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:21:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/d8012523-40f1-43a7-8b73-e6f886b73977?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"232501d8-f140-a743-8b73-e6f886b73977\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:21:17.1548335Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:21:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/d8012523-40f1-43a7-8b73-e6f886b73977?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"232501d8-f140-a743-8b73-e6f886b73977\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:21:17.1548335Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:22:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/d8012523-40f1-43a7-8b73-e6f886b73977?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"232501d8-f140-a743-8b73-e6f886b73977\",\n  \"status\":
        \"InProgress\",\n  \"startTime\": \"2023-05-12T10:21:17.1548335Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '126'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:22:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/d8012523-40f1-43a7-8b73-e6f886b73977?api-version=2016-03-30
  response:
    body:
      string: "{\n  \"name\": \"232501d8-f140-a743-8b73-e6f886b73977\",\n  \"status\":
        \"Succeeded\",\n  \"startTime\": \"2023-05-12T10:21:17.1548335Z\",\n  \"endTime\":
        \"2023-05-12T10:23:00.023292Z\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '169'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:23:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks update
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --yes --output --disable-azuremonitormetrics
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: "{\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002\",\n
        \ \"location\": \"westus2\",\n  \"name\": \"cliakstest000002\",\n  \"type\":
        \"Microsoft.ContainerService/ManagedClusters\",\n  \"properties\": {\n   \"provisioningState\":
        \"Succeeded\",\n   \"powerState\": {\n    \"code\": \"Running\"\n   },\n   \"kubernetesVersion\":
        \"1.25.6\",\n   \"currentKubernetesVersion\": \"1.25.6\",\n   \"dnsPrefix\":
        \"cliakstest-clitestptfp5fag2-79a739\",\n   \"fqdn\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.hcp.westus2.azmk8s.io\",\n
        \  \"azurePortalFQDN\": \"cliakstest-clitestptfp5fag2-79a739-ov4h7wyy.portal.hcp.westus2.azmk8s.io\",\n
        \  \"agentPoolProfiles\": [\n    {\n     \"name\": \"nodepool1\",\n     \"count\":
        3,\n     \"vmSize\": \"standard_d2s_v3\",\n     \"osDiskSizeGB\": 128,\n     \"osDiskType\":
        \"Managed\",\n     \"kubeletDiskType\": \"OS\",\n     \"workloadRuntime\":
        \"OCIContainer\",\n     \"maxPods\": 110,\n     \"type\": \"VirtualMachineScaleSets\",\n
        \    \"enableAutoScaling\": false,\n     \"provisioningState\": \"Succeeded\",\n
        \    \"powerState\": {\n      \"code\": \"Running\"\n     },\n     \"orchestratorVersion\":
        \"1.25.6\",\n     \"currentOrchestratorVersion\": \"1.25.6\",\n     \"enableNodePublicIP\":
        false,\n     \"enableCustomCATrust\": false,\n     \"mode\": \"System\",\n
        \    \"enableEncryptionAtHost\": false,\n     \"enableUltraSSD\": false,\n
        \    \"osType\": \"Linux\",\n     \"osSKU\": \"Ubuntu\",\n     \"nodeImageVersion\":
        \"AKSUbuntu-2204gen2containerd-202304.20.0\",\n     \"upgradeSettings\": {},\n
        \    \"enableFIPS\": false,\n     \"networkProfile\": {}\n    }\n   ],\n   \"linuxProfile\":
        {\n    \"adminUsername\": \"azureuser\",\n    \"ssh\": {\n     \"publicKeys\":
        [\n      {\n       \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6KMZXmoqRKj+j4e28AhnTXr9JCOc0XesvyJXYxDvqLYirUlu0OidbAfdiMDitSn/k7Nzc2RTBNZm8aHud8JvihvJIASnGPxglsFqJqKI25pWzcT2C+hahA60pK/d47eDtEh/3Dwe2ZRZqG9f/65WZSb9p8DQbarqAA+Xs0kBgT61QE3iABnA22ewDwbCCiJSZPVBbq/Do21kZ/1aGpxwVC9RfhH1e1gEXz2NmhlIdhMwaXZFEuuFhd+ENEUtlkt68CtQxVEZP6Kx1sKldr3aUh/vmYLU26M1DTtm7EFJa9C4ciOIogbO8yi3LVTbXwELiMwiQvywQ14uJ80Fim8xt
        azcli_aks_live_test@example.com\\n\"\n      }\n     ]\n    }\n   },\n   \"servicePrincipalProfile\":
        {\n    \"clientId\":\"00000000-0000-0000-0000-000000000001\"\n   },\n   \"nodeResourceGroup\":
        \"MC_clitest000001_cliakstest000002_westus2\",\n   \"enableRBAC\": true,\n
        \  \"enablePodSecurityPolicy\": false,\n   \"enableLTS\": \"KubernetesOfficial\",\n
        \  \"networkProfile\": {\n    \"networkPlugin\": \"kubenet\",\n    \"loadBalancerSku\":
        \"Standard\",\n    \"loadBalancerProfile\": {\n     \"managedOutboundIPs\":
        {\n      \"count\": 1\n     },\n     \"effectiveOutboundIPs\": [\n      {\n
        \      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.Network/publicIPAddresses/d25318c0-4369-4a6b-b1ef-f187049b71f5\"\n
        \     }\n     ],\n     \"backendPoolType\": \"nodeIPConfiguration\"\n    },\n
        \   \"podCidr\": \"10.244.0.0/16\",\n    \"serviceCidr\": \"10.0.0.0/16\",\n
        \   \"dnsServiceIP\": \"10.0.0.10\",\n    \"dockerBridgeCidr\": \"172.17.0.1/16\",\n
        \   \"outboundType\": \"loadBalancer\",\n    \"podCidrs\": [\n     \"10.244.0.0/16\"\n
        \   ],\n    \"serviceCidrs\": [\n     \"10.0.0.0/16\"\n    ],\n    \"ipFamilies\":
        [\n     \"IPv4\"\n    ]\n   },\n   \"maxAgentPools\": 100,\n   \"identityProfile\":
        {\n    \"kubeletidentity\": {\n     \"resourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MC_clitest000001_cliakstest000002_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliakstest000002-agentpool\",\n
        \    \"clientId\":\"00000000-0000-0000-0000-000000000001\",\n     \"objectId\":\"00000000-0000-0000-0000-000000000001\"\n
        \   }\n   },\n   \"disableLocalAccounts\": false,\n   \"securityProfile\":
        {},\n   \"storageProfile\": {\n    \"diskCSIDriver\": {\n     \"enabled\":
        true,\n     \"version\": \"v1\"\n    },\n    \"fileCSIDriver\": {\n     \"enabled\":
        true\n    },\n    \"snapshotController\": {\n     \"enabled\": true\n    }\n
        \  },\n   \"oidcIssuerProfile\": {\n    \"enabled\": false\n   },\n   \"workloadAutoScalerProfile\":
        {},\n   \"azureMonitorProfile\": {\n    \"metrics\": {\n     \"enabled\":
        false\n    }\n   }\n  },\n  \"identity\": {\n   \"type\": \"SystemAssigned\",\n
        \  \"principalId\":\"00000000-0000-0000-0000-000000000001\",\n   \"tenantId\":
        \"72f988bf-86f1-41af-91ab-2d7cd011db47\"\n  },\n  \"sku\": {\n   \"name\":
        \"Base\",\n   \"tier\": \"Free\"\n  }\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4246'
      content-type:
      - application/json
      date:
      - Fri, 12 May 2023 10:23:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name --yes --no-wait
      User-Agent:
      - AZURECLI/2.48.1 azsdk-python-azure-mgmt-containerservice/22.0.0b Python/3.8.10
        (Linux-5.15.0-1037-azure-x86_64-with-glibc2.29)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-02-02-preview
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operations/c4286fb7-e90b-4f67-8a59-a563b4765e1f?api-version=2016-03-30
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 12 May 2023 10:23:20 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/operationresults/c4286fb7-e90b-4f67-8a59-a563b4765e1f?api-version=2016-03-30
      pragma:
      - no-cache
      server:
      - nginx
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
version: 1
