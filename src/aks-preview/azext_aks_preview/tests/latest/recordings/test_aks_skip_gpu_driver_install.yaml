interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks get-versions
      Connection:
      - keep-alive
      ParameterSetName:
      - -l --query
      User-Agent:
      - AZURECLI/2.61.0 (DOCKER) azsdk-python-core/1.28.0 Python/3.11.9 (Linux-5.15.153.1-microsoft-standard-WSL2-x86_64-with)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/eastus/kubernetesVersions?api-version=2024-04-02-preview
  response:
    body:
      string: "{\n \"values\": [\n  {\n   \"version\": \"1.29\",\n   \"capabilities\":
        {\n    \"supportPlan\": [\n     \"KubernetesOfficial\"\n    ]\n   },\n   \"patchVersions\":
        {\n    \"1.29.2\": {\n     \"upgrades\": [\n      \"1.29.4\",\n      \"1.30.0\"\n
        \    ]\n    },\n    \"1.29.4\": {\n     \"upgrades\": [\n      \"1.30.0\"\n
        \    ]\n    }\n   }\n  },\n  {\n   \"version\": \"1.28\",\n   \"capabilities\":
        {\n    \"supportPlan\": [\n     \"KubernetesOfficial\"\n    ]\n   },\n   \"isDefault\":
        true,\n   \"patchVersions\": {\n    \"1.28.5\": {\n     \"upgrades\": [\n
        \     \"1.28.9\",\n      \"1.29.4\",\n      \"1.29.2\"\n     ]\n    },\n    \"1.28.9\":
        {\n     \"upgrades\": [\n      \"1.29.4\",\n      \"1.29.2\"\n     ]\n    }\n
        \  }\n  },\n  {\n   \"version\": \"1.27\",\n   \"capabilities\": {\n    \"supportPlan\":
        [\n     \"KubernetesOfficial\",\n     \"AKSLongTermSupport\"\n    ]\n   },\n
        \  \"patchVersions\": {\n    \"1.27.13\": {\n     \"upgrades\": [\n      \"1.28.9\",\n
        \     \"1.28.5\"\n     ]\n    },\n    \"1.27.9\": {\n     \"upgrades\": [\n
        \     \"1.27.13\",\n      \"1.28.9\",\n      \"1.28.5\"\n     ]\n    }\n   }\n
        \ }\n ]\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '976'
      content-type:
      - application/json
      date:
      - Thu, 27 Jun 2024 20:56:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 5B2100350E224B039E8F8B4B44759529 Ref B: CO6AA3150220021 Ref C: 2024-06-27T20:57:00Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --location --node-count --windows-admin-username --windows-admin-password
        --load-balancer-sku --vm-set-type --network-plugin -k --ssh-key-value -o
      User-Agent:
      - AZURECLI/2.61.0 (DOCKER) azsdk-python-core/1.28.0 Python/3.11.9 (Linux-5.15.153.1-microsoft-standard-WSL2-x86_64-with)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-04-02-preview
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.ContainerService/managedClusters/cliakstest000002''
        under resource group ''clitest000001'' was not found. For more details please
        go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '244'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 27 Jun 2024 20:57:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: ADB3970B222647039E6EF57CC3223C2A Ref B: CO6AA3150218049 Ref C: 2024-06-27T20:57:00Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"location": "eastus", "sku": {"name": "Base", "tier": "Free"}, "identity":
      {"type": "SystemAssigned"}, "kind": "Base", "properties": {"kubernetesVersion":
      "1.29.4", "dnsPrefix": "cliakstest-clitestgajwhxxnr-8ecadf", "agentPoolProfiles":
      [{"count": 2, "vmSize": "Standard_DS2_v2", "osDiskSizeGB": 0, "workloadRuntime":
      "OCIContainer", "osType": "Linux", "enableAutoScaling": false, "type": "VirtualMachineScaleSets",
      "mode": "System", "orchestratorVersion": "1.29.4", "upgradeSettings": {}, "enableNodePublicIP":
      false, "enableCustomCATrust": false, "scaleSetPriority": "Regular", "scaleSetEvictionPolicy":
      "Delete", "spotMaxPrice": -1.0, "nodeTaints": [], "nodeInitializationTaints":
      [], "enableEncryptionAtHost": false, "enableUltraSSD": false, "enableFIPS":
      false, "networkProfile": {}, "securityProfile": {"sshAccess": "localuser"},
      "name": "nodepool1"}], "linuxProfile": {"adminUsername": "azureuser", "ssh":
      {"publicKeys": [{"keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCbIg1guRHbI0lV11wWDt1r2cUdcNd27CJsg+SfgC7miZeubtwUhbsPdhMQsfDyhOWHq1+ZL0M+nJZV63d/1dhmhtgyOqejUwrPlzKhydsbrsdUor+JmNJDdW01v7BXHyuymT8G4s09jCasNOwiufbP/qp72ruu0bIA1nySsvlf9pCQAuFkAnVnf/rFhUlOkhtRpwcq8SUNY2zRHR/EKb/4NWY1JzR4sa3q2fWIJdrrX0DvLoa5g9bIEd4Df79ba7v+yiUBOS0zT2ll+z4g9izHK3EO5d8hL4jYxcjKs+wcslSYRWrascfscLgMlMGh0CdKeNTDjHpGPncaf3Z+FwwwjWeuiNBxv7bJo13/8B/098KlVDl4GZqsoBCEjPyJfV6hO0y/LkRGkk7oHWKgeWAfKtfLItRp00eZ4fcJNK9kCaSMmEugoZWcI7NGbZXzqFWqbpRI7NcDP9+WIQ+i9U5vqWsqd/zng4kbuAJ6UuKqIzB0upYrLShfQE3SAck8oaLhJqqq56VfDuASNpJKidV+zq27HfSBmbXnkR/5AK337dc3MXKJypoK/QPMLKUAP5XLPbs+NddJQV7EZXd29DLgp+fRIg3edpKdO7ZErWhv7d+3Kws+e1Y+ypmR2WIVSwVyBEUfgv2C8Ts9gnTF4pNcEY/S2aBicz5Ew2+jdyGNQQ==
      test@example.com\n"}]}}, "windowsProfile": {"adminUsername": "azureuser1", "adminPassword":
      "replace-Password1234$"}, "addonProfiles": {}, "enableRBAC": true, "enablePodSecurityPolicy":
      false, "networkProfile": {"networkPlugin": "azure", "outboundType": "loadBalancer",
      "loadBalancerSku": "standard"}, "disableLocalAccounts": false, "storageProfile":
      {}, "bootstrapProfile": {"artifactSource": "Direct"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks create
      Connection:
      - keep-alive
      Content-Length:
      - '2073'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name --location --node-count --windows-admin-username --windows-admin-password
        --load-balancer-sku --vm-set-type --network-plugin -k --ssh-key-value -o
      User-Agent:
      - AZURECLI/2.61.0 (DOCKER) azsdk-python-core/1.28.0 Python/3.11.9 (Linux-5.15.153.1-microsoft-standard-WSL2-x86_64-with)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001/providers/Microsoft.ContainerService/managedClusters/cliakstest000002?api-version=2024-04-02-preview
  response:
    body:
      string: "{\n  \"code\": \"SkuNotAvailable\",\n  \"details\": null,\n  \"message\":
        \"Preflight validation check for resource(s) for container service cliakstest000002
        in resource group MC_clitest000001_cliakstest000002_eastus failed. Message:
        The requested VM size for resource 'Following SKUs have failed for Capacity
        Restrictions: Standard_DS2_v2' is currently not available in location 'eastus'.
        Please try another size or deploy to a different location or different zone.
        See https://aka.ms/azureskunotavailable for details.. Details: \",\n  \"subcode\":
        \"\"\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '539'
      content-type:
      - application/json
      date:
      - Thu, 27 Jun 2024 20:57:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 70BC1804FFCE44189AA6A7E5846E618C Ref B: CO6AA3150218049 Ref C: 2024-06-27T20:57:01Z'
    status:
      code: 400
      message: Bad Request
version: 1
