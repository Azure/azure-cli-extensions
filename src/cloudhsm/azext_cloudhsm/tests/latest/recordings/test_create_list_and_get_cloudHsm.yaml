interactions:
- request:
    body: '{"identity": {"userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cli-test-identity":
      {}}, "type": "UserAssigned"}, "location": "ukwest", "properties": {"autoGeneratedDomainNameLabelScope":
      "TenantReuse"}, "sku": {"family": "B", "name": "Standard_B1"}, "tags": {"UseMockHfc":
      "True", "MockHfcDelayInMs": "1"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - cloudhsm create
      Connection:
      - keep-alive
      Content-Length:
      - '420'
      Content-Type:
      - application/json
      ParameterSetName:
      - --name --resource-group --location --tags --domain-name-label-scope --mi-user-assigned
      User-Agent:
      - AZURECLI/2.74.0 azsdk-python-core/1.31.0 Python/3.12.10 (Linux-6.8.0-1027-azure-x86_64-with-glibc2.36)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002?api-version=2025-03-31
  response:
    body:
      string: '{"name":"cli000002","type":"Microsoft.HardwareSecurityModules/cloudHsmClusters","location":"ukwest","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002","sku":{"family":"B","name":"Standard_B1"},"properties":{"provisioningState":"Provisioning","statusMessage":null,"autoGeneratedDomainNameLabelScope":"TenantReuse","activationState":"NotDefined","hsms":[],"privateEndpointConnections":[],"publicNetworkAccess":"Disabled"},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cli-test-identity":{"principalId":null,"clientId":null}}},"tags":{"UseMockHfc":"True","MockHfcDelayInMs":"1"},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-06-13T14:36:47.2482008Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-06-13T14:36:47.2482008Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1054'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Jun 2025 14:36:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=8a7348a2-6b25-4382-8b23-151e1a3ae586/uksouth/a6f2e6e0-be53-4c0e-a922-d24878486bcf
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 12A4E1BE851841DF8EBF08669DB86553 Ref B: AMS231022012023 Ref C: 2025-06-13T14:36:46Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - cloudhsm create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --resource-group --location --tags --domain-name-label-scope --mi-user-assigned
      User-Agent:
      - AZURECLI/2.74.0 azsdk-python-core/1.31.0 Python/3.12.10 (Linux-6.8.0-1027-azure-x86_64-with-glibc2.36)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002?api-version=2025-03-31
  response:
    body:
      string: '{"name":"cli000002","type":"Microsoft.HardwareSecurityModules/cloudHsmClusters","location":"ukwest","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002","sku":{"family":"B","name":"Standard_B1"},"properties":{"provisioningState":"Provisioning","statusMessage":null,"autoGeneratedDomainNameLabelScope":"TenantReuse","activationState":"NotDefined","hsms":[],"privateEndpointConnections":[],"publicNetworkAccess":"Disabled"},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cli-test-identity":{"principalId":null,"clientId":null}}},"tags":{"UseMockHfc":"True","MockHfcDelayInMs":"1"},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-06-13T14:36:47.2482008Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-06-13T14:36:47.2482008Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1054'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Jun 2025 14:36:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: BF0DF38C3C704BB4A60CC0925038C0FD Ref B: AMS231022012023 Ref C: 2025-06-13T14:36:49Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - cloudhsm create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --resource-group --location --tags --domain-name-label-scope --mi-user-assigned
      User-Agent:
      - AZURECLI/2.74.0 azsdk-python-core/1.31.0 Python/3.12.10 (Linux-6.8.0-1027-azure-x86_64-with-glibc2.36)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002?api-version=2025-03-31
  response:
    body:
      string: '{"name":"cli000002","type":"Microsoft.HardwareSecurityModules/cloudHsmClusters","location":"ukwest","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002","sku":{"family":"B","name":"Standard_B1"},"properties":{"provisioningState":"Succeeded","statusMessage":"HSM
        cluster provisioning successful.","autoGeneratedDomainNameLabelScope":"TenantReuse","activationState":"NotActivated","hsms":[],"privateEndpointConnections":[],"publicNetworkAccess":"Disabled"},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cli-test-identity":{"principalId":null,"clientId":null}}},"tags":{"UseMockHfc":"True","MockHfcDelayInMs":"1"},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-06-13T14:36:47.2482008Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-06-13T14:36:47.2482008Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1087'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Jun 2025 14:37:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: E675D5BD44394FF8A3BF070CFB044549 Ref B: AMS231022012023 Ref C: 2025-06-13T14:37:19Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - cloudhsm list
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group
      User-Agent:
      - AZURECLI/2.74.0 azsdk-python-core/1.31.0 Python/3.12.10 (Linux-6.8.0-1027-azure-x86_64-with-glibc2.36)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters?api-version=2025-03-31
  response:
    body:
      string: '{"value":[{"name":"cli000002","type":"Microsoft.HardwareSecurityModules/cloudHsmClusters","location":"ukwest","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002","sku":{"family":"B","name":"Standard_B1"},"properties":{"provisioningState":"Succeeded","statusMessage":"HSM
        cluster provisioning successful.","autoGeneratedDomainNameLabelScope":"TenantReuse","activationState":"NotActivated","hsms":[],"privateEndpointConnections":[],"publicNetworkAccess":"Disabled"},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cli-test-identity":{"principalId":null,"clientId":null}}},"tags":{"UseMockHfc":"True","MockHfcDelayInMs":"1"},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-06-13T14:36:47.2482008Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-06-13T14:36:47.2482008Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1099'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Jun 2025 14:37:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - 97ca5622-d914-42f1-ba5c-2d14ac0fe372
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 02142FCE3F534D5E9A1CE3426474CB5C Ref B: AMS231032608051 Ref C: 2025-06-13T14:37:20Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - cloudhsm show
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --resource-group
      User-Agent:
      - AZURECLI/2.74.0 azsdk-python-core/1.31.0 Python/3.12.10 (Linux-6.8.0-1027-azure-x86_64-with-glibc2.36)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002?api-version=2025-03-31
  response:
    body:
      string: '{"name":"cli000002","type":"Microsoft.HardwareSecurityModules/cloudHsmClusters","location":"ukwest","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002","sku":{"family":"B","name":"Standard_B1"},"properties":{"provisioningState":"Succeeded","statusMessage":"HSM
        cluster provisioning successful.","autoGeneratedDomainNameLabelScope":"TenantReuse","activationState":"NotActivated","hsms":[],"privateEndpointConnections":[],"publicNetworkAccess":"Disabled"},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cli-test-identity":{"principalId":null,"clientId":null}}},"tags":{"UseMockHfc":"True","MockHfcDelayInMs":"1"},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-06-13T14:36:47.2482008Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-06-13T14:36:47.2482008Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1087'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Jun 2025 14:37:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 8774E6AF78F94287970700921F8FB4CD Ref B: AMS231020512035 Ref C: 2025-06-13T14:37:20Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"tags": {"UseMockHfc": "true", "MockHfcDelayInMs": "1", "UpdatedResource":
      "yes"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - cloudhsm update
      Connection:
      - keep-alive
      Content-Length:
      - '83'
      Content-Type:
      - application/json
      ParameterSetName:
      - --name --resource-group --tags
      User-Agent:
      - AZURECLI/2.74.0 azsdk-python-core/1.31.0 Python/3.12.10 (Linux-6.8.0-1027-azure-x86_64-with-glibc2.36)
    method: PATCH
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002?api-version=2025-03-31
  response:
    body:
      string: '{"name":"cli000002","type":"Microsoft.HardwareSecurityModules/cloudHsmClusters","location":"ukwest","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli000001/providers/Microsoft.HardwareSecurityModules/cloudHsmClusters/cli000002","sku":{"family":"B","name":"Standard_B1"},"properties":{"provisioningState":"Succeeded","statusMessage":"HSM
        cluster provisioning successful.","autoGeneratedDomainNameLabelScope":"TenantReuse","activationState":"NotActivated","hsms":[],"privateEndpointConnections":[],"publicNetworkAccess":"Disabled"},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cli-test-identity":{"principalId":null,"clientId":null}}},"tags":{"MockHfcDelayInMs":"1","UpdatedResource":"yes","UseMockHfc":"True"},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-06-13T14:36:47.2482008Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-06-13T14:37:21.364448Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Jun 2025 14:37:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=8a7348a2-6b25-4382-8b23-151e1a3ae586/uksouth/d534f548-fe03-47cf-9fb4-79973719c2ef
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 2C153BD5CCCC44AD860D6A6AD3AACD4B Ref B: AMS231020614051 Ref C: 2025-06-13T14:37:20Z'
    status:
      code: 200
      message: OK
version: 1
