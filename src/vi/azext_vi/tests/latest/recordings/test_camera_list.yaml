interactions:
  - request:
      body: null
      headers:
        Accept:
          - application/json
        Accept-Encoding:
          - gzip, deflate
        CommandName:
          - vi camera list
        Connection:
          - keep-alive
        Content-Type:
          - application/json
        ParameterSetName:
          - -g -c
        User-Agent:
          - AZURECLI/2.83.0 azsdk-python-core/1.38.0 Python/3.13.12 (Windows-11-10.0.26200-SP0)
      method: GET
      uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-vi-rg/providers/Microsoft.Kubernetes/connectedClusters/test-vi-connected-aks/Providers/Microsoft.KubernetesConfiguration/extensions?api-version=2021-05-01-preview
    response:
      body:
        string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-vi-rg/providers/Microsoft.Kubernetes/connectedClusters/test-vi-connected-aks/Providers/Microsoft.KubernetesConfiguration/extensions/test-vi","name":"test-vi","type":"Microsoft.KubernetesConfiguration/extensions","properties":{"extensionType":"microsoft.videoindexer","autoUpgradeMinorVersion":false,"releaseTrain":"dev","version":"1.3.281","scope":{"cluster":{"releaseNamespace":"video-indexer"}},"provisioningState":"Succeeded","installState":"Installed","configurationSettings":{"videoIndexer.endpointUri":"https://vi.media.dev.azure-int.net","videoIndexer.accountId":"*****","videoIndexer.accountResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/vi-fe-arc/providers/Microsoft.VideoIndexer/accounts/VI-FE-ARC-2","videoIndexer.mediaUploadsEnabled":"True","videoIndexer.liveVideoStreamEnabled":"True","videoIndexer.agents.enabled":"false","ViAi.mediaServerStreams.enabled":"True","storage.storageClass":"azurefile-csi-premium","storage.accessMode":"ReadWriteMany","ViAi.gpu.enabled":"False","ViAi.LiveSummarization.enabled":"True"}}}]}'
      headers:
        api-supported-versions:
          - 2021-05-01-preview
        cache-control:
          - no-cache
        content-length:
          - "4009"
        content-type:
          - application/json; charset=utf-8
        date:
          - Thu, 12 Feb 2026 14:14:56 GMT
        expires:
          - "-1"
        pragma:
          - no-cache
        strict-transport-security:
          - max-age=31536000; includeSubDomains
        x-cache:
          - CONFIG_NOCACHE
        x-content-type-options:
          - nosniff
        x-ms-operation-identifier:
          - tenantId=*****,objectId=*****
        x-ms-ratelimit-remaining-subscription-global-reads:
          - "16499"
        x-msedge-ref:
          - "Ref A: CA11857B7EF24E249BB22675D3BC3076 Ref B: TLV231050409060 Ref C: 2026-02-12T14:14:56Z"
      status:
        code: 200
        message: OK
  - request:
      body: '{"permissionType": "Contributor", "scope": "Account", "extensionId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-vi-rg/providers/Microsoft.Kubernetes/connectedClusters/test-vi-connected-aks/Providers/Microsoft.KubernetesConfiguration/extensions/test-vi"}'
      headers:
        Accept:
          - application/json
        Accept-Encoding:
          - gzip, deflate
        CommandName:
          - vi camera list
        Connection:
          - keep-alive
        Content-Length:
          - "301"
        Content-Type:
          - application/json
        ParameterSetName:
          - -g -c
        User-Agent:
          - AZURECLI/2.83.0 azsdk-python-core/1.38.0 Python/3.13.12 (Windows-11-10.0.26200-SP0)
      method: POST
      uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/vi-fe-arc/providers/Microsoft.VideoIndexer/accounts/VI-FE-ARC-2/generateExtensionAccessToken?api-version=2023-06-02-preview
    response:
      body:
        string: '{"accessToken":"*****"}'
      headers:
        access-control-allow-credentials:
          - "true"
        cache-control:
          - no-cache
        content-length:
          - "1336"
        content-type:
          - application/json; charset=utf-8
        date:
          - Thu, 12 Feb 2026 14:14:57 GMT
        expires:
          - "-1"
        pragma:
          - no-cache
        strict-transport-security:
          - max-age=31536000; includeSubDomains
        vary:
          - Accept-Encoding
        x-cache:
          - CONFIG_NOCACHE
        x-content-type-options:
          - nosniff
        x-ms-operation-identifier:
          - tenantId=*****,objectId=*****
        x-ms-providerhub-traffic:
          - "True"
        x-ms-ratelimit-remaining-subscription-global-writes:
          - "11999"
        x-ms-ratelimit-remaining-subscription-writes:
          - "799"
        x-msedge-ref:
          - "Ref A: 52549E6693534BC9B39A92D3A3EB148F Ref B: TLV231050412029 Ref C: 2026-02-12T14:14:56Z"
      status:
        code: 200
        message: OK
  - request:
      body: null
      headers:
        Accept:
          - "*/*"
        Accept-Encoding:
          - gzip, deflate
        Connection:
          - keep-alive
        User-Agent:
          - python-requests/2.32.4
      method: GET
      uri: https://vi.media.dev.azure-int.net/Accounts/*****/cameras
    response:
      body:
        string: '{"results":[{"id":"309b45b0-bcf6-4151-8f30-b720a5f27a02","name":"cars","description":"cars","status":"Online","rtspUrl":"rtsp://media-server.video-indexer:8554/cars","isPinned":true,"liveStreamingEnabled":true,"recordingEnabled":true,"recordingsRetentionInHours":72,"insightsRetentionInHours":4320,"deletionTime":null,"createTime":"2026-02-09T12:09:55.7733333+00:00","lastUpdateTime":"2026-02-09T17:02:07.3066667+00:00"}],"nextPage":{"pageSize":25,"skip":0,"done":true,"totalCount":1}}'
      headers:
        connection:
          - keep-alive
        content-length:
          - "1584"
        content-type:
          - application/json; charset=utf-8
        date:
          - Thu, 12 Feb 2026 14:14:58 GMT
        strict-transport-security:
          - max-age=31536000; includeSubDomains
        transfer-encoding:
          - chunked
        vary:
          - Accept-Encoding
      status:
        code: 200
        message: OK
version: 1
