interactions:
  - request:
      body: null
      headers:
        Accept:
          - application/json
        Accept-Encoding:
          - gzip, deflate
        CommandName:
          - vi camera add
        Connection:
          - keep-alive
        Content-Type:
          - application/json
        ParameterSetName:
          - -g -c --camera-name --rtsp-url
        User-Agent:
          - AZURECLI/2.83.0 azsdk-python-core/1.38.0 Python/3.13.12 (Windows-11-10.0.26200-SP0)
      method: GET
      uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-vi-rg/providers/Microsoft.Kubernetes/connectedClusters/test-vi-connected-aks/Providers/Microsoft.KubernetesConfiguration/extensions?api-version=2021-05-01-preview
    response:
      body:
        string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-vi-rg/providers/Microsoft.Kubernetes/connectedClusters/test-vi-connected-aks/Providers/Microsoft.KubernetesConfiguration/extensions/test-vi","name":"test-vi","type":"Microsoft.KubernetesConfiguration/extensions","properties":{"extensionType":"microsoft.videoindexer","autoUpgradeMinorVersion":false,"releaseTrain":"dev","version":"1.3.281","scope":{"cluster":{"releaseNamespace":"video-indexer"}},"provisioningState":"Succeeded","installState":"Installed","configurationSettings":{"videoIndexer.endpointUri":"https://vi.media.dev.azure-int.net","videoIndexer.accountId":"*****","videoIndexer.accountResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/vi-fe-arc/providers/Microsoft.VideoIndexer/accounts/VI-FE-ARC-2","videoIndexer.mediaUploadsEnabled":"True","videoIndexer.liveVideoStreamEnabled":"True","videoIndexer.agents.enabled":"false","ViAi.mediaServerStreams.enabled":"True","storage.storageClass":"azurefile-csi-premium","storage.accessMode":"ReadWriteMany","ViAi.gpu.enabled":"False","ViAi.LiveSummarization.enabled":"True"}}}]}'
      headers:
        api-supported-versions:
          - 2021-05-01-preview
        cache-control:
          - no-cache
        content-length:
          - "4009"
        content-type:
          - application/json; charset=utf-8
        date:
          - Sun, 15 Feb 2026 11:25:48 GMT
        expires:
          - "-1"
        pragma:
          - no-cache
        strict-transport-security:
          - max-age=31536000; includeSubDomains
        x-cache:
          - CONFIG_NOCACHE
        x-content-type-options:
          - nosniff
        x-ms-operation-identifier:
          - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=f5ac4fd8-e281-40da-84e2-4240abed4843/westus2/f4b3a5c0-19ac-4e3e-938f-3075ab2fed49
        x-ms-ratelimit-remaining-subscription-global-reads:
          - "16499"
        x-msedge-ref:
          - "Ref A: B8F55CD908CB4AFF91EBB1667B0D87DE Ref B: TLV231050411062 Ref C: 2026-02-15T11:25:47Z"
      status:
        code: 200
        message: OK
  - request:
      body: '{"permissionType": "Contributor", "scope": "Account", "extensionId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-vi-rg/providers/Microsoft.Kubernetes/connectedClusters/test-vi-connected-aks/Providers/Microsoft.KubernetesConfiguration/extensions/test-vi"}'
      headers:
        Accept:
          - application/json
        Accept-Encoding:
          - gzip, deflate
        CommandName:
          - vi camera add
        Connection:
          - keep-alive
        Content-Length:
          - "301"
        Content-Type:
          - application/json
        ParameterSetName:
          - -g -c --camera-name --rtsp-url
        User-Agent:
          - AZURECLI/2.83.0 azsdk-python-core/1.38.0 Python/3.13.12 (Windows-11-10.0.26200-SP0)
      method: POST
      uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/vi-fe-arc/providers/Microsoft.VideoIndexer/accounts/VI-FE-ARC-2/generateExtensionAccessToken?api-version=2023-06-02-preview
    response:
      body:
        string: '{"accessToken":"*****"}'
      headers:
        access-control-allow-credentials:
          - "true"
        cache-control:
          - no-cache
        content-length:
          - "1336"
        content-type:
          - application/json; charset=utf-8
        date:
          - Sun, 15 Feb 2026 11:25:49 GMT
        expires:
          - "-1"
        pragma:
          - no-cache
        strict-transport-security:
          - max-age=31536000; includeSubDomains
        vary:
          - Accept-Encoding
        x-cache:
          - CONFIG_NOCACHE
        x-content-type-options:
          - nosniff
        x-ms-operation-identifier:
          - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=f5ac4fd8-e281-40da-84e2-4240abed4843/westus2/ea927154-a880-49fa-a753-03528c191e7c
        x-ms-providerhub-traffic:
          - "True"
        x-ms-ratelimit-remaining-subscription-global-writes:
          - "11999"
        x-ms-ratelimit-remaining-subscription-writes:
          - "799"
        x-msedge-ref:
          - "Ref A: 717C18A5DD2B411F8DADBC020A238EFE Ref B: TLV231050409023 Ref C: 2026-02-15T11:25:48Z"
      status:
        code: 200
        message: OK
  - request:
      body:
        '{"Name": "test", "Description": "test", "RtspUrl": "rtsp://test", "LiveStreamingEnabled":
        true, "RecordingEnabled": true, "IsPinned": true, "RecordingsRetentionInHours":
        72}'
      headers:
        Accept:
          - "*/*"
        Accept-Encoding:
          - gzip, deflate
        Connection:
          - keep-alive
        Content-Length:
          - "173"
        Content-Type:
          - application/json
        User-Agent:
          - python-requests/2.32.4
      method: POST
      uri: https://vi.media.dev.azure-int.net/Accounts/*****/cameras
    response:
      body:
        string: '{"id":"4664de14-798e-4c96-813c-d7b8c5676be2","name":"test","description":"test","status":"Pending","rtspUrl":"rtsp://test/","presetId":null,"isPinned":true,"liveStreamingEnabled":true,"recordingEnabled":true,"recordingsRetentionInHours":72,"insightsRetentionInHours":4320,"deletionTime":null,"createTime":"2026-02-15T11:25:50.88+00:00","lastUpdateTime":"2026-02-15T11:25:50.88+00:00"}'
      headers:
        connection:
          - keep-alive
        content-length:
          - "384"
        content-type:
          - application/json; charset=utf-8
        date:
          - Sun, 15 Feb 2026 11:25:50 GMT
        strict-transport-security:
          - max-age=31536000; includeSubDomains
        transfer-encoding:
          - chunked
        vary:
          - Accept-Encoding
      status:
        code: 200
        message: OK
version: 1
