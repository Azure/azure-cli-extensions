# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for
# license information.
#
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.
# --------------------------------------------------------------------------

import os
from azure.cli.testsdk import ScenarioTest
from .. import try_manual, raise_if
from azure.cli.testsdk import ResourceGroupPreparer


TEST_DIR = os.path.abspath(os.path.join(os.path.abspath(__file__), '..'))


@try_manual
def setup(test, rg, rg_2):
    pass


# EXAMPLE: /ManagementAssociations/put/SolutionCreate
@try_manual
def step__managementassociations_put_solutioncreate(test, rg, rg_2):
    test.cmd('az operationsmanagement management-association create '
             '--name "{managementAssociation1}" '
             '--location "East US" '
             '--application-id "/subscriptions/{subscription_id}/resourcegroups/{rg_2}/providers/Microsoft.Appliance/Ap'
             'pliances/appliance1" '
             '--provider-name "providerName" '
             '--resource-group "{rg_2}" '
             '--resource-name "resourceName" '
             '--resource-type "resourceType"',
             checks=[])


# EXAMPLE: /ManagementAssociations/get/SolutionGet
@try_manual
def step__managementassociations_get_solutionget(test, rg, rg_2):
    test.cmd('az operationsmanagement management-association show '
             '--name "{managementAssociation1}" '
             '--provider-name "providerName" '
             '--resource-group "{rg_2}" '
             '--resource-name "resourceName" '
             '--resource-type "resourceType"',
             checks=[])


# EXAMPLE: /ManagementAssociations/get/SolutionList
@try_manual
def step__managementassociations_get_solutionlist(test, rg, rg_2):
    test.cmd('az operationsmanagement management-association list',
             checks=[])


# EXAMPLE: /ManagementConfigurations/put/ManagementConfigurationCreate
@try_manual
def step__managementconfigurations_put_managementconfigurationcreate(test, rg, rg_2):
    test.cmd('az operationsmanagement management-configuration create '
             '--name "{managementConfiguration1}" '
             '--parameters location="East US" '
             '--resource-group "{rg_2}"',
             checks=[])


# EXAMPLE: /ManagementConfigurations/get/SolutionGet
@try_manual
def step__managementconfigurations_get_solutionget(test, rg, rg_2):
    test.cmd('az operationsmanagement management-configuration show '
             '--name "{ManagementConfigurations_2}" '
             '--resource-group "{rg_2}"',
             checks=[])


# EXAMPLE: /ManagementConfigurations/get/SolutionList
@try_manual
def step__managementconfigurations_get_solutionlist(test, rg, rg_2):
    test.cmd('az operationsmanagement management-configuration list',
             checks=[])


# EXAMPLE: /Solutions/put/SolutionCreate
@try_manual
def step__solutions_put_solutioncreate(test, rg, rg_2):
    test.cmd('az operationsmanagement solution create '
             '--location "East US" '
             '--plan name="name1" product="product1" promotion-code="promocode1" publisher="publisher1" '
             '--properties contained-resources="/subscriptions/{subscription_id}/resourceGroups/{rg}/providers/provider'
             '1/resources/resource1" contained-resources="/subscriptions/{subscription_id}/resourceGroups/{rg}/provider'
             's/provider2/resources/resource2" referenced-resources="/subscriptions/{subscription_id}/resourceGroups/{r'
             'g}/providers/provider1/resources/resource2" referenced-resources="/subscriptions/{subscription_id}/resour'
             'ceGroups/{rg}/providers/provider2/resources/resource3" workspace-resource-id="/subscriptions/{subscriptio'
             'n_id}/resourceGroups/{rg}/providers/Microsoft.OperationalInsights/workspaces/ws1" '
             '--resource-group "{rg_2}" '
             '--name "{solution1}"',
             checks=[])


# EXAMPLE: /Solutions/get/SolutionGet
@try_manual
def step__solutions_get_solutionget(test, rg, rg_2):
    test.cmd('az operationsmanagement solution show '
             '--resource-group "{rg_2}" '
             '--name "{solution1}"',
             checks=[])


# EXAMPLE: /Solutions/get/SolutionList
@try_manual
def step__solutions_get_solutionlist(test, rg, rg_2):
    test.cmd('az operationsmanagement solution list '
             '--resource-group "{rg_2}"',
             checks=[])


# EXAMPLE: /Solutions/get/SolutionList
@try_manual
def step__solutions_get_solutionlist(test, rg, rg_2):
    test.cmd('az operationsmanagement solution list '
             '--resource-group "{rg_2}"',
             checks=[])


# EXAMPLE: /Solutions/patch/SolutionUpdate
@try_manual
def step__solutions_patch_solutionupdate(test, rg, rg_2):
    test.cmd('az operationsmanagement solution update '
             '--tags Dept="IT" Environment="Test" '
             '--resource-group "{rg_2}" '
             '--name "{solution1}"',
             checks=[])


# EXAMPLE: /ManagementAssociations/delete/SolutionDelete
@try_manual
def step__managementassociations_delete_solutiondelete(test, rg, rg_2):
    test.cmd('az operationsmanagement management-association delete '
             '--name "{ManagementAssociations_2}" '
             '--provider-name "providerName" '
             '--resource-group "{rg_2}" '
             '--resource-name "resourceName" '
             '--resource-type "resourceType"',
             checks=[])


# EXAMPLE: /ManagementConfigurations/delete/ManagementConfigurationDelete
@try_manual
def step__managementconfigurations_delete_managementconfigurationdelete(test, rg, rg_2):
    test.cmd('az operationsmanagement management-configuration delete '
             '--name "{ManagementConfigurations_2}" '
             '--resource-group "{rg_2}"',
             checks=[])


# EXAMPLE: /Solutions/delete/SolutionDelete
@try_manual
def step__solutions_delete_solutiondelete(test, rg, rg_2):
    test.cmd('az operationsmanagement solution delete '
             '--resource-group "{rg_2}" '
             '--name "{solution1}"',
             checks=[])


@try_manual
def cleanup(test, rg, rg_2):
    pass


@try_manual
def call_scenario(test, rg, rg_2):
    setup(test, rg, rg_2)
    step__managementassociations_put_solutioncreate(test, rg, rg_2)
    step__managementassociations_get_solutionget(test, rg, rg_2)
    step__managementassociations_get_solutionlist(test, rg, rg_2)
    step__managementconfigurations_put_managementconfigurationcreate(test, rg, rg_2)
    step__managementconfigurations_get_solutionget(test, rg, rg_2)
    step__managementconfigurations_get_solutionlist(test, rg, rg_2)
    step__solutions_put_solutioncreate(test, rg, rg_2)
    step__solutions_get_solutionget(test, rg, rg_2)
    step__solutions_get_solutionlist(test, rg, rg_2)
    step__solutions_get_solutionlist(test, rg, rg_2)
    step__solutions_patch_solutionupdate(test, rg, rg_2)
    step__managementassociations_delete_solutiondelete(test, rg, rg_2)
    step__managementconfigurations_delete_managementconfigurationdelete(test, rg, rg_2)
    step__solutions_delete_solutiondelete(test, rg, rg_2)
    cleanup(test, rg, rg_2)


@try_manual
class OperationsManagementClientScenarioTest(ScenarioTest):

    @ResourceGroupPreparer(name_prefix='clitestoperationsmanagement_rg2'[:7], key='rg', parameter_name='rg')
    @ResourceGroupPreparer(name_prefix='clitestoperationsmanagement_rg1'[:7], key='rg_2', parameter_name='rg_2')
    def test_operationsmanagement(self, rg, rg_2):

        self.kwargs.update({
            'subscription_id': self.get_subscription_id()
        })

        self.kwargs.update({
            'solution1': 'solution1',
            'managementAssociation1': 'managementAssociation1',
            'ManagementAssociations_2': 'managementAssociationName',
            'managementConfiguration1': 'managementConfiguration1',
            'ManagementConfigurations_2': 'managementConfigurationName',
        })

        call_scenario(self, rg, rg_2)
        raise_if()
