# --------------------------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
#
# Code generated by aaz-dev-tools
# --------------------------------------------------------------------------------------------

# pylint: disable=too-many-lines
# pylint: disable=too-many-statements

from knack.log import get_logger
from .aaz.latest.aks.safeguards._create import Create
from .aaz.latest.aks.safeguards._update import Update
from .aaz.latest.aks.safeguards._show import Show
from .aaz.latest.aks.safeguards._delete import Delete
from azure.cli.core.aaz import *
from azure.cli.core.azclierror import ArgumentUsageError

logger = get_logger(__name__)


<<<<<<< HEAD
def _validate_and_set_managed_cluster_argument(ctx):
    args = ctx.args
=======
def _validate_and_set_managed_cluster_argument(args):
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c
    has_managed_cluster = has_value(args.managed_cluster)
    has_rg_and_cluster = has_value(
        args.resource_group) and has_value(args.cluster_name)

    # Ensure exactly one of the two conditions is true
    if has_managed_cluster == has_rg_and_cluster:
        raise ArgumentUsageError(
            "You must provide either 'managed_cluster' or both 'resource_group' and 'cluster_name', but not both.")

    if not has_managed_cluster:
<<<<<<< HEAD
        args.managed_cluster = f"/subscriptions/{ctx.subscription_id}/resourceGroups/{args.resource_group}/providers/Microsoft.ContainerService/managedClusters/{args.cluster_name}"
=======
        args.managed_cluster = f"/subscriptions/{args.subscription_id}/resourceGroups/{args.resource_group}/providers/Microsoft.ContainerService/managedClusters/{args.cluster_name}"
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c


def _add_resource_group_cluster_name_subscription_id_args(_args_schema):
    _args_schema.resource_group = AAZResourceGroupNameArg(
        options=["-g", "--resource-group"],
        help="The name of the resource group. You can configure the default group using az configure --defaults group=<name>.",
        required=False,
    )
    _args_schema.cluster_name = AAZStrArg(
        options=["--name", "-n"],
        help="The name of the Managed Cluster.",
        required=False,
    )
<<<<<<< HEAD
=======
    _args_schema.subscription_id = AAZSubscriptionIdArg(
        options=["--subscription"],
        help="The ID of the target subscription. You can configure the default subscription using az account set --subscription NAME_OR_ID.",
        required=False,
    )
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c
    return _args_schema


class AKSSafeguardsShowCustom(Show):

    def pre_operations(self):
<<<<<<< HEAD
        _validate_and_set_managed_cluster_argument(self.ctx)
=======
        _validate_and_set_managed_cluster_argument(self.ctx.args)
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c

    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        _args_schema = super()._build_arguments_schema(*args, **kwargs)
<<<<<<< HEAD
        after_schema = _add_resource_group_cluster_name_subscription_id_args(
            _args_schema)
        return after_schema
=======
        return _add_resource_group_cluster_name_subscription_id_args(_args_schema)
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c


class AKSSafeguardsDeleteCustom(Delete):

    def pre_operations(self):
<<<<<<< HEAD
        _validate_and_set_managed_cluster_argument(self.ctx)
=======
        _validate_and_set_managed_cluster_argument(self.ctx.args)
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c

    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        _args_schema = super()._build_arguments_schema(*args, **kwargs)
        return _add_resource_group_cluster_name_subscription_id_args(_args_schema)


class AKSSafeguardsUpdateCustom(Update):

    def pre_operations(self):
<<<<<<< HEAD
        _validate_and_set_managed_cluster_argument(self.ctx)
=======
        _validate_and_set_managed_cluster_argument(self.ctx.args)
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c

    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        _args_schema = super()._build_arguments_schema(*args, **kwargs)
        return _add_resource_group_cluster_name_subscription_id_args(_args_schema)


class AKSSafeguardsCreateCustom(Create):

    def pre_operations(self):
<<<<<<< HEAD
        _validate_and_set_managed_cluster_argument(self.ctx)
=======
        _validate_and_set_managed_cluster_argument(self.ctx.args)
>>>>>>> 9e8d524281d638c59daad8a899ea953f66623a0c

    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        _args_schema = super()._build_arguments_schema(*args, **kwargs)
        return _add_resource_group_cluster_name_subscription_id_args(_args_schema)
