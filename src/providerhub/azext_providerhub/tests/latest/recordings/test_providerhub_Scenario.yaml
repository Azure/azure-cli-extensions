interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - providerhub manifest generate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --provider-namespace
      User-Agent:
      - AZURECLI/2.15.0 azsdk-python-providerhub/unknown Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ProviderHub/providerRegistrations/Microsoft.Contoso/generateManifest?api-version=2020-11-20
  response:
    body:
      string: '{"providerAuthorizations":[{"applicationId":"3d834152-5efa-46f7-85a4-a18c2b5d46f9","roleDefinitionId":"760505bf-dcfa-4311-b890-18da392a00b2"}],"namespace":"Microsoft.Contoso","providerVersion":"2.0","providerType":"Internal","resourceTypes":[{"name":"extensionresourcetype","routingType":"ProxyOnly,
        Extension","resourceValidation":"ReservedWords, ProfaneWords","endpoints":[{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://global.metarp.azure.com/","locations":[""],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"}],"linkedOperationRules":[]},{"name":"Operations","routingType":"ProxyOnly,
        Tenant","resourceValidation":"ReservedWords, ProfaneWords","allowedUnauthorizedActions":["microsoft.contoso/operations/read"],"endpoints":[{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://global.metarp.azure.com/","locations":[""],"timeout":"PT20S"}],"linkedOperationRules":[]},{"name":"clusters","routingType":"Default","resourceValidation":"ReservedWords,
        ProfaneWords","endpoints":[{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://eastus2euap.metarp.azure.com/rolelocation/eastus2euap/","locations":["East
        US 2 EUAP"],"requiredFeatures":["Microsoft.Contoso/RPaaSBridge"],"timeout":"PT20S"},{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://eastus.metarp.azure.com/rolelocation/eastus/","locations":["East
        US"],"requiredFeatures":["Microsoft.Contoso/RPaaSBridge"],"timeout":"PT20S"},{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://westeurope.metarp.azure.com/rolelocation/westeurope/","locations":["West
        Europe"],"requiredFeatures":["Microsoft.Contoso/RPaaSBridge"],"timeout":"PT20S"}],"extendedLocations":[{"type":"CustomLocation","supportedPolicy":"NotSpecified"}],"linkedOperationRules":[]},{"name":"Locations","routingType":"ProxyOnly","resourceValidation":"ReservedWords,
        ProfaneWords","endpoints":[{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://global.metarp.azure.com/","locations":[""],"timeout":"PT20S"}],"linkedOperationRules":[]},{"name":"locations/operationstatuses","routingType":"ProxyOnly,
        Tenant, LocationBased","resourceValidation":"ReservedWords, ProfaneWords","allowedUnauthorizedActions":["Microsoft.Contoso/Locations/OperationStatuses/read","Microsoft.Contoso/Locations/OperationStatuses/write"],"endpoints":[{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://eastus2euap.metarp.azure.com/rolelocation/eastus2euap/","locations":["East
        US 2 EUAP"],"timeout":"PT20S"},{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://eastus.metarp.azure.com/rolelocation/eastus/","locations":["East
        US"],"timeout":"PT20S"},{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://westeurope.metarp.azure.com/rolelocation/westeurope/","locations":["West
        Europe"],"timeout":"PT20S"}],"linkedOperationRules":[]},{"name":"towers","routingType":"Default","resourceValidation":"ReservedWords,
        ProfaneWords","endpoints":[{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://eastus2euap.metarp.azure.com/rolelocation/eastus2euap/","locations":["East
        US 2 EUAP"],"requiredFeatures":["Microsoft.Contoso/RPaaSBridge"],"timeout":"PT20S"},{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://eastus.metarp.azure.com/rolelocation/eastus/","locations":["East
        US"],"requiredFeatures":["Microsoft.Contoso/RPaaSBridge"],"timeout":"PT20S"},{"apiVersions":["2020-01-01-preview"],"endpointUri":"https://westeurope.metarp.azure.com/rolelocation/westeurope/","locations":["West
        Europe"],"requiredFeatures":["Microsoft.Contoso/RPaaSBridge"],"timeout":"PT20S"}],"extendedLocations":[{"type":"CustomLocation","supportedPolicy":"NotSpecified"}],"linkedOperationRules":[]},{"name":"employees","routingType":"Default","resourceValidation":"ReservedWords,
        ProfaneWords","endpoints":[{"apiVersions":["2018-11-01-preview","2020-01-01-preview","2019-01-01"],"endpointUri":"https://westus.metarp.azure.com/rolelocation/westus/","locations":["West
        US"],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"},{"apiVersions":["2018-11-01-preview","2020-01-01-preview","2019-01-01"],"endpointUri":"https://westcentralus.metarp.azure.com/rolelocation/westcentralus/","locations":["West
        Central US"],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"},{"apiVersions":["2018-11-01-preview","2020-01-01-preview","2019-01-01"],"endpointUri":"https://westeurope.metarp.azure.com/rolelocation/westeurope/","locations":["West
        Europe"],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"},{"apiVersions":["2018-11-01-preview","2020-01-01-preview","2019-01-01"],"endpointUri":"https://southeastasia.metarp.azure.com/rolelocation/southeastasia/","locations":["Southeast
        Asia"],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"},{"apiVersions":["2018-11-01-preview","2020-01-01-preview","2019-01-01"],"endpointUri":"https://westus2.metarp.azure.com/rolelocation/westus2/","locations":["West
        US 2"],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"},{"apiVersions":["2018-11-01-preview","2020-01-01-preview","2019-01-01"],"endpointUri":"https://eastus2euap.metarp.azure.com/rolelocation/eastus2euap/","locations":["East
        US 2 EUAP"],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"},{"apiVersions":["2018-11-01-preview","2020-01-01-preview","2019-01-01"],"endpointUri":"https://northeurope.metarp.azure.com/rolelocation/northeurope/","locations":["North
        Europe"],"requiredFeatures":["Microsoft.Contoso/RPaaSSampleApp"],"timeout":"PT20S"}],"linkedOperationRules":[{"linkedOperation":"CrossResourceGroupResourceMove","linkedAction":"Enabled"},{"linkedOperation":"CrossSubscriptionResourceMove","linkedAction":"Enabled"}]}],"management":{"manifestOwners":["SPARTA-PlatformServiceAdministrator"],"incidentRoutingService":"Contoso
        Resource Provider","incidentRoutingTeam":"Contoso Triage","incidentContactEmail":"helpme@contoso.com","serviceTreeInfos":[{"serviceId":"6f53185c-ea09-4fc3-9075-318dec805303","componentId":"6f53185c-ea09-4fc3-9075-318dec805303"}],"resourceAccessPolicy":"NotSpecified"},"capabilities":[{"quotaId":"CSP_2015-05-01","effect":"Allow"},{"quotaId":"CSP_MG_2017-12-01","effect":"Allow"}],"metadata":{"onboardedVia":"ProviderHub"},"globalNotificationEndpoints":[{"enabled":true,"endpointUri":"https://global.metarp.azure.com"}],"reRegisterSubscriptionMetadata":{"enabled":true,"concurrencyLimit":100}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '6441'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 11 Jan 2021 08:42:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Kestrel
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"environment": "Prod", "baselineArmManifestLocation": "EastUS2EUAP"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - providerhub manifest checkin
      Connection:
      - keep-alive
      Content-Length:
      - '69'
      Content-Type:
      - application/json
      ParameterSetName:
      - --environment --baseline-arm-manifest-location --provider-namespace
      User-Agent:
      - AZURECLI/2.15.0 azsdk-python-providerhub/unknown Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ProviderHub/providerRegistrations/Microsoft.Contoso/checkinManifest?api-version=2020-11-20
  response:
    body:
      string: '{"isCheckedIn":false,"statusMessage":"Manifest is successfully merged.
        Use the Default/Custom rollout (http://aka.ms/rpaasrollout) to roll out the
        manifest in ARM."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '165'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 11 Jan 2021 08:42:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Kestrel
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"specification": {"canary": {"regions": ["EastUS2EUAP"]}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - providerhub custom-rollout create
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json
      ParameterSetName:
      - --provider-namespace --rollout-name --canary --canary
      User-Agent:
      - AZURECLI/2.15.0 azsdk-python-providerhub/unknown Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ProviderHub/providerRegistrations/Microsoft.Contoso/customRollouts/canaryTesting01?api-version=2020-11-20
  response:
    body:
      string: '{"properties":{"provisioningState":"Succeeded","specification":{"canary":{"regions":["EastUS2EUAP"]}},"status":{"completedRegions":["EastUS2EUAP"],"failedOrSkippedRegions":{}}},"name":"canaryTesting01"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '202'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 11 Jan 2021 08:42:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Kestrel
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - providerhub custom-rollout show
      Connection:
      - keep-alive
      ParameterSetName:
      - --provider-namespace --rollout-name
      User-Agent:
      - AZURECLI/2.15.0 azsdk-python-providerhub/unknown Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ProviderHub/providerRegistrations/Microsoft.Contoso/customRollouts/canaryTesting01?api-version=2020-11-20
  response:
    body:
      string: '{"properties":{"provisioningState":"Succeeded","specification":{"canary":{"regions":["EastUS2EUAP"]}},"status":{"completedRegions":["EastUS2EUAP"],"failedOrSkippedRegions":{}}},"name":"canaryTesting01"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '202'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 11 Jan 2021 08:42:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Kestrel
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - providerhub custom-rollout list
      Connection:
      - keep-alive
      ParameterSetName:
      - --provider-namespace
      User-Agent:
      - AZURECLI/2.15.0 azsdk-python-providerhub/unknown Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ProviderHub/providerRegistrations/Microsoft.Contoso/customRollouts?api-version=2020-11-20
  response:
    body:
      string: '{"value":[{"properties":{"provisioningState":"Succeeded","specification":{"canary":{"regions":["Eastus2euap","brazilus","centraluseuap"]}},"status":{"completedRegions":["Eastus2euap","centraluseuap","brazilus"],"failedOrSkippedRegions":{}}},"name":"cr1"},{"properties":{"provisioningState":"Succeeded","specification":{"canary":{"regions":["centraluseuap"]}},"status":{"completedRegions":["centraluseuap"],"failedOrSkippedRegions":{}}},"name":"rolloutTest1"},{"properties":{"provisioningState":"Succeeded","specification":{"canary":{"regions":["EastUS2EUAP"]}},"status":{"completedRegions":["EastUS2EUAP"],"failedOrSkippedRegions":{}}},"name":"canaryTesting01"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '663'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 11 Jan 2021 08:42:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Kestrel
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
