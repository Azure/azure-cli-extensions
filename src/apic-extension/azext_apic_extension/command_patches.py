# --------------------------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
# --------------------------------------------------------------------------------------------

# This file patches the commands generated by aaz to provide expected user experience per product design
# Always use aaz to update the commands if it's possible
from .aaz.latest.apic.api import (
    Create as CreateAPI,
    Delete as DeleteAPI,
    List as ListAPI,
    Show as ShowAPI,
    Update as UpdateAPI
)
from .aaz.latest.apic.api.definition import (
    Create as CreateAPIDefinition,
    Delete as DeleteAPIDefinition,
    ExportSpecification as ExportAPIDefinition,
    ImportSpecification as ImportAPIDefinition,
    List as ListAPIDefinition,
    Show as ShowAPIDefinition,
    Update as UpdateAPIDefinition
)
from .aaz.latest.apic.api.version import (
    Create as CreateAPIVersion,
    Delete as DeleteAPIVersion,
    List as ListAPIVersion,
    Show as ShowAPIVersion,
    Update as UpdateAPIVersion
)
from .aaz.latest.apic.api.deployment import (
    Create as CreateAPIDeployment,
    Delete as DeleteAPIDeployment,
    List as ListAPIDeployment,
    Show as ShowAPIDeployment,
    Update as UpdateAPIDeployment
)
from .aaz.latest.apic.environment import (
    Create as CreateEnvironment,
    Delete as DeleteEnvironment,
    List as ListEnvironment,
    Show as ShowEnvironment,
    Update as UpdateEnvironment
)
from .aaz.latest.apic.metadata import (
    Create as CreateMetadata,
    Export as ExportMetadata
)
from .aaz.latest.apic.service import ImportFromApim


class DefaultWorkspaceParameter:
    # pylint: disable=too-few-public-methods
    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        # pylint: disable=protected-access
        args_schema = super()._build_arguments_schema(*args, **kwargs)
        args_schema.workspace_name._required = False
        args_schema.workspace_name._registered = False
        return args_schema

    def pre_operations(self):
        args = self.ctx.args
        args.workspace_name = "default"


# `az apic api` commands
class CreateAPIExtension(DefaultWorkspaceParameter, CreateAPI):
    pass


class DeleteAPIExtension(DefaultWorkspaceParameter, DeleteAPI):
    pass


class ListAPIExtension(DefaultWorkspaceParameter, ListAPI):
    pass


class ShowAPIExtension(DefaultWorkspaceParameter, ShowAPI):
    pass


class UpdateAPIExtension(DefaultWorkspaceParameter, UpdateAPI):
    pass


# `az apic api definition` commands
class CreateAPIDefinitionExtension(DefaultWorkspaceParameter, CreateAPIDefinition):
    pass


class DeleteAPIDefinitionExtension(DefaultWorkspaceParameter, DeleteAPIDefinition):
    pass


class ExportAPIDefinitionExtension(DefaultWorkspaceParameter, ExportAPIDefinition):
    pass


class ImportAPIDefinitionExtension(DefaultWorkspaceParameter, ImportAPIDefinition):
    pass


class ListAPIDefinitionExtension(DefaultWorkspaceParameter, ListAPIDefinition):
    pass


class ShowAPIDefinitionExtension(DefaultWorkspaceParameter, ShowAPIDefinition):
    pass


class UpdateAPIDefinitionExtension(DefaultWorkspaceParameter, UpdateAPIDefinition):
    pass


# `az apic api version` commands
class CreateAPIVersionExtension(DefaultWorkspaceParameter, CreateAPIVersion):
    pass


class DeleteAPIVersionExtension(DefaultWorkspaceParameter, DeleteAPIVersion):
    pass


class ListAPIVersionExtension(DefaultWorkspaceParameter, ListAPIVersion):
    pass


class ShowAPIVersionExtension(DefaultWorkspaceParameter, ShowAPIVersion):
    pass


class UpdateAPIVersionExtension(DefaultWorkspaceParameter, UpdateAPIVersion):
    pass


# `az apic api deployment` commands
class CreateAPIDeploymentExtension(DefaultWorkspaceParameter, CreateAPIDeployment):
    pass


class DeleteAPIDeploymentExtension(DefaultWorkspaceParameter, DeleteAPIDeployment):
    pass


class ListAPIDeploymentExtension(DefaultWorkspaceParameter, ListAPIDeployment):
    pass


class ShowAPIDeploymentExtension(DefaultWorkspaceParameter, ShowAPIDeployment):
    pass


class UpdateAPIDeploymentExtension(DefaultWorkspaceParameter, UpdateAPIDeployment):
    pass


# `az apic environment` commands
class CreateEnvironmentExtension(DefaultWorkspaceParameter, CreateEnvironment):
    pass


class DeleteEnvironmentExtension(DefaultWorkspaceParameter, DeleteEnvironment):
    pass


class ListEnvironmentExtension(DefaultWorkspaceParameter, ListEnvironment):
    pass


class ShowEnvironmentExtension(DefaultWorkspaceParameter, ShowEnvironment):
    pass


class UpdateEnvironmentExtension(DefaultWorkspaceParameter, UpdateEnvironment):
    pass


# `az apic metadata commands`
class CreateMetadataExtension(CreateMetadata):
    # pylint: disable=too-few-public-methods
    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        # pylint: disable=protected-access
        args_schema = super()._build_arguments_schema(*args, **kwargs)
        args_schema.assignments._required = True
        return args_schema


class ExportMetadataExtension(ExportMetadata):
    # pylint: disable=too-few-public-methods
    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        # pylint: disable=protected-access
        args_schema = super()._build_arguments_schema(*args, **kwargs)
        args_schema.assignments._required = True
        return args_schema


# `az apic service commands`
class ImportFromApimExtension(ImportFromApim):
    # pylint: disable=too-few-public-methods
    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        # pylint: disable=protected-access
        args_schema = super()._build_arguments_schema(*args, **kwargs)
        args_schema.source_resource_ids._required = True
        return args_schema
