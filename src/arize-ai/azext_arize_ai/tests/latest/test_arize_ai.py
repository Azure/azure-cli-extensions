# --------------------------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
#
# Code generated by aaz-dev-tools
# --------------------------------------------------------------------------------------------

from azure.cli.testsdk import *

class ArizeAiScenario(ScenarioTest):
    @ResourceGroupPreparer(name_prefix='cli_test_arize_ai', location="eastus")
    def test_arize_ai(self, resource_group):
        self.kwargs.update({
            'name': 'test2',
            'location': 'eastus',
            'marketplace_subscription_id': '61641157-140c-4b97-b365-30ff76d9f82e',
            'publisher_id': 'arizeai1657829589668',
            'offer_id': 'arize-liftr-0',
            'plan_id': 'liftr-test-0',
            'plan_name': 'Liftr Test 0',
            'term_unit': 'P1M',
            'term_id': 'gmz7xq9ge3py',
            'user_first_name': 'Yashika',
            'user_last_name': 'Jain',
            'user_email': 'yashikajain@microsoft.com',
            'user_upn': 'yashikajain@microsoft.com',
            'resource_group': 'yashika-rg-arize',
            'description': 'Test-Description'
        })

        # Create ArizeAi Organization
        self.cmd('az arize-ai observability-eval organization create --resource-group {resource_group} --organizationname {name} --location {location} '
                 '--marketplace \'{{"subscription-id": "{marketplace_subscription_id}", '
                 '"offer-details": {{"publisher-id": "{publisher_id}", "offer-id": "{offer_id}", "plan-id": "{plan_id}", "plan-name": "{plan_name}", "term-unit": "{term_unit}", "term-id": "{term_id}"}}}}\' '
                 '--user \'{{"first-name": "{user_first_name}", "last-name": "{user_last_name}", "email-address": "{user_email}", "upn": "{user_upn}"}}\' '
                 '--partner-properties \'{{"description": "{description}"}}\' ',
                 checks=[
                     self.check('name', '{name}'),
                 ])

        # List ArizeAi Organizations
        self.cmd('az arize-ai observability-eval organization list --resource-group {resource_group}',
                 checks=[])

        # Show ArizeAi Organization
        self.cmd('az arize-ai observability-eval organization show --resource-group {resource_group} --organizationname {name}',
                 checks=[
                     self.check('name', '{name}'),
                 ])
        
        # Update ArizeAi Organization
        self.cmd('az arize-ai observability-eval organization update --resource-group {resource_group} --organizationname {name} --tags {{"key1":"value1"}}',
                 checks=[
                     self.check('name', '{name}'),
                 ])

        # Delete ArizeAi Organization
        self.cmd('az arize-ai observability-eval organization delete --resource-group {resource_group} --organizationname {name} -y',
                 checks=[])
