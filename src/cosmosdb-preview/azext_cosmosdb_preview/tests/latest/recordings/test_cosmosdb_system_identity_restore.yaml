interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cosmosdb_system_identity_restore000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001","name":"cli_test_cosmosdb_system_identity_restore000001","type":"Microsoft.Resources/resourceGroups","location":"eastus2","tags":{"product":"azurecli","cause":"automation","test":"test_cosmosdb_system_identity_restore","date":"2024-06-19T21:33:58Z","module":"cosmosdb-preview"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '448'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:33:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 0FF21C3FB59244F7B8AAABEDCC619185 Ref B: BL2AA2030102037 Ref C: 2024-06-19T21:33:59Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '23'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/user1-000005?api-version=2023-01-31
  response:
    body:
      string: '{"location":"eastus2","tags":{},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/user1-000005","name":"user1-000005","type":"Microsoft.ManagedIdentity/userAssignedIdentities","properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalId":"20df0f6d-6eff-475a-ac5e-4141904202c3","clientId":"5de32a97-cf8f-4558-98f6-10e3f8750859"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '474'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:33:59 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/user1-000005
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
      x-msedge-ref:
      - 'Ref A: EBF7F5FA77EC4F8C9C79C7704012A800 Ref B: BL2AA2030104047 Ref C: 2024-06-19T21:33:59Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cosmosdb_system_identity_restore000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001","name":"cli_test_cosmosdb_system_identity_restore000001","type":"Microsoft.Resources/resourceGroups","location":"eastus2","tags":{"product":"azurecli","cause":"automation","test":"test_cosmosdb_system_identity_restore","date":"2024-06-19T21:33:58Z","module":"cosmosdb-preview"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '448'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 21B9C306EB9D44CC8E97ED1070787761 Ref B: BL2AA2010201047 Ref C: 2024-06-19T21:34:00Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '23'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/user2-000006?api-version=2023-01-31
  response:
    body:
      string: '{"location":"eastus2","tags":{},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/user2-000006","name":"user2-000006","type":"Microsoft.ManagedIdentity/userAssignedIdentities","properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalId":"d51553d7-c3d5-428d-9317-bee3f01720f5","clientId":"d57fc798-47f5-40e7-886f-a39eade1be68"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '474'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:01 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/user2-000006
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 1E69CE06DDDC4AA8998A77B72C15BD6C Ref B: BL2AA2010205029 Ref C: 2024-06-19T21:34:00Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - --location --name --resource-group
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007?api-version=2023-02-01
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.KeyVault/vaults/clikeyvault-000007''
        under resource group ''cli_test_cosmosdb_system_identity_restore000001'' was
        not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '263'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: C4BEF08D7E514A098ABF019E640AE6D6 Ref B: BL2AA2030103019 Ref C: 2024-06-19T21:34:03Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"location": "eastus2", "properties": {"tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [], "enableSoftDelete":
      true, "softDeleteRetentionInDays": 90, "enableRbacAuthorization": true, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Allow"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '319'
      Content-Type:
      - application/json
      ParameterSetName:
      - --location --name --resource-group
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007","name":"clikeyvault-000007","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"pjohari@microsoft.com","createdByType":"User","createdAt":"2024-06-19T21:34:03.536Z","lastModifiedBy":"pjohari@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-06-19T21:34:03.536Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"enableRbacAuthorization":true,"vaultUri":"https://clikeyvault-000007.vault.azure.net","provisioningState":"RegisteringDns","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '862'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.1215.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 4D5C5F40C0424AF1A4D2AC3DC01886CA Ref B: BL2AA2010203039 Ref C: 2024-06-19T21:34:03Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - --location --name --resource-group
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007","name":"clikeyvault-000007","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"pjohari@microsoft.com","createdByType":"User","createdAt":"2024-06-19T21:34:03.536Z","lastModifiedBy":"pjohari@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-06-19T21:34:03.536Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"enableRbacAuthorization":true,"vaultUri":"https://clikeyvault-000007.vault.azure.net/","provisioningState":"RegisteringDns","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '863'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.1215.0
      x-msedge-ref:
      - 'Ref A: 094B3428F15549E2A91C18886B2E41B0 Ref B: BL2AA2030104031 Ref C: 2024-06-19T21:34:05Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - --location --name --resource-group
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007","name":"clikeyvault-000007","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"pjohari@microsoft.com","createdByType":"User","createdAt":"2024-06-19T21:34:03.536Z","lastModifiedBy":"pjohari@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-06-19T21:34:03.536Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"enableRbacAuthorization":true,"vaultUri":"https://clikeyvault-000007.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '858'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.1215.0
      x-msedge-ref:
      - 'Ref A: DDCDB0597FBD4C679F6BDA37BF2B078F Ref B: BL2AA2030102011 Ref C: 2024-06-19T21:34:35Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault update
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription -g -n --enable-purge-protection
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007","name":"clikeyvault-000007","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"pjohari@microsoft.com","createdByType":"User","createdAt":"2024-06-19T21:34:03.536Z","lastModifiedBy":"pjohari@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-06-19T21:34:03.536Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"enableRbacAuthorization":true,"vaultUri":"https://clikeyvault-000007.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '858'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.1215.0
      x-msedge-ref:
      - 'Ref A: 29FDBDA53A0B4823BA33335BFEDE41B1 Ref B: BL2AA2030104009 Ref C: 2024-06-19T21:34:35Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [], "vaultUri":
      "https://clikeyvault-000007.vault.azure.net/", "enabledForDeployment": false,
      "enableSoftDelete": true, "softDeleteRetentionInDays": 90, "enableRbacAuthorization":
      true, "enablePurgeProtection": true, "provisioningState": "Succeeded", "publicNetworkAccess":
      "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault update
      Connection:
      - keep-alive
      Content-Length:
      - '450'
      Content-Type:
      - application/json
      ParameterSetName:
      - --subscription -g -n --enable-purge-protection
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.30.2 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_cosmosdb_system_identity_restore000001/providers/Microsoft.KeyVault/vaults/clikeyvault-000007","name":"clikeyvault-000007","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"pjohari@microsoft.com","createdByType":"User","createdAt":"2024-06-19T21:34:03.536Z","lastModifiedBy":"pjohari@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-06-19T21:34:36.311Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"enableRbacAuthorization":true,"enablePurgeProtection":true,"vaultUri":"https://clikeyvault-000007.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '887'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.1215.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
      x-msedge-ref:
      - 'Ref A: 03CEF403FCD140E4BA82DE6B10539784 Ref B: BL2AA2010203033 Ref C: 2024-06-19T21:34:36Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-keys/4.9.0b3 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: POST
    uri: https://clikeyvault-000007.vault.azure.net/keys/clikey-000008/create?api-version=7.5-preview.1
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/72f988bf-86f1-41af-91ab-2d7cd011db47",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.168.26.218;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.1551.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"kty": "RSA", "key_size": 3072, "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '65'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-keys/4.9.0b3 Python/3.12.4 (Windows-11-10.0.22631-SP0)
    method: POST
    uri: https://clikeyvault-000007.vault.azure.net/keys/clikey-000008/create?api-version=7.5-preview.1
  response:
    body:
      string: '{"error":{"code":"Forbidden","message":"Caller is not authorized to
        perform action on resource.\r\nIf role assignments, deny assignments or role
        definitions were changed recently, please observe propagation time.\r\nCaller:
        appid=04b07795-8ddb-461a-bbee-02f9e1bf7b46;oid=74023126-ad70-4efc-9210-d00c403cc872;iss=https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/\r\nAction:
        ''Microsoft.KeyVault/vaults/keys/create/action''\r\nResource: ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_cosmosdb_system_identity_restore000001/providers/microsoft.keyvault/vaults/clikeyvault-000007/keys/clikey-000008''\r\nAssignment:
        (not found)\r\nDenyAssignmentId: null\r\nDecisionReason: null \r\nVault: clikeyvault-000007;location=eastus2\r\n","innererror":{"code":"ForbiddenByRbac"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '806'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 19 Jun 2024 21:34:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.168.26.223;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.1551.1
    status:
      code: 403
      message: Forbidden
version: 1
