# --------------------------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
#
# Code generated by aaz-dev-tools
# --------------------------------------------------------------------------------------------
import os
import unittest
import time

from azure.cli.testsdk.scenario_tests import AllowLargeResponse
from azure.cli.testsdk import (ScenarioTest, ResourceGroupPreparer)

class OracleDatabaseScenario(ScenarioTest):
    @AllowLargeResponse(size_kb=10240)
    @ResourceGroupPreparer(name_prefix='cli_test_odba_rg')
    def test_oracledatabase_exadata(self, resource_group):
        subscription_id = self.get_subscription_id()
        self.kwargs.update({
            'infra_name': 'OFake_Infra_AzCLI',
            'location': 'eastus',
            'shape': 'Exadata.X9M',
            'tags': '{tagk1:tagv1}'
        })
        self.cmd('az oracle-database cloud-exadata-infrastructure create '
                         '--resource-group {rg} '
                         '--name {infra_name} '
                         '--zones 2 '
                         '--compute-count 2 '
                         '--display-name {infra_name} '
                         '--shape {shape} '
                         '--location {location} '
                         '--storage-count 3 --no-wait')
        self.cmd('az oracle-database cloud-exadata-infrastructure show '
                         '--resource-group PowerShellTestRg '
                         '--name OFake_PowerShellTestExaInfra ')
        self.cmd('az oracle-database cloud-exadata-infrastructure list '
                          '--resource-group PowerShellTestRg ')
        self.cmd('az oracle-database cloud-exadata-infrastructure database-server list '
                          '--cloudexadatainfrastructurename OFake_PowerShellTestExaInfra '
                          '--resource-group PowerShellTestRg ')
        self.cmd('az oracle-database cloud-vm-cluster create '
                          '--cloud-exadata-infrastructure-id /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/SDKTestRG/providers/Oracle.Database/cloudExadataInfrastructures/DemoExaInfra '
                          '--resource-group SDKTestRG '
                          '--location eastus '
                          '--cpu-core-count 6 '
                          '--data-storage-percentage 80 '
                          '--data-storage-size-in-tbs 2 '
                          '--db-node-storage-size-in-gbs 120 '
                          '--db-servers [\'ocid1.dbserver.oc1.iad.xxxxx\',\'ocid1.dbserver.oc1.iad.xxxxx\',\'ocid1.dbserver.oc1.iad.xxxxx\'] '
                          '--display-name OFake_VMC_AzCLI3 '
                          '--name OFake_VMC_AzCLI3 '
                          '--gi-version 19.0.0.0 '
                          '--hostname  rvilathu '
                          '--is-local-backup-enabled False '
                          '--is-sparse-diskgroup-enabled False '
                          '--license-model LicenseIncluded '
                          '--memory-size-in-gbs 60 '
                          '--ssh-public-keys \'ssh-rsa keykeykeykeykey generated-by-azure\' '
                          '--subnet-id /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/SDKTestRG/providers/Microsoft.Network/virtualNetworks/SDKVnet/subnets/SDKSubnet  '
                          '--time-zone UTC '
                          '--vnet-id /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/SDKTestRG/providers/Microsoft.Network/virtualNetworks/SDKVnet '
                          '--no-wait ')

