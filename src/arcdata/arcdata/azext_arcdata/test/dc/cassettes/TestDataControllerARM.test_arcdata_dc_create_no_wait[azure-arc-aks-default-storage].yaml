interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.0.0 Python/3.9.7 (Windows-10-10.0.19044-SP0)
      x-ms-client-request-id:
      - 591387a1-b961-11ec-8f9f-1ebfceef0777
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.AzureArcData/dataControllers
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR5dZ
        uc4/evS97/+S/wdC6kBEDAAAAA==
    headers:
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Length:
      - '133'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Mon, 11 Apr 2022 06:33:51 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      x-ms-correlation-request-id:
      - 45f090ee-fe26-4984-a223-de3add8bdd02
      x-ms-original-request-ids:
      - 42ad8472-666c-42fe-85d8-9248eb5db17f
      - eb5d5355-a7ea-4b52-9b4f-be812117e1bf
      - 983618ab-53ff-41e0-be07-67bb42d4ddff
      - 9c253307-bb12-4f62-b789-4bd56075f474
      - 6e693d82-5525-4518-ac3d-192db304bfc6
      - ff1ee6f2-429c-4b0f-a722-08cf6dfcbc42
      - 05f286f6-6fe1-4218-99db-43f947d28a39
      - 197653f8-f6ca-4839-88ac-e6c277e692df
      - bc555814-95db-4e6c-83bd-01bac9f5f49e
      - b2948cac-90f3-4e2c-b3b2-077cce58f299
      - 98c9fbe8-2148-4472-9d62-0c7e4b95d121
      - d683794e-a964-4491-a2fb-b9cc15efae6f
      - 134e08ac-ddb7-4afc-9e39-dd0d32adc6c2
      - 573432e4-d73c-43e5-9ea9-b9414d2c5ffb
      - b96461f9-2a18-4389-a175-3476700733a5
      - b40649d9-3673-443f-b04d-bf0213fe6783
      - d819a331-bddd-4ccb-9e31-a871c9be6aeb
      - 12148f88-acf6-406f-b6a0-97abc3636964
      - 005b70b9-1fa3-4389-8b42-7a86d9c76a57
      x-ms-ratelimit-remaining-subscription-reads:
      - '11999'
      x-ms-request-id:
      - 45f090ee-fe26-4984-a223-de3add8bdd02
      x-ms-routing-request-id:
      - WESTUS:20220411T063351Z:45f090ee-fe26-4984-a223-de3add8bdd02
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.27.1
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Kubernetes/connectedClusters
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR5dZ
        uc4/evS9X/xRMfvo0Ud3m/WkmdbFqi2qZXM3u79zsDfZfbh9kH2ab+9Ppve3D85ns+2D/Pzew9l5
        Ppnee3i3zptqXU/zz+tqvWru1hfb07LYbvOmvbuqq8tiltfN3S+KaV011Xk7/r3Wk7xe5vT93Wm1
        XObTNp+dlOumRTPzJoHgTz4afbTMFoTgR5Fv2usVvllY0G8joLV5Q+3LapphXPROnjXtutnL19mK
        vmizi+ajR7/4l4w+aq6p8eJp1mb090fTOs8IxJNreqPJs+XV7+n6mlYLetO2eCO4fNUwZvrxcUsf
        7e3s7W3v7G/v7r7Z+fTR7v1H9+6NP91/8PDgwac/RU1LwuSLalacFwBD7T/dn+zuzYjcn97ff7i9
        f7A/3T6YTj/d/nTvYPfg3sNJdu/hfu897f54tSoLHWTYJILKvd1H+w/HD3ce3Nvf2f+pj2j0NFXL
        tmgJi1/80aoultNilZVn4Ivz8/08v7d7b3u2/+B8ez/79MH2wcPdyfb0/s6n96b3H2T3H06oxzZf
        ZsuW33iwd/7w4GByvn3w6fnu9v5udr79cDebbO/NHkxnO7u7s8n+A7whiL9muh83TXGxzGfAhVhn
        lddtkWNm8Ndl0dCwiuXF65Zoi3fW02mez6g5EVymu7gk7PH9mt766EQ+5AbZBQ3t5XpC5Pm98usT
        QD4HpQDoi7Ozk5OL3+vk+OL0+Dr7av3yq596cnrvi9VPHazu/vTDnyxevvjp5/cWd/eevjrdP357
        v3zy5dmz9pMf/NTJJ4vJy+nsB+fNF0/Ln/h82Xx+/IP27Hr+01/eL3/Rxb0vvvrqq9+7/n1+6ur5
        7/P07MtXv+jZ1f3s4N3q7fnrn2w+2Ztd/eQXO9f37n21u6ia9nL1k0/mXxa793/vF59/ml3Xn7wj
        unz6bvbl0xcnv88n89+n/mr15vT3flM0n0+nB/nVm9/r4id3nr5++FUxf9W8+unX2dn9L99NzrL1
        6bPVm+vvzu5/8u3vfr5oXlxOm73yfP7u3e/1+svV7/Xl8qf3vvP8+KfKl/PlxbcXb549eTf7wevv
        Tu4ePDj+Ravluy9flN/9fO8X1fe/W/3k09/78vWLt9lP/eAnvlp/Ot9f3p1Ozp+Uy5OX84Pd9Xf2
        fvI79dn6zavF7/XtL/d/erXTfPF77f/E27dv6/ZFflB+/vucVD/9+ev6q72Hx7/XT2TPftHyZK/9
        yfl3Zt9evfzpV88PXv9e80/Ov/P7/PTnP/325OCTN6/uNc1PXX+y+Or1ov6J77zYLx7O2re7+cn9
        ZvWD3SeT+9fv6s/3T+9fvW0/f/nw/k/95Kd7Pzj96bNV++mni29/Z3k/u/r2FyfH059484u+3J0+
        a5+9ejr7qW+fv12uZ7NqefFm9smz61mzf0I8/vbt7/WTL55OfrLc+e7DN89/4tW9T4+//O7pd1+V
        +U9elF9c54tXq5+6e7Kor3/R7/Pth+9+Kpv+xPHr3/vFJ5dfzor8p37yuwdf7Lz58vXT+2ffnU6+
        /d3LX3R39aT5qZ/cuZ6eXXznwfzL8/Of+OTsefbk7k8tLxa/9xefFp8/bOafX3/nBzvfPivPP39z
        d/Hwk/v3D35qWT39qrn/nbsvquPyZfn2p3/wU/t1853fZ293Vv7er5pPf7A4PTnZPb2+v/Pg8id2
        Hiy/vGynb7NP7h/83qc/+dXbt5cvz7+Tv87vnb/eOTm+Oj0+/onPPiP2nhVNWxeTNUv+o4+yt9B3
        xfK8JhVQr6ftugajZz/Az9FHTk/+JGlGeWV3vLc7fkhftlWblS+qWX5SrZekNfZVePymn453PzVN
        T6raNN39VJSOCh5L45uC1XdP9ezdG+98eh8acJEtqYPZmSofTzZP362KmrVZAOXB9u4OoOzuPNrZ
        IcX1S77/S/4fH2jLEskGAAA=
    headers:
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Length:
      - '1556'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Mon, 11 Apr 2022 06:33:53 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      x-ms-correlation-request-id:
      - fd891192-c43f-4c6e-a1cd-deecf592d8d1
      x-ms-original-request-ids:
      - 007649e1-c866-4e58-a40f-e6f0c752afee
      - d8918ae9-710d-4e91-8f59-0979ec014c80
      - 9d46c298-345a-455a-a7ca-b473e4500fae
      - 2b18d1c5-233c-437f-bf62-f4348967d42b
      - 1a56e1cc-24e2-4afb-9e5e-ba5314fab630
      - ba033dac-87c0-44d3-82d0-69672d42c2d7
      - d3b1f519-c12d-47c8-9aa2-a4a98868ef30
      - 00544992-9857-4fe9-9efd-a672900a0b82
      - 6f0b8673-9440-4cec-afd7-7ddf3990d638
      - 3a67e919-01a7-456b-bec4-6f771a731268
      - f8879224-79f8-407d-ab9e-e97549b4e0e9
      - d1207f01-3520-43e9-bc45-f14a37557680
      - e586467a-4306-4a9e-a436-2660b886523e
      - e7210f4c-e998-4034-b8f3-90531463e696
      - bc096aa9-bfac-4980-a297-4045162a66f0
      - c0b44c38-d226-4ff6-9164-dd8b09839818
      - 1879ef34-9f1b-46cc-a32d-18741040cc58
      - c315701e-b1e5-4448-9896-a41ec8110c67
      - 3062075b-7c2d-486a-a2b5-439563178f7f
      x-ms-ratelimit-remaining-subscription-reads:
      - '11999'
      x-ms-request-id:
      - fd891192-c43f-4c6e-a1cd-deecf592d8d1
      x-ms-routing-request-id:
      - WESTUS:20220411T063353Z:fd891192-c43f-4c6e-a1cd-deecf592d8d1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.27.1
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Kubernetes/connectedClusters/cli-test-cluster/providers/Microsoft.KubernetesConfiguration/extensions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR5dZ
        uc4/evS9748+Wubv2ufF8u1Hj5brsvwl/w/xUGnmHAAAAA==
    headers:
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Mon, 11 Apr 2022 06:33:53 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      api-supported-versions:
      - 2020-07-01-Preview, 2021-05-01-preview, 2021-09-01, 2022-03-01, 2022-04-02-preview
      x-ms-correlation-request-id:
      - 5ac1ad0e-ba70-4e0a-8cf5-6c43f8927d92
      x-ms-ratelimit-remaining-subscription-reads:
      - '11998'
      x-ms-request-id:
      - 5ac1ad0e-ba70-4e0a-8cf5-6c43f8927d92
      x-ms-routing-request-id:
      - WESTUS:20220411T063353Z:5ac1ad0e-ba70-4e0a-8cf5-6c43f8927d92
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.27.1
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Kubernetes/connectedClusters/cli-test-cluster/providers/Microsoft.KubernetesConfiguration/extensions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR5dZ
        uc4/evS9748+Wubv2ufF8u1Hj5brsvwl/w/xUGnmHAAAAA==
    headers:
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Mon, 11 Apr 2022 06:33:54 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      api-supported-versions:
      - 2020-07-01-Preview, 2021-05-01-preview, 2021-09-01, 2022-03-01, 2022-04-02-preview
      x-ms-correlation-request-id:
      - 30483fbb-7b47-4da9-9c56-fa98bb881062
      x-ms-ratelimit-remaining-subscription-reads:
      - '11997'
      x-ms-request-id:
      - 30483fbb-7b47-4da9-9c56-fa98bb881062
      x-ms-routing-request-id:
      - WESTUS:20220411T063354Z:30483fbb-7b47-4da9-9c56-fa98bb881062
    status:
      code: 200
      message: OK
- request:
    body: "{\n    \"subscriptions\": [\n        \"a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39\"\n
      \   ],\n    \"query\": \"                resources                | where subscriptionId
      =~ 'a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39'                | where resourceGroup
      == 'rg-cli-test'                | where type =~ 'microsoft.kubernetes/connectedclusters'
      \               | where properties.provisioningState =~ 'succeeded'                |
      where name == 'cli-test-cluster'                | project clusterId=id, subscriptionId,
      clusterName=name                | join kind=leftouter (kubernetesconfigurationresources
      \                   | where subscriptionId =~ 'a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39'
      \                   | where resourceGroup == 'rg-cli-test'                    |
      where type =~ 'microsoft.kubernetesconfiguration/extensions'                    |
      where properties.ExtensionType =~ 'microsoft.arcdataservices'                    |
      where (properties.ProvisioningState =~ 'succeeded' or properties.InstallState
      =~ 'installed')                    | project extensionId=id, subscriptionId,
      namespace=properties.Scope.cluster.ReleaseNamespace)                on $left.subscriptionId
      == $right.subscriptionId                | where extensionId contains clusterId
      \               | extend namespace=tostring(namespace)                | where
      namespace =~ 'test-cl'                | join (resources                    |
      where subscriptionId =~ 'a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39'                    |
      where resourceGroup == 'rg-cli-test'                    | where type =~ 'microsoft.extendedLocation/customLocations'
      \                   | where properties.provisioningState =~ 'succeeded'                    |
      extend hostClusterId = tostring(properties.hostResourceId)                    |
      extend namespace = tostring(properties.namespace)                    | project
      hostClusterId, customLocationName=name, namespace)                on $left.clusterId
      == $right.hostClusterId and $left.namespace == $right.namespace                |
      project clusterName, namespace, customLocationName            \"\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '2076'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.27.1
    method: POST
    uri: https://mock-host/providers/Microsoft.ResourceGraph/resources
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR23V
        ZuWrfFrVs+ajRzujj6bVetnyb7OszT569L3vjz46z6Z5S1/j9zpv1mX7pl4vp1mbzz56RN+WTf7R
        L/l/AF94fd1MAAAA
    headers:
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Mon, 11 Apr 2022 06:33:55 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Server:
      - Kestrel
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      x-ms-correlation-request-id:
      - 2e9ece51-22e3-4e31-9d3b-9d626d8994d2
      x-ms-ratelimit-remaining-tenant-reads:
      - '11999'
      x-ms-ratelimit-remaining-tenant-resource-requests:
      - '14'
      x-ms-request-id:
      - 2e9ece51-22e3-4e31-9d3b-9d626d8994d2
      x-ms-routing-request-id:
      - WESTUS:20220411T063355Z:2e9ece51-22e3-4e31-9d3b-9d626d8994d2
      x-ms-user-quota-remaining:
      - '14'
      x-ms-user-quota-resets-after:
      - 00:00:05
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"mode": "incremental", "debugSetting": {"detailLevel":
      "none"}, "parameters": {"apiVersion": {"value": "2021-09-01"}, "apiVersion_1":
      {"value": "2018-09-01-preview"}, "apiVersion_2": {"value": "2018-09-01-preview"},
      "apiVersion_3": {"value": "2021-08-15"}, "apiVersion_4": {"value": "2021-11-01"},
      "imagePullPolicy": {"value": "Always"}, "parentResource": {"value": "Microsoft.Kubernetes/connectedClusters/cli-test-cluster"},
      "resourceName": {"value": "test-cl-ext"}, "namespace": {"value": "test-cl"},
      "releaseTrain": {"value": "stable"}, "version": {"value": "1.1.19211001"}, "imageRegistry":
      {"value": "mcr.microsoft.com"}, "imageVersion": {"value": "mcr.microsoft.com/arcdata/arc-bootstrapper:v1.5.0_2022-04-05"},
      "imageUsername": {"value": ""}, "imagePassword": {"value": ""}, "roleNameGuid_1":
      {"value": "07e058ab-1d22-4475-b195-d8b17b335979"}, "roleDefinitionId_1": {"value":
      "/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"},
      "resourceName_1": {"value": "07e058ab-1d22-4475-b195-d8b17b335979"}, "roleNameGuid_2":
      {"value": "734dd7c2-be0a-486d-a66a-66a32d21b956"}, "roleDefinitionId_2": {"value":
      "/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Authorization/roleDefinitions/3913510d-42f4-4e42-8a64-420c390055eb"},
      "resourceName_2": {"value": "734dd7c2-be0a-486d-a66a-66a32d21b956"}, "resourceName_3":
      {"value": "test-cl"}, "customLocationId_3": {"value": "/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.ExtendedLocation/customLocations/test-cl"},
      "location_3": {"value": "eastus2euap"}, "hostResourceId_3": {"value": "/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Kubernetes/connectedClusters/cli-test-cluster"},
      "namespace_3": {"value": "test-cl"}, "clusterExtensionIds_3": {"value": ["/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Kubernetes/connectedClusters/cli-test-cluster/providers/Microsoft.KubernetesConfiguration/extensions/test-cl-ext"]},
      "namespace_4": {"value": "test-cl"}, "connectionMode_4": {"value": "direct"},
      "controllerName_4": {"value": "cli-test-dc"}, "metricsAndLogsDashboardUsername_4":
      {"value": "username"}, "metricsAndLogsDashboardPassword_4": {"value": "Placeholder001"},
      "customLocationId_4": {"value": "/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.ExtendedLocation/customLocations/test-cl"},
      "metricsAutoUploadSelected_4": {"value": "false"}, "logsAutoUploadSelected_4":
      {"value": "false"}, "logAnalyticsWorkspaceId_4": {"value": ""}, "logAnalyticsPrimaryKey_4":
      {"value": ""}, "resourceTags_4": {"value": {}}, "infrastructure_4": {"value":
      "azure"}, "dockerRegistryCredential_4": {"value": "arc-private-registry"}, "dockerImagePullPolicy_4":
      {"value": "Always"}, "dockerImageTag_4": {"value": "v1.5.0_2022-04-05"}, "dockerRegistry_4":
      {"value": "mcr.microsoft.com"}, "dockerRepository_4": {"value": "arcdata"},
      "dataStorageClass_4": {"value": "default"}, "dataStorageSize_4": {"value": "15Gi"},
      "logsStorageClass_4": {"value": "default"}, "logsStorageSize_4": {"value": "10Gi"},
      "serviceType_4": {"value": "LoadBalancer"}, "controllerPort_4": {"value": 30080},
      "subscription_4": {"value": "a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39"}, "resourceGroup_4":
      {"value": "rg-cli-test"}, "location_4": {"value": "eastus2euap"}, "resourceName_4":
      {"value": "cli-test-dc"}, "resourceSyncApiVersion": {"value": "2021-08-31-preview"},
      "resourceSyncRuleName": {"value": "defaultResourceSyncRule"}, "resourceSyncTargetResourceGroup":
      {"value": "/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test"},
      "resourceSyncRulePriority": {"value": 100}, "resourceSyncMatchLabels": {"value":
      {"management.azure.com/resourceProvider": "Microsoft.AzureArcData"}}}, "template":
      {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"imagePullPolicy": {"type": "string"},
      "parentResource": {"type": "string"}, "resourceName": {"type": "string"}, "namespace":
      {"type": "string"}, "releaseTrain": {"type": "string"}, "version": {"type":
      "string"}, "imageRegistry": {"type": "string"}, "imageVersion": {"type": "string"},
      "imageUsername": {"type": "string"}, "imagePassword": {"type": "string"}, "apiVersion":
      {"type": "string"}, "roleNameGuid_1": {"type": "string"}, "roleDefinitionId_1":
      {"type": "string"}, "resourceName_1": {"type": "string"}, "apiVersion_1": {"type":
      "string"}, "roleNameGuid_2": {"type": "string"}, "roleDefinitionId_2": {"type":
      "string"}, "resourceName_2": {"type": "string"}, "apiVersion_2": {"type": "string"},
      "resourceName_3": {"type": "string"}, "customLocationId_3": {"type": "string"},
      "location_3": {"type": "string"}, "hostResourceId_3": {"type": "string"}, "namespace_3":
      {"type": "string"}, "clusterExtensionIds_3": {"type": "array"}, "apiVersion_3":
      {"type": "string"}, "namespace_4": {"type": "string"}, "connectionMode_4": {"type":
      "string"}, "controllerName_4": {"type": "string"}, "metricsAndLogsDashboardUsername_4":
      {"type": "string"}, "metricsAndLogsDashboardPassword_4": {"type": "secureString"},
      "customLocationId_4": {"type": "string"}, "metricsAutoUploadSelected_4": {"type":
      "string"}, "logsAutoUploadSelected_4": {"type": "string"}, "logAnalyticsWorkspaceId_4":
      {"type": "String"}, "logAnalyticsPrimaryKey_4": {"type": "String"}, "resourceTags_4":
      {"type": "object"}, "infrastructure_4": {"type": "string"}, "dockerRegistryCredential_4":
      {"type": "string"}, "dockerImagePullPolicy_4": {"type": "string"}, "dockerImageTag_4":
      {"type": "string"}, "dockerRegistry_4": {"type": "string"}, "dockerRepository_4":
      {"type": "string"}, "dataStorageClass_4": {"type": "string"}, "dataStorageSize_4":
      {"type": "string"}, "logsStorageClass_4": {"type": "string"}, "logsStorageSize_4":
      {"type": "string"}, "serviceType_4": {"type": "string"}, "controllerPort_4":
      {"type": "int"}, "subscription_4": {"type": "string"}, "resourceGroup_4": {"type":
      "string"}, "location_4": {"type": "string"}, "resourceName_4": {"type": "string"},
      "apiVersion_4": {"type": "string"}, "resourceSyncApiVersion": {"type": "string"},
      "resourceSyncRuleName": {"type": "string"}, "resourceSyncTargetResourceGroup":
      {"type": "string"}, "resourceSyncRulePriority": {"type": "int"}, "resourceSyncMatchLabels":
      {"type": "object"}}, "functions": [], "variables": {}, "resources": [{"identity":
      {"type": "SystemAssigned"}, "scope": "[parameters(''parentResource'')]", "properties":
      {"extensionType": "microsoft.arcdataservices", "autoUpgradeMinorVersion": false,
      "releaseTrain": "[parameters(''releaseTrain'')]", "version": "[parameters(''version'')]",
      "scope": {"cluster": {"releaseNamespace": "[parameters(''namespace'')]"}}, "configurationSettings":
      {"Microsoft.CustomLocation.ServiceAccount": "sa-arc-bootstrapper", "aad.customLocationObjectId":
      "51dfe1e8-70c6-4de5-a08e-e18aff23d815", "imageCredentials.username": "[parameters(''imageUsername'')]",
      "imageCredentials.registry": "[parameters(''imageRegistry'')]", "systemDefaultValues.image":
      "[parameters(''imageVersion'')]", "systemDefaultValues.imagePullPolicy": "[parameters(''imagePullPolicy'')]"},
      "configurationProtectedSettings": {"imageCredentials.password": "[parameters(''imagePassword'')]"}},
      "apiVersion": "[parameters(''apiVersion'')]", "type": "Microsoft.KubernetesConfiguration/extensions",
      "name": "[parameters(''resourceName'')]"}, {"type": "Microsoft.Authorization/roleAssignments",
      "apiVersion": "[parameters(''apiVersion_1'')]", "name": "[parameters(''resourceName_1'')]",
      "properties": {"roleDefinitionId": "[parameters(''roleDefinitionId_1'')]", "principalId":
      "[reference(parameters(''resourceName''), parameters(''apiVersion''), ''Full'').identity.principalId]"},
      "dependsOn": ["[parameters(''resourceName'')]"]}, {"type": "Microsoft.Authorization/roleAssignments",
      "apiVersion": "[parameters(''apiVersion_2'')]", "name": "[parameters(''resourceName_2'')]",
      "properties": {"roleDefinitionId": "[parameters(''roleDefinitionId_2'')]", "principalId":
      "[reference(parameters(''resourceName''), parameters(''apiVersion''), ''Full'').identity.principalId]"},
      "dependsOn": ["[parameters(''resourceName_1'')]"]}, {"name": "[parameters(''resourceName_3'')]",
      "location": "[parameters(''location_3'')]", "type": "Microsoft.ExtendedLocation/customLocations",
      "properties": {"hostType": "Kubernetes", "hostResourceId": "[parameters(''hostResourceId_3'')]",
      "namespace": "[parameters(''namespace_3'')]", "displayName": "", "clusterExtensionIds":
      "[parameters(''clusterExtensionIds_3'')]", "authentication": {}}, "apiVersion":
      "[parameters(''apiVersion_3'')]", "dependsOn": ["[parameters(''resourceName_2'')]"]},
      {"extendedLocation": {"name": "[parameters(''customLocationId_4'')]", "type":
      "CustomLocation"}, "location": "[parameters(''location_4'')]", "tags": "[parameters(''resourceTags_4'')]",
      "properties": {"metricsDashboardCredential": {"username": "[parameters(''metricsAndLogsDashboardUsername_4'')]",
      "password": "[parameters(''metricsAndLogsDashboardPassword_4'')]"}, "logsDashboardCredential":
      {"username": "[parameters(''metricsAndLogsDashboardUsername_4'')]", "password":
      "[parameters(''metricsAndLogsDashboardPassword_4'')]"}, "logAnalyticsWorkspaceConfig":
      {}, "infrastructure": "[parameters(''infrastructure_4'')]", "k8sRaw": {"kind":
      "DataController", "spec": {"credentials": {"dockerRegistry": "[parameters(''dockerRegistryCredential_4'')]",
      "domainServiceAccount": "domain-service-account-secret", "serviceAccount": "sa-arc-controller"},
      "security": {"allowDumps": true, "allowNodeMetricsCollection": true, "allowPodMetricsCollection":
      true}, "services": [{"name": "controller", "port": "[parameters(''controllerPort_4'')]",
      "serviceType": "[parameters(''serviceType_4'')]"}], "settings": {"ElasticSearch":
      {"vm.max_map_count": "-1"}, "azure": {"autoUploadMetrics": "[parameters(''metricsAutoUploadSelected_4'')]",
      "autoUploadLogs": "[parameters(''logsAutoUploadSelected_4'')]", "subscription":
      "[parameters(''subscription_4'')]", "resourceGroup": "[parameters(''resourceGroup_4'')]",
      "location": "[parameters(''location_4'')]", "connectionMode": "[parameters(''connectionMode_4'')]"},
      "controller": {"logs.rotation.days": "7", "logs.rotation.size": "5000", "displayName":
      "[parameters(''controllerName_4'')]"}}, "storage": {"data": {"accessMode": "ReadWriteOnce",
      "className": "[parameters(''dataStorageClass_4'')]", "size": "[parameters(''dataStorageSize_4'')]"},
      "logs": {"accessMode": "ReadWriteOnce", "className": "[parameters(''logsStorageClass_4'')]",
      "size": "[parameters(''logsStorageSize_4'')]"}}, "infrastructure": "[parameters(''infrastructure_4'')]",
      "docker": {"registry": "[parameters(''dockerRegistry_4'')]", "repository": "[parameters(''dockerRepository_4'')]",
      "imageTag": "[parameters(''dockerImageTag_4'')]", "imagePullPolicy": "[parameters(''dockerImagePullPolicy_4'')]"}},
      "metadata": {"namespace": "[parameters(''namespace_4'')]", "name": "datacontroller"},
      "apiVersion": "arcdata.microsoft.com/v4", "status": {"azure": {"uploadStatus":
      {"metrics": {}, "logs": {}, "usage": {}}}}}}, "apiVersion": "[parameters(''apiVersion_4'')]",
      "type": "Microsoft.AzureArcData/dataControllers", "name": "[parameters(''resourceName_4'')]",
      "dependsOn": ["[parameters(''resourceName_3'')]"]}], "outputs": {}}, "validationLevel":
      "Template"}, "tags": {"marketplaceItemId": "Microsoft.DataController"}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '11477'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.27.1
    method: PUT
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/rg-cli-test/providers/Microsoft.Resources/deployments/cli-test-dc
  response:
    body:
      string: !!binary |
        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
    headers:
      Azure-AsyncOperation:
      - https://management.azure.com/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/rg-cli-test/providers/Microsoft.Resources/deployments/cli-test-dc/operationStatuses/08585519480490764905?api-version=2020-06-01
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Mon, 11 Apr 2022 06:33:57 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      x-ms-correlation-request-id:
      - c477ceca-8922-4f79-afa8-f1d174fa57e6
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-ms-request-id:
      - c477ceca-8922-4f79-afa8-f1d174fa57e6
      x-ms-routing-request-id:
      - WESTUS:20220411T063358Z:c477ceca-8922-4f79-afa8-f1d174fa57e6
    status:
      code: 200
      message: OK
version: 1
