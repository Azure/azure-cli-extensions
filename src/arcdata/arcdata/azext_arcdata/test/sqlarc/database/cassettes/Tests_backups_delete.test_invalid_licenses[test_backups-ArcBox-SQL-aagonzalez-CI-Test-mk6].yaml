interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - d720a3c3-caaa-11ee-9d46-d8bbc1c51c4b
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL","name":"ArcBox-SQL","type":"microsoft.azurearcdata/sqlserverinstances","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T16:58:34.0669699Z","lastModifiedBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","lastModifiedByType":"Application","lastModifiedAt":"2024-02-13T19:18:56.5355191Z"},"properties":{"version":"SQL
        Server 2019","edition":"Developer","containerResourceId":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL","createTime":null,"vCore":"1","cores":null,"status":"Connected","patchLevel":"15.0.2104.1","collation":"SQL_Latin1_General_CP1_CI_AS","currentVersion":"15.0.2000.5","instanceName":"MSSQLSERVER","tcpDynamicPorts":"","tcpStaticPorts":"1433","productId":"Unknown","licenseType":"Free","azureDefenderStatusLastUpdated":null,"azureDefenderStatus":"Unknown","provisioningState":"Succeeded","lastInventoryUploadTime":"2024-02-13T18:52:48.9741378Z","lastUsageUploadTime":"2024-02-13T19:18:54.5933551Z","hostType":null,"alwaysOnRole":"None","failoverCluster":null,"backupPolicy":{"retentionPeriodDays":7,"fullBackupDays":7,"differentialBackupHours":12,"transactionLogBackupMinutes":5},"upgradeLockedUntil":null,"monitoring":{"enabled":true},"migration":{"assessment":{"enabled":true}}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '1539'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:02:40 GMT
      ETag:
      - '"da03910f-0000-0100-0000-65cbc0a00000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: AE838CF5F34A4E5EBB4CD554A024B8E1 Ref B: BN1AA2051013021 Ref C: 2024-02-13T20:02:40Z'
      x-ms-correlation-request-id:
      - adf9091b-e9dc-497e-8206-5ef48bbe02af
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '99999'
      x-ms-request-id:
      - c2e5e1d9-e526-468f-9f75-b8c681e85797
      x-ms-routing-request-id:
      - EASTUS:20240213T200240Z:adf9091b-e9dc-497e-8206-5ef48bbe02af
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - d7945637-caaa-11ee-a9b7-d8bbc1c51c4b
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL/databases/test_backups?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL/databases/test_backups","name":"test_backups","type":"microsoft.azurearcdata/sqlserverinstances/databases","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T16:58:35.4346343Z","lastModifiedBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","lastModifiedByType":"Application","lastModifiedAt":"2024-02-13T17:00:50.8817807Z"},"properties":{"collationName":"SQL_Latin1_General_CP1_CI_AS","databaseCreationDate":"2024-01-19T19:05:46Z","compatibilityLevel":150,"sizeMB":8.0,"spaceAvailableMB":5.375,"state":"Online","isReadOnly":false,"recoveryMode":"Full","databaseOptions":{"isAutoCloseOn":false,"isAutoShrinkOn":false,"isAutoCreateStatsOn":true,"isAutoUpdateStatsOn":true,"isMemoryOptimizationEnabled":true,"isEncrypted":false,"isTrustworthyOn":false},"backupInformation":{"lastFullBackup":"2024-02-08T20:10:48Z","lastLogBackup":"2024-02-13T16:57:01Z"},"provisioningState":"Succeeded","lastDatabaseUploadTime":"2024-02-13T17:00:48.7755364Z"}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '1181'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:02:40 GMT
      ETag:
      - '"c107a5ad-0000-0100-0000-65cba0420000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 93963F402729425CA35C9D562E0260AB Ref B: BN1AA2051013021 Ref C: 2024-02-13T20:02:40Z'
      x-ms-correlation-request-id:
      - b8793225-bbd7-48a3-bc0e-a4888833f124
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '199999'
      x-ms-request-id:
      - 80569f3a-fe82-4a4d-a2f0-14517614f5e5
      x-ms-routing-request-id:
      - EASTUS:20240213T200240Z:b8793225-bbd7-48a3-bc0e-a4888833f124
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.31.0
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer","name":"WindowsAgent.SqlServer","type":"Microsoft.HybridCompute/machines/extensions","location":"eastus","properties":{"publisher":"Microsoft.AzureData","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","autoUpgradeMinorVersion":false,"enableAutomaticUpgrade":true,"settings":{"SqlManagement":{"IsEnabled":true},"ExcludedSqlInstances":[""],"LicenseType":"LicenseOnly","cloudprovider":"N/A"},"provisioningState":"Succeeded","instanceView":{"name":"WindowsAgent.SqlServer","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","status":{"code":"0","level":"Information","message":"Extension
        Message: SQL Server Extension Agent: Healthy; timestampUTC : 2024/02/13, 19:55:26.377;
        uploadStatus : NotFound;AutomaticBackups: Suspended;PurviewPlugin: {};AzureActiveDirectoryPlugin:
        {\r\n  \"MSSQLSERVER\": \"\",\r\n  \"MSSQLSERVER01\": \"\"\r\n};: Listening
        on port 0;DatabaseMonitorArcPlugin: {\"State\":\"Running\",\"MetricsUploadStatus\":\"OK\"},
        SqlAgentPlugin: {\"$type\":\"Microsoft.Azure.Hybrid.Sql.Models.AutomaticSqlBackupConfiguration,
        SqlAgent\",\"retentionPeriodInDays\":7,\"profiles\":{\"$type\":\"System.Collections.Generic.List`1[[Microsoft.Azure.Hybrid.Sql.Models.ShortTermRetentionAutomaticSqlBackupProfile,
        SqlAgent]], System.Private.CoreLib\",\"$values\":[{\"$type\":\"Microsoft.Azure.Hybrid.Sql.Models.ShortTermRetentionAutomaticSqlBackupProfile,
        SqlAgent\",\"instanceName\":\"MSSQLSERVER\",\"differentialBackupHours\":12,\"fullBackupDays\":7,\"tLogBackupMinutes\":5,\"retentionPeriodInDays\":7,\"enabled\":true},{\"$type\":\"Microsoft.Azure.Hybrid.Sql.Models.ShortTermRetentionAutomaticSqlBackupProfile,
        SqlAgent\",\"instanceName\":\"MSSQLSERVER01\",\"differentialBackupHours\":12,\"fullBackupDays\":7,\"tLogBackupMinutes\":5,\"retentionPeriodInDays\":10,\"enabled\":true}]}},
        Purview plugin: [], Azure active directory configuration plugin: [], Assessment
        Status: {\"AssessmentHistory\":[],\"Enabled\":false,\"ErrorMessage\":\"\",\"NextScheduledTime\":null,\"RunStatus\":\"NotRunning\",\"StartTime\":null},
        ODataServiceHostPlugin: {\"$type\":\"ArcSqlOData.ServiceHost.Models.ArcSqlODataConfiguration,
        ArcSqlOData.ServiceHost\"}, DatabaseMonitorArcPlugin: {\"$type\":\"Microsoft.SqlServer.Management.SqlServerHandlerData.DatabaseMonitorConfiguration,
        Microsoft.SqlServer.Management.SqlServerHandlerData\",\"endpointUrl\":\"https://telemetry.{0}.arcdataservices.com/\",\"endpointAppId\":\"524058e3-2702-4b98-932b-b2d1de613fd2\"}"}}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '2663'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:02:41 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: BDCE73A18AAC4ECA8E97063E946D3551 Ref B: BN1AA2051013017 Ref C: 2024-02-13T20:02:41Z'
      x-ms-correlation-request-id:
      - 61c3881b-c799-4537-b8ca-f60b5200c2e5
      x-ms-ratelimit-remaining-subscription-reads:
      - '11997'
      x-ms-request-id:
      - 5a1b5efe-d989-47c2-aa18-4b9061a7d4eb
      x-ms-routing-request-id:
      - EASTUS2:20240213T200241Z:61c3881b-c799-4537-b8ca-f60b5200c2e5
    status:
      code: 200
      message: OK
version: 1
