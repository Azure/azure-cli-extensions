interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 54939b00-cab1-11ee-aa9a-d8bbc1c51c4b
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL_MSSQLSERVER01
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL_MSSQLSERVER01","name":"ArcBox-SQL_MSSQLSERVER01","type":"microsoft.azurearcdata/sqlserverinstances","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T19:57:49.4129853Z","lastModifiedBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","lastModifiedByType":"Application","lastModifiedAt":"2024-02-13T20:40:40.9443956Z"},"properties":{"version":"SQL
        Server 2019","edition":"Evaluation","containerResourceId":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL","createTime":null,"vCore":"1","cores":null,"status":"Connected","patchLevel":"15.0.2000.5","collation":"SQL_Latin1_General_CP1_CI_AS","currentVersion":"15.0.2000.5","instanceName":"MSSQLSERVER01","tcpDynamicPorts":"0","tcpStaticPorts":"","productId":"Unknown","licenseType":"Free","azureDefenderStatusLastUpdated":null,"azureDefenderStatus":"Unknown","provisioningState":"Succeeded","lastInventoryUploadTime":"2024-02-13T20:40:38.901215Z","lastUsageUploadTime":null,"hostType":null,"alwaysOnRole":"None","failoverCluster":null,"backupPolicy":null,"upgradeLockedUntil":null,"monitoring":{"enabled":true},"migration":{"assessment":{"enabled":true}}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '1439'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:49:07 GMT
      ETag:
      - '"e0036371-0000-0100-0000-65cbd3c90000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 77F09843E48D49EAA58991D718214C97 Ref B: BN1AA2051012011 Ref C: 2024-02-13T20:49:07Z'
      x-ms-correlation-request-id:
      - 512516ba-1a15-4604-a028-3403520b89b1
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '99999'
      x-ms-request-id:
      - a1f4c17d-5262-4a3a-ab2b-8d14f36c6277
      x-ms-routing-request-id:
      - EASTUS:20240213T204907Z:512516ba-1a15-4604-a028-3403520b89b1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 55092401-cab1-11ee-962b-d8bbc1c51c4b
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL_MSSQLSERVER01/databases/test_backups2
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL_MSSQLSERVER01/databases/test_backups2","name":"test_backups2","type":"microsoft.azurearcdata/sqlserverinstances/databases","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-13T20:40:42.8230227Z","lastModifiedBy":"aagonzalez@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-02-13T20:47:24.5335886Z"},"properties":{"collationName":"SQL_Latin1_General_CP1_CI_AS","databaseCreationDate":"2024-02-13T20:39:56Z","compatibilityLevel":150,"sizeMB":8.0,"spaceAvailableMB":5.625,"state":"Online","isReadOnly":false,"recoveryMode":"Full","databaseOptions":{"isAutoCloseOn":false,"isAutoShrinkOn":false,"isAutoCreateStatsOn":true,"isAutoUpdateStatsOn":true,"isRemoteDataArchiveEnabled":null,"isMemoryOptimizationEnabled":true,"isEncrypted":false,"isTrustworthyOn":false},"backupInformation":{"lastFullBackup":null,"lastLogBackup":null},"backupPolicy":{"retentionPeriodDays":7,"fullBackupDays":7,"differentialBackupHours":24,"transactionLogBackupMinutes":5},"earliestRestoreDate":null,"createMode":null,"sourceDatabaseId":null,"restorePointInTime":null,"provisioningState":"Succeeded","lastDatabaseUploadTime":"2024-02-13T20:40:39.3885649Z"}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '1392'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:49:07 GMT
      ETag:
      - '"cf07fcdb-0000-0100-0000-65cbd55f0000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: F4F86E40B5184DF09F733547066A9430 Ref B: BN1AA2051012011 Ref C: 2024-02-13T20:49:08Z'
      x-ms-correlation-request-id:
      - 2efdddaa-8c95-4edb-83b9-0d828739912d
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '199999'
      x-ms-request-id:
      - 1a1c4d51-5cdd-45ab-af55-5d1eb88f7dcf
      x-ms-routing-request-id:
      - EASTUS:20240213T204908Z:2efdddaa-8c95-4edb-83b9-0d828739912d
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.31.0
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer","name":"WindowsAgent.SqlServer","type":"Microsoft.HybridCompute/machines/extensions","location":"eastus","properties":{"publisher":"Microsoft.AzureData","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","autoUpgradeMinorVersion":false,"enableAutomaticUpgrade":true,"settings":{"SqlManagement":{"IsEnabled":true},"ExcludedSqlInstances":[""],"LicenseType":"Paid","cloudprovider":"N/A"},"provisioningState":"Succeeded","instanceView":{"name":"WindowsAgent.SqlServer","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","status":{"code":"0","level":"Information","message":"Extension
        Message: SQL Server Extension Agent: Healthy; timestampUTC : 2024/02/13, 20:40:20.171;
        uploadStatus : OK;AutomaticBackups: Running;PurviewPlugin: {};AzureActiveDirectoryPlugin:
        {\r\n  \"MSSQLSERVER\": \"\",\r\n  \"MSSQLSERVER01\": \"\"\r\n};: Listening
        on port 0;DatabaseMonitorArcPlugin: {\"State\":\"Running\",\"MetricsUploadStatus\":\"OK\"},
        SqlAgentPlugin: {\"$type\":\"Microsoft.Azure.Hybrid.Sql.Models.AutomaticSqlBackupConfiguration,
        SqlAgent\",\"retentionPeriodInDays\":7,\"profiles\":{\"$type\":\"System.Collections.Generic.List`1[[Microsoft.Azure.Hybrid.Sql.Models.ShortTermRetentionAutomaticSqlBackupProfile,
        SqlAgent]], System.Private.CoreLib\",\"$values\":[]}}, Purview plugin: [],
        Azure active directory configuration plugin: [], Assessment Status: {\"AssessmentHistory\":[],\"Enabled\":false,\"ErrorMessage\":\"\",\"NextScheduledTime\":null,\"RunStatus\":\"NotRunning\",\"StartTime\":null},
        ODataServiceHostPlugin: {\"$type\":\"ArcSqlOData.ServiceHost.Models.ArcSqlODataConfiguration,
        ArcSqlOData.ServiceHost\"}, DatabaseMonitorArcPlugin: {\"$type\":\"Microsoft.SqlServer.Management.SqlServerHandlerData.DatabaseMonitorConfiguration,
        Microsoft.SqlServer.Management.SqlServerHandlerData\",\"endpointUrl\":\"https://telemetry.{0}.arcdataservices.com/\",\"endpointAppId\":\"524058e3-2702-4b98-932b-b2d1de613fd2\"}"}}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '2130'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:49:08 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 0D30D40CB43A49E0B3F0F0C78FA42100 Ref B: BN1AA2051015053 Ref C: 2024-02-13T20:49:08Z'
      x-ms-correlation-request-id:
      - e0fbe392-9f79-4b61-8b65-2a33f7a415fc
      x-ms-ratelimit-remaining-subscription-reads:
      - '11998'
      x-ms-request-id:
      - 4dda11e9-7a78-4698-ba51-a1497bea985c
      x-ms-routing-request-id:
      - EASTUS:20240213T204908Z:e0fbe392-9f79-4b61-8b65-2a33f7a415fc
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus", "properties": {"collationName": "SQL_Latin1_General_CP1_CI_AS",
      "databaseCreationDate": "2024-02-13T20:39:56.000Z", "compatibilityLevel": 150,
      "sizeMB": 8.0, "spaceAvailableMB": 5.625, "state": "Online", "isReadOnly": false,
      "recoveryMode": "Full", "databaseOptions": {"isAutoCloseOn": false, "isAutoShrinkOn":
      false, "isAutoCreateStatsOn": true, "isAutoUpdateStatsOn": true, "isMemoryOptimizationEnabled":
      true, "isEncrypted": false, "isTrustworthyOn": false}, "backupInformation":
      {}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '510'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 55805374-cab1-11ee-ae73-d8bbc1c51c4b
    method: PUT
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL_MSSQLSERVER01/databases/test_backups2
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL_MSSQLSERVER01/databases/test_backups2","name":"test_backups2","type":"microsoft.azurearcdata/sqlserverinstances/databases","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-13T20:40:42.8230227Z","lastModifiedBy":"aagonzalez@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-02-13T20:49:09.0534784Z"},"properties":{"collationName":"SQL_Latin1_General_CP1_CI_AS","databaseCreationDate":"2024-02-13T20:39:56Z","compatibilityLevel":150,"sizeMB":8.0,"spaceAvailableMB":5.625,"state":"Online","isReadOnly":false,"recoveryMode":"Full","databaseOptions":{"isAutoCloseOn":false,"isAutoShrinkOn":false,"isAutoCreateStatsOn":true,"isAutoUpdateStatsOn":true,"isRemoteDataArchiveEnabled":null,"isMemoryOptimizationEnabled":true,"isEncrypted":false,"isTrustworthyOn":false},"backupInformation":{"lastFullBackup":null,"lastLogBackup":null},"backupPolicy":null,"earliestRestoreDate":null,"createMode":null,"sourceDatabaseId":null,"restorePointInTime":null,"provisioningState":"Accepted","lastDatabaseUploadTime":"2024-02-13T20:40:39.3885649Z"}}'
    headers:
      Azure-AsyncOperation:
      - https://management.azure.com/providers/Microsoft.AzureArcData/locations/EASTUS/operationStatuses/133d91b1-014d-4be0-baab-7c0f7bb65eb0*B9A0633C555595E40E0C90885A47A6BA8F0C4159D45954A19ABB83949AC0AB2B?api-version=2024-02-01-preview&t=638434541494910070&c=MIIHADCCBeigAwIBAgITfARlFdSUZK8kechtYQAABGUV1DANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDUwHhcNMjQwMTMwMjA1NjEzWhcNMjUwMTI0MjA1NjEzWjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALYMYYup1R1RZPIwVtk7z89JkrsDK8coPmULAovQOy3jgtdJ-z5oyCO28-zQ4LRHmuyeq1ROWdQR5e828FYihyBqnnQQea3EcS6CFfXpYes-7NPXy73E_P3goJLJU7bfuZ4iDPGZxXIIjo6_Uex0eX_AuBJeq8ZFcmNy3x0loDHkDww9lMprf49PmIZJEAshTnLBtfT3BC7JAuTTl2duIcC6YRT8vITdFw1HxFqywnOqD35zttD8vp0XowEP4ksBLfhJWduspxICp4Yu2ouSlh-T4GmsjQaTjrzZpw29eEj3gUyzTfkDY-WEGsEujkl9a9FCX1_AvT-9Eqmd7uYqV6kCAwEAAaOCA-0wggPpMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFggvX2K4Py0SACAWQCAQowggHLBggrBgEFBQcBAQSCAb0wggG5MGMGCCsGAQUFBzAChldodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQ08xUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNS5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0NPMVBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3J0MFMGCCsGAQUFBzAChkdodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9DTzFQS0lJTlRDQTAxLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDA1LmNydDBTBggrBgEFBQcwAoZHaHR0cDovL2NybDMuYW1lLmdibC9haWEvQ08xUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNS5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0NPMVBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3J0MB0GA1UdDgQWBBTDXVhSVDy9FvMjLTrSyU7UjKUXqzAOBgNVHQ8BAf8EBAMCBaAwggEmBgNVHR8EggEdMIIBGTCCARWgggERoIIBDYY_aHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JsMBcGA1UdIAQQMA4wDAYKKwYBBAGCN3sBATAfBgNVHSMEGDAWgBR61hmFKHlscXYeYPjzS--iBUIWHTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBAHyzMCBJbTmiP_gOh98fZltsl9jQdlB-g_OYCr82viu1SgLxte7Za3Vtb3XRCTquz_JfY_4eQJpUy0p6F37f0oaTQkBvUF7HDDvkm49rmKF4nDFjPGNEqm53KbVEak46WTgD9fGZLQH1XouZGRe0LxQVIWm-K-MYMbrDWF_njKsIaV5Z4VxgFVaX5SlzHvr6coDX5oXwwksEsw8E8g0LfZCpfT5mCwgDPrDv2Ekk26koWUYlmJWgkky22R538qwuJmE6F33YwWStmUGfZfFDyjek8Rd_KyuEuC9IZfk4TTmVjyJmKPi5GhIJGwiATMpLJwt5jD_Hkgbq6vMwud4ZbIE&s=T4h8bInFimdIobeFe2NXwY91-jzp7aYWQPY9OLJPBpvAqFbyiKl0_M4swaXrUxpxkEZeEhKNCHNh3j-ftXgvcR2WeKat0H4JtrXLJNu2fXAUQ-ubzTIl6bimPOAZXBqWVUEPIqdnoTm2-pLOZoEmQhzPRI0XJth5cLnsS5t_YgtdcpgIrBW9I946txE078x-mLhvdH01m9sjM65JzgI0CHwoDDTCX14-fUmCDhG_WG6X7Pf-etOocMVfy9pRAV9qhCeJAfIFl9wlUlF03gk4NqOZ9B-ZcsWifmg-kpWehFnvbTwgAHR1tbuduuIfWEGawOvvMh9_rPjkZFzG1SRIjQ&h=Lh28XCSItkltlCqV_DUX9E4FiyvY6QolZSQE0Way_vM
      Cache-Control:
      - no-cache
      Content-Length:
      - '1290'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:49:09 GMT
      ETag:
      - '"cf076df5-0000-0100-0000-65cbd5c50000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Set-Cookie:
      - ARRAffinity=9802f2c450efa958b5f9a61fc0b0586d3080a6befb1d8f5049165c73def69d21;Path=/;HttpOnly;Secure;Domain=azurearcdata-tmprofile-eastus.trafficmanager.net
      - ARRAffinitySameSite=9802f2c450efa958b5f9a61fc0b0586d3080a6befb1d8f5049165c73def69d21;Path=/;HttpOnly;SameSite=None;Secure;Domain=azurearcdata-tmprofile-eastus.trafficmanager.net
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 3A087E71BE7E403C8BC367680E6DC0FE Ref B: BN1AA2051012011 Ref C: 2024-02-13T20:49:08Z'
      X-Powered-By:
      - ASP.NET
      x-ms-correlation-request-id:
      - d70af518-4fd8-4018-b8f5-5083daac9d6f
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '19999'
      x-ms-request-id:
      - 133d91b1-014d-4be0-baab-7c0f7bb65eb0
      x-ms-routing-request-id:
      - EASTUS:20240213T204909Z:d70af518-4fd8-4018-b8f5-5083daac9d6f
    status:
      code: 201
      message: Created
version: 1
