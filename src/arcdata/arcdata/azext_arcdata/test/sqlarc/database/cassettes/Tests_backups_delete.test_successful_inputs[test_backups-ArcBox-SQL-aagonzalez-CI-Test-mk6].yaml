interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 1ced42b2-cab1-11ee-82da-d8bbc1c51c4b
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL","name":"ArcBox-SQL","type":"microsoft.azurearcdata/sqlserverinstances","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T16:58:34.0669699Z","lastModifiedBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","lastModifiedByType":"Application","lastModifiedAt":"2024-02-13T20:40:40.9606879Z"},"properties":{"version":"SQL
        Server 2019","edition":"Developer","containerResourceId":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL","createTime":null,"vCore":"1","cores":null,"status":"Connected","patchLevel":"15.0.2104.1","collation":"SQL_Latin1_General_CP1_CI_AS","currentVersion":"15.0.2000.5","instanceName":"MSSQLSERVER","tcpDynamicPorts":"","tcpStaticPorts":"1433","productId":"Unknown","licenseType":"Free","azureDefenderStatusLastUpdated":null,"azureDefenderStatus":"Unknown","provisioningState":"Succeeded","lastInventoryUploadTime":"2024-02-13T20:40:38.9011995Z","lastUsageUploadTime":"2024-02-13T20:40:22.1770734Z","hostType":null,"alwaysOnRole":"None","failoverCluster":null,"backupPolicy":null,"upgradeLockedUntil":null,"monitoring":{"enabled":true},"migration":{"assessment":{"enabled":true}}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '1438'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:47:33 GMT
      ETag:
      - '"e0037271-0000-0100-0000-65cbd3c90000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 3CE574E1C0334FF09CC03B76584150BE Ref B: BN1AA2051013021 Ref C: 2024-02-13T20:47:34Z'
      x-ms-correlation-request-id:
      - fb86c2a6-a6c8-4cff-800f-9df62c18fbbc
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '99999'
      x-ms-request-id:
      - 216551f9-3599-478b-bd76-8115ac680eff
      x-ms-routing-request-id:
      - EASTUS:20240213T204734Z:fb86c2a6-a6c8-4cff-800f-9df62c18fbbc
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 1d54564f-cab1-11ee-816c-d8bbc1c51c4b
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL/databases/test_backups?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL/databases/test_backups","name":"test_backups","type":"microsoft.azurearcdata/sqlserverinstances/databases","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T16:58:35.4346343Z","lastModifiedBy":"aagonzalez@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-02-13T20:46:51.1546928Z"},"properties":{"collationName":"SQL_Latin1_General_CP1_CI_AS","databaseCreationDate":"2024-01-19T19:05:46Z","compatibilityLevel":150,"sizeMB":8.0,"spaceAvailableMB":5.375,"state":"Online","isReadOnly":false,"recoveryMode":"Full","databaseOptions":{"isAutoCloseOn":false,"isAutoShrinkOn":false,"isAutoCreateStatsOn":true,"isAutoUpdateStatsOn":true,"isRemoteDataArchiveEnabled":null,"isMemoryOptimizationEnabled":true,"isEncrypted":false,"isTrustworthyOn":false},"backupInformation":{"lastFullBackup":"2024-02-08T20:10:48Z","lastLogBackup":"2024-02-13T17:47:45Z"},"backupPolicy":{"retentionPeriodDays":7,"fullBackupDays":7,"differentialBackupHours":24,"transactionLogBackupMinutes":5},"earliestRestoreDate":null,"createMode":null,"sourceDatabaseId":null,"restorePointInTime":null,"provisioningState":"Succeeded","lastDatabaseUploadTime":"2024-02-13T20:40:39.1641701Z"}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '1412'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:47:34 GMT
      ETag:
      - '"cf07ced5-0000-0100-0000-65cbd5420000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: FACF4AB8E0E74EEEB838245AC712E2F6 Ref B: BN1AA2051013021 Ref C: 2024-02-13T20:47:34Z'
      x-ms-correlation-request-id:
      - 9a212345-ac77-495b-9b70-52e56aef5117
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '199999'
      x-ms-request-id:
      - 2ec0f4d7-87dc-4406-b8c9-af8ae73bd35f
      x-ms-routing-request-id:
      - EASTUS:20240213T204734Z:9a212345-ac77-495b-9b70-52e56aef5117
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.31.0
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer?api-version=2023-03-15-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer","name":"WindowsAgent.SqlServer","type":"Microsoft.HybridCompute/machines/extensions","location":"eastus","properties":{"publisher":"Microsoft.AzureData","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","autoUpgradeMinorVersion":false,"enableAutomaticUpgrade":true,"settings":{"SqlManagement":{"IsEnabled":true},"ExcludedSqlInstances":[""],"LicenseType":"Paid","cloudprovider":"N/A"},"provisioningState":"Succeeded","instanceView":{"name":"WindowsAgent.SqlServer","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","status":{"code":"0","level":"Information","message":"Extension
        Message: SQL Server Extension Agent: Healthy; timestampUTC : 2024/02/13, 20:40:20.171;
        uploadStatus : OK;AutomaticBackups: Running;PurviewPlugin: {};AzureActiveDirectoryPlugin:
        {\r\n  \"MSSQLSERVER\": \"\",\r\n  \"MSSQLSERVER01\": \"\"\r\n};: Listening
        on port 0;DatabaseMonitorArcPlugin: {\"State\":\"Running\",\"MetricsUploadStatus\":\"OK\"},
        SqlAgentPlugin: {\"$type\":\"Microsoft.Azure.Hybrid.Sql.Models.AutomaticSqlBackupConfiguration,
        SqlAgent\",\"retentionPeriodInDays\":7,\"profiles\":{\"$type\":\"System.Collections.Generic.List`1[[Microsoft.Azure.Hybrid.Sql.Models.ShortTermRetentionAutomaticSqlBackupProfile,
        SqlAgent]], System.Private.CoreLib\",\"$values\":[]}}, Purview plugin: [],
        Azure active directory configuration plugin: [], Assessment Status: {\"AssessmentHistory\":[],\"Enabled\":false,\"ErrorMessage\":\"\",\"NextScheduledTime\":null,\"RunStatus\":\"NotRunning\",\"StartTime\":null},
        ODataServiceHostPlugin: {\"$type\":\"ArcSqlOData.ServiceHost.Models.ArcSqlODataConfiguration,
        ArcSqlOData.ServiceHost\"}, DatabaseMonitorArcPlugin: {\"$type\":\"Microsoft.SqlServer.Management.SqlServerHandlerData.DatabaseMonitorConfiguration,
        Microsoft.SqlServer.Management.SqlServerHandlerData\",\"endpointUrl\":\"https://telemetry.{0}.arcdataservices.com/\",\"endpointAppId\":\"524058e3-2702-4b98-932b-b2d1de613fd2\"}"}}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '2130'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:47:34 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 94C10D0C027F479E930B798F01A7351E Ref B: BN1AA2051013047 Ref C: 2024-02-13T20:47:35Z'
      x-ms-correlation-request-id:
      - e3025557-a08b-4daa-8338-99e24d273c08
      x-ms-ratelimit-remaining-subscription-reads:
      - '11999'
      x-ms-request-id:
      - fda675b6-49e8-46cf-ac56-af51947acd3b
      x-ms-routing-request-id:
      - EASTUS2:20240213T204735Z:e3025557-a08b-4daa-8338-99e24d273c08
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus", "properties": {"collationName": "SQL_Latin1_General_CP1_CI_AS",
      "databaseCreationDate": "2024-01-19T19:05:46.000Z", "compatibilityLevel": 150,
      "sizeMB": 8.0, "spaceAvailableMB": 5.375, "state": "Online", "isReadOnly": false,
      "recoveryMode": "Full", "databaseOptions": {"isAutoCloseOn": false, "isAutoShrinkOn":
      false, "isAutoCreateStatsOn": true, "isAutoUpdateStatsOn": true, "isMemoryOptimizationEnabled":
      true, "isEncrypted": false, "isTrustworthyOn": false}, "backupInformation":
      {"lastFullBackup": "2024-02-08T20:10:48.000Z", "lastLogBackup": "2024-02-13T17:47:45.000Z"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '599'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.11.8 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 1dd1bcb8-cab1-11ee-8a0f-d8bbc1c51c4b
    method: PUT
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL/databases/test_backups?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL/databases/test_backups","name":"test_backups","type":"microsoft.azurearcdata/sqlserverinstances/databases","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T16:58:35.4346343Z","lastModifiedBy":"aagonzalez@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-02-13T20:47:35.6311554Z"},"properties":{"collationName":"SQL_Latin1_General_CP1_CI_AS","databaseCreationDate":"2024-01-19T19:05:46Z","compatibilityLevel":150,"sizeMB":8.0,"spaceAvailableMB":5.375,"state":"Online","isReadOnly":false,"recoveryMode":"Full","databaseOptions":{"isAutoCloseOn":false,"isAutoShrinkOn":false,"isAutoCreateStatsOn":true,"isAutoUpdateStatsOn":true,"isRemoteDataArchiveEnabled":null,"isMemoryOptimizationEnabled":true,"isEncrypted":false,"isTrustworthyOn":false},"backupInformation":{"lastFullBackup":"2024-02-08T20:10:48Z","lastLogBackup":"2024-02-13T17:47:45Z"},"backupPolicy":null,"earliestRestoreDate":null,"createMode":null,"sourceDatabaseId":null,"restorePointInTime":null,"provisioningState":"Accepted","lastDatabaseUploadTime":"2024-02-13T20:40:39.1641701Z"}}'
    headers:
      Azure-AsyncOperation:
      - https://management.azure.com/providers/Microsoft.AzureArcData/locations/EASTUS/operationStatuses/85099aad-56d2-493d-baf8-59c4d7e02662*380D1AD04D76E1B9821F7176EB66C1548AF787579053B54AD3E5930E2D5AA5E1?api-version=2024-02-01-preview&t=638434540560686601&c=MIIHADCCBeigAwIBAgITfARlFdSUZK8kechtYQAABGUV1DANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDUwHhcNMjQwMTMwMjA1NjEzWhcNMjUwMTI0MjA1NjEzWjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALYMYYup1R1RZPIwVtk7z89JkrsDK8coPmULAovQOy3jgtdJ-z5oyCO28-zQ4LRHmuyeq1ROWdQR5e828FYihyBqnnQQea3EcS6CFfXpYes-7NPXy73E_P3goJLJU7bfuZ4iDPGZxXIIjo6_Uex0eX_AuBJeq8ZFcmNy3x0loDHkDww9lMprf49PmIZJEAshTnLBtfT3BC7JAuTTl2duIcC6YRT8vITdFw1HxFqywnOqD35zttD8vp0XowEP4ksBLfhJWduspxICp4Yu2ouSlh-T4GmsjQaTjrzZpw29eEj3gUyzTfkDY-WEGsEujkl9a9FCX1_AvT-9Eqmd7uYqV6kCAwEAAaOCA-0wggPpMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFggvX2K4Py0SACAWQCAQowggHLBggrBgEFBQcBAQSCAb0wggG5MGMGCCsGAQUFBzAChldodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQ08xUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNS5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0NPMVBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3J0MFMGCCsGAQUFBzAChkdodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9DTzFQS0lJTlRDQTAxLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDA1LmNydDBTBggrBgEFBQcwAoZHaHR0cDovL2NybDMuYW1lLmdibC9haWEvQ08xUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNS5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0NPMVBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3J0MB0GA1UdDgQWBBTDXVhSVDy9FvMjLTrSyU7UjKUXqzAOBgNVHQ8BAf8EBAMCBaAwggEmBgNVHR8EggEdMIIBGTCCARWgggERoIIBDYY_aHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JsMBcGA1UdIAQQMA4wDAYKKwYBBAGCN3sBATAfBgNVHSMEGDAWgBR61hmFKHlscXYeYPjzS--iBUIWHTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBAHyzMCBJbTmiP_gOh98fZltsl9jQdlB-g_OYCr82viu1SgLxte7Za3Vtb3XRCTquz_JfY_4eQJpUy0p6F37f0oaTQkBvUF7HDDvkm49rmKF4nDFjPGNEqm53KbVEak46WTgD9fGZLQH1XouZGRe0LxQVIWm-K-MYMbrDWF_njKsIaV5Z4VxgFVaX5SlzHvr6coDX5oXwwksEsw8E8g0LfZCpfT5mCwgDPrDv2Ekk26koWUYlmJWgkky22R538qwuJmE6F33YwWStmUGfZfFDyjek8Rd_KyuEuC9IZfk4TTmVjyJmKPi5GhIJGwiATMpLJwt5jD_Hkgbq6vMwud4ZbIE&s=MvI_cVx-Ru5sLxEMuzDBphPjCItE30D1-LgctjFfRYwqBXDpw6iVVv4bWnIKTtloXL6mPU6OK1l2FvIblKElbKsW0OfOMzsHY5hwjOsxqCv-s11HYOzoTgG3cvmWoVRklcFXtP3e2boIFSvj191xTjivOUZ6dt0LFyTTDWI1VQJJrXKksFhc-uUj_HhJAoWqhJiXvOwpasE_E5XPvJwiVcijyCuBGO-XVpVJP3zDRWH4OUwWhGyYot98G1eGoIn-vTjVHqLttpWV9zgf8BUEeCbEkkADwKH2jWzgaD7Lx9sUmA2llWmj6pBPS-V2_C9GTsDEBPn7jjtYzXq5N17tVg&h=dcMXkIW4dg-jkBHFpDd6KUzfOTra0cTgpwyMCGJzXKY
      Cache-Control:
      - no-cache
      Content-Length:
      - '1310'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Tue, 13 Feb 2024 20:47:35 GMT
      ETag:
      - '"cf0740dd-0000-0100-0000-65cbd5670000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Set-Cookie:
      - ARRAffinity=9802f2c450efa958b5f9a61fc0b0586d3080a6befb1d8f5049165c73def69d21;Path=/;HttpOnly;Secure;Domain=azurearcdata-tmprofile-eastus.trafficmanager.net
      - ARRAffinitySameSite=9802f2c450efa958b5f9a61fc0b0586d3080a6befb1d8f5049165c73def69d21;Path=/;HttpOnly;SameSite=None;Secure;Domain=azurearcdata-tmprofile-eastus.trafficmanager.net
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: F9E2593208F146B9A5E9808322795381 Ref B: BN1AA2051013021 Ref C: 2024-02-13T20:47:35Z'
      X-Powered-By:
      - ASP.NET
      x-ms-correlation-request-id:
      - 01fe9647-8259-44b4-8657-4e0af3f6b770
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '19999'
      x-ms-request-id:
      - 85099aad-56d2-493d-baf8-59c4d7e02662
      x-ms-routing-request-id:
      - EASTUS:20240213T204736Z:01fe9647-8259-44b4-8657-4e0af3f6b770
    status:
      code: 201
      message: Created
version: 1
