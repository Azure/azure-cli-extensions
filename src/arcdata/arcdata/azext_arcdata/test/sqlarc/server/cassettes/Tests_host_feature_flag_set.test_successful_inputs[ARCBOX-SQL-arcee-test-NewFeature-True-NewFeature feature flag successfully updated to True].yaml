interactions:
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.31.0
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/arcee-test/providers/Microsoft.HybridCompute/machines/ARCBOX-SQL/extensions/WindowsAgent.SqlServer?api-version=2023-03-15-preview
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR8Xs
        o0cf3W3Wk2ZaF6u2qJbN3ez+zsHeZPfh9kH2ab69P5ne3z44n822D/Lzew9n5/lkeu/h3TpvqnU9
        zT+vq/WK3qFf8+02b9q7q7q6LGZ53dz9opjWVVOdt+NvX0/qYnZSLVbrNr+7yKbzYpk3d49fnTz5
        8vfefv0Tz+/m79p82XD/3y2Ws+qqOb7Il+349S8qX+f1ZV5/NPpomS1yQnfw+/Z6he9v7Nb1RS+V
        1TTDuOnFPGvaNT6jIazyui3y5qNHv/ij1XpSFs2cuvBhH/9gXedPszaj9trxRsS+nS1nZV7/JBFG
        etsd74737u/sjx8+pCbZuq2+Wl3U2Sz/olhWrt15Vjb56KN8mU3K/JhaLQjdqTb96FFbr+nbJm/b
        YnnB6J6+m5brWT4jBM6WTZstpxjG974/+og++SJbZhf5ghBE07PmlMESEwDOLxl99LyYEmnyN4Qw
        ofgyI/4wfZ+CaoCbT9d10V5/tZplNOEOw2b9nAgoH8/eFAtihmyxIjB7O3v3tnd3t3cfvNl9+Oje
        g0f3d36KwD7Ls5Zo+KzMgPj3fvFHL2R+n2MeXtbFZVHmFzk1FCQNjrbdi/xKQXTbfJ9GQnN4WYCE
        RJfXLaFEb7xeT4lNaQz0QqG0+ckivwItbslcG7+/YY6pQ/AXdTatMHcf7dCHZX6Zl/T72fK8qjG3
        9OLoIyJeQxNFnzPZAS79Qj57lJK8pNJv6r5ljB6l386zsp1fH6atmYCv3pykj1LMwd3d3bu7B6N0
        9+DRvU8f7RFyD3YP0/WqrLIZSLRuqOGXv9eh5bIn2fQtSfej9NV6CToevlzXl0Svl+X6olg+Sn/x
        LzlkMTietsVl/rSo82lb1df269+3/n2Xafr7fvTFa0L59emrnzx99ft+9Ig+oP/oq19y+Ch9XjQ0
        AoKd0hhWVd2mO4eQqknW5F/Q5BG843pqIOon1Fw+SbdeVK0id2eU0nwwGeRLIPDR74Z5oU4JiVB0
        VTlgDsdf0HSUzdiOmz6ToZ9Uy/PiYl3Th9XSwf99Pxr9vh/VOSGOz1/mdVHNzpZPs+uGenpA3xHz
        nRP34s8Ah9fXNNrF+KQqSyIVvduMP8+X9P50DEL8Abvf+97NaL6eE5ne5PXilcGgj/hLQcCh/P3v
        0+/SO0SL5IGwqPPnxYQH87tdZuWa8f3e93/JLxmlOtHpSilJ6iNlfNKM8L7M05mZ7HTq0yh8oWmI
        ZaFsUmEvnhH36bdpyASBOyUcRIRn9KdoFPqkrqta2Z4+Jq4Bri9If7+ezvPZmlpDz9BXy3VZ0lfE
        CtITfUQNLW/we/QN0c21p2F+CVaDKJHa+3ZFWkexJzTdpB3XoCs3HXttzXR4X3fYxfvGf/H3/Yh6
        xodxHg/6dtxAkAAjr8dOh7sPVfMA6hj/eKA7SH0NiEw90v2rqli2X9UlYzZvW9IMd++2eUlvtvX1
        +Bfv/JIx+QGk/qlzHm0znlaLu8Hrx6vVGab49/3o/t7+zv2D/N723oOdPXIzHh5sP7y3N9me7M12
        Z/mnu/fOZ3tEqo9+yS/5Jb/k/wFQ54WYqQgAAA==
    headers:
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Sat, 18 Nov 2023 18:39:09 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Server:
      - Kestrel
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      x-ms-correlation-request-id:
      - a1ba886a-4a05-4044-bcdc-0fae11831b22
      x-ms-ratelimit-remaining-subscription-reads:
      - '11984'
      x-ms-request-id:
      - 186c12d7-75b7-48a3-a623-3c0ea8ac136c
      x-ms-routing-request-id:
      - CENTRALINDIA:20231118T183910Z:a1ba886a-4a05-4044-bcdc-0fae11831b22
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/arcee-test/providers/Microsoft.HybridCompute/machines/ARCBOX-SQL/extensions/WindowsAgent.SqlServer",
      "name": "WindowsAgent.SqlServer", "type": "Microsoft.HybridCompute/machines/extensions",
      "location": "eastus", "properties": {"publisher": "Microsoft.AzureData", "type":
      "WindowsAgent.SqlServer", "typeHandlerVersion": "1.1.2504.99", "autoUpgradeMinorVersion":
      false, "enableAutomaticUpgrade": true, "settings": {"ExcludedSqlInstances":
      [], "SqlManagement": {"IsEnabled": true}, "LicenseType": "Paid", "enableExtendedSecurityUpdates":
      false, "esuLastUpdatedTimestamp": "2023-11-17T19:37:50Z", "FeatureFlags": [{"Name":
      "LeastPrivilege", "Enable": true}, {"Name": "NewFeature", "Enable": true}]},
      "provisioningState": "Succeeded", "instanceView": {"name": "WindowsAgent.SqlServer",
      "type": "WindowsAgent.SqlServer", "typeHandlerVersion": "1.1.2504.99", "status":
      {"code": "0", "level": "Information", "message": "Extension Message: SQL Server
      Extension Agent: Healthy; timestampUTC : 2023/11/18, 18:36:21.171; uploadStatus
      : OK;AutomaticBackups: Running;PurviewPlugin: {};AzureActiveDirectoryPlugin:
      {\r\n  \"MSSQLSERVER\": \"\"\r\n};: Listening on port 0;DatabaseMonitorArcPlugin:
      MonitoringPlugin (NotRunning), SqlAgentPlugin: {\"$type\":\"Microsoft.Azure.Hybrid.Sql.Models.AutomaticSqlBackupConfiguration,
      SqlAgent\",\"retentionPeriodInDays\":7,\"profiles\":{\"$type\":\"System.Collections.Generic.List`1[[Microsoft.Azure.Hybrid.Sql.Models.ShortTermRetentionAutomaticSqlBackupProfile,
      SqlAgent]], System.Private.CoreLib\",\"$values\":[]}}, Purview plugin: [], Azure
      active directory configuration plugin: [], Assessment Status: {\"AssessmentHistory\":[],\"Enabled\":false,\"ErrorMessage\":\"\",\"NextScheduledTime\":null,\"RunStatus\":\"NotRunning\",\"StartTime\":null},
      ODataServiceHostPlugin: {\"$type\":\"ArcSqlOData.ServiceHost.Models.ArcSqlODataConfiguration,
      ArcSqlOData.ServiceHost\"}, DatabaseMonitorArcPlugin: {\"$type\":\"Microsoft.SqlServer.Management.SqlServerHandlerData.DatabaseMonitorConfiguration,
      Microsoft.SqlServer.Management.SqlServerHandlerData\",\"endpointUrl\":\"https://telemetry.{0}.arcdataservices.com/\",\"endpointAppId\":\"524058e3-2702-4b98-932b-b2d1de613fd2\"}"}}}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '2272'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/arcee-test/providers/Microsoft.HybridCompute/machines/ARCBOX-SQL/extensions/WindowsAgent.SqlServer?api-version=2023-03-15-preview
  response:
    body:
      string: ''
    headers:
      Azure-AsyncOperation:
      - https://management.azure.com/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/providers/Microsoft.HybridCompute/locations/eastus/operationstatus/5a03ff25-9c99-435c-8c15-12e5204b4bc5?api-version=2019-08-02-preview&t=638359295516896112&c=MIIHADCCBeigAwIBAgITHgOOZnSUesiIBulFwAAAA45mdDANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDYwHhcNMjMxMTAxMDUxOTQ3WhcNMjQxMDI2MDUxOTQ3WjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAOtwjRh-1G1a4yBlEy6M1AUa9Hq-Ri3r8iWBtdkLmcsejm48p6INIQx7aREhaizCEfvdoJpt69YKxHHg88zVFCZmcjwwXfyQKfZfKO2LZ0pWDws_OPuxD2zTIQHyZera5VZWwqn0El0Y7Vi7ROfDODi-_coovUwQhkUnnRqi1qHAWHn132H1R0LTlVpve9I6Osbib8lkRd6e4jrVrCT96iC8MJcdr5TVBH8shaJT_PXgda0rZwA_YIKVO8URdjWCaNuuRbkrrCIfoCj0O3tyRVkK4VNNAcWiEZUJVj2Dkzpn6fxA01bNli4-RvP0GQ4rk-cK28IIq9KBLyHA7QLdF80CAwEAAaOCA-0wggPpMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFggvX2K4Py0SACAWQCAQowggHLBggrBgEFBQcBAQSCAb0wggG5MGMGCCsGAQUFBzAChldodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQkwyUEtJSU5UQ0EwMi5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNi5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDIuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3J0MFMGCCsGAQUFBzAChkdodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9CTDJQS0lJTlRDQTAyLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDA2LmNydDBTBggrBgEFBQcwAoZHaHR0cDovL2NybDMuYW1lLmdibC9haWEvQkwyUEtJSU5UQ0EwMi5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNi5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDIuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3J0MB0GA1UdDgQWBBTUZBUS9B61FL0tNpXxcrxMZE6PMzAOBgNVHQ8BAf8EBAMCBaAwggEmBgNVHR8EggEdMIIBGTCCARWgggERoIIBDYY_aHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JsMBcGA1UdIAQQMA4wDAYKKwYBBAGCN3sBATAfBgNVHSMEGDAWgBTxRmjG8cPwKy19i2rhsvm-NfzRQTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBAKKa3hOZEgZXFsSf1I0yVgExP5QoFqwoL9gFup0ENl3D9BNUuSsJYpNcqCY-6HyZeDCMQWsgI663Hc9xPq-LX47BRWkNpWdV-DOD2BbSL42M7aGdyNxYilWFKeTy-P0vZBhfJQHTsmZCM7T_sGB0iaeJSp03JIWGCbn1iFU8_0PLBRf6Xp18C8Yo-xv1QFPEKvrSSHof-6k2YTbYTIaoJQJ8I-uoFWm0csgtiYn5jiF6Cq1qSsJ1SecSkZ_Be0jsEECNlA26v7Pi_NqL_lKOpi752KtXbvn2IuMAmCQjr28NZz2fcJ1q-3CsBflvJzW1aBnQxCxC19jDjfSiGbcE11A&s=YQon1AsqdMIjkkKSMTMWbn9JbP2iG8MOLvAmQH11Ce3bDuv1HJ6bqObNFKDsT1309rxbYlzIhKNBXb5qidrrEKN9YMY4CROlbKgntzkz7hVokH-crT5Cng0QAgAo_8ygDY30jf14Mry7P82ODB9O3KOTbRgGhu-Gz2LYfe_n1IYCEOyWGPanurRBmyaclgHkwjU_qPFdIan_Ex2ROGBupdKnEYFV07so0-KTRzofSqTzEZFLCjPEu_NXOu56_yTDvpVrHgO-zry2LWLMPiOvyoIElHQIfxs0JOEyQ7norfJEO6M4hLnzjPYj3SzAQoEUenUHRtYsNWZ6L4pUpXBlTA&h=I_vp79cnKt6PxZB8h_JWPryqU9nj5R1s9uBK8l270pI
      Cache-Control:
      - no-cache
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      Date:
      - Sat, 18 Nov 2023 18:39:10 GMT
      Expires:
      - '-1'
      Location:
      - https://management.azure.com/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/providers/Microsoft.HybridCompute/locations/eastus/operationresults/5a03ff25-9c99-435c-8c15-12e5204b4bc5?api-version=2019-08-02-preview&t=638359295516896112&c=MIIHADCCBeigAwIBAgITHgOOZnSUesiIBulFwAAAA45mdDANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDYwHhcNMjMxMTAxMDUxOTQ3WhcNMjQxMDI2MDUxOTQ3WjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAOtwjRh-1G1a4yBlEy6M1AUa9Hq-Ri3r8iWBtdkLmcsejm48p6INIQx7aREhaizCEfvdoJpt69YKxHHg88zVFCZmcjwwXfyQKfZfKO2LZ0pWDws_OPuxD2zTIQHyZera5VZWwqn0El0Y7Vi7ROfDODi-_coovUwQhkUnnRqi1qHAWHn132H1R0LTlVpve9I6Osbib8lkRd6e4jrVrCT96iC8MJcdr5TVBH8shaJT_PXgda0rZwA_YIKVO8URdjWCaNuuRbkrrCIfoCj0O3tyRVkK4VNNAcWiEZUJVj2Dkzpn6fxA01bNli4-RvP0GQ4rk-cK28IIq9KBLyHA7QLdF80CAwEAAaOCA-0wggPpMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFggvX2K4Py0SACAWQCAQowggHLBggrBgEFBQcBAQSCAb0wggG5MGMGCCsGAQUFBzAChldodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQkwyUEtJSU5UQ0EwMi5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNi5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDIuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3J0MFMGCCsGAQUFBzAChkdodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9CTDJQS0lJTlRDQTAyLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDA2LmNydDBTBggrBgEFBQcwAoZHaHR0cDovL2NybDMuYW1lLmdibC9haWEvQkwyUEtJSU5UQ0EwMi5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNi5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0JMMlBLSUlOVENBMDIuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3J0MB0GA1UdDgQWBBTUZBUS9B61FL0tNpXxcrxMZE6PMzAOBgNVHQ8BAf8EBAMCBaAwggEmBgNVHR8EggEdMIIBGTCCARWgggERoIIBDYY_aHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JshjFodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDYuY3JsMBcGA1UdIAQQMA4wDAYKKwYBBAGCN3sBATAfBgNVHSMEGDAWgBTxRmjG8cPwKy19i2rhsvm-NfzRQTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBAKKa3hOZEgZXFsSf1I0yVgExP5QoFqwoL9gFup0ENl3D9BNUuSsJYpNcqCY-6HyZeDCMQWsgI663Hc9xPq-LX47BRWkNpWdV-DOD2BbSL42M7aGdyNxYilWFKeTy-P0vZBhfJQHTsmZCM7T_sGB0iaeJSp03JIWGCbn1iFU8_0PLBRf6Xp18C8Yo-xv1QFPEKvrSSHof-6k2YTbYTIaoJQJ8I-uoFWm0csgtiYn5jiF6Cq1qSsJ1SecSkZ_Be0jsEECNlA26v7Pi_NqL_lKOpi752KtXbvn2IuMAmCQjr28NZz2fcJ1q-3CsBflvJzW1aBnQxCxC19jDjfSiGbcE11A&s=dTsEo4KqsFlS68dzm-Xcd8_abg64LCOFonutZIikIMS7zsTTffuLbVIrvtJvhisUzMHr-ompzhvpwFIZqOwyRyl8lpdpXyH4l26E84BKw5Hgy8L4H4esKPeP-CXNXDji0bud3QhK7NdI0tv_YdXKMD_zkCYL_BqCLuW-nTDRIZLv9lZ674uB7hWYWVjgm6WyxzOZqur0n_Tg0clTKY8vBSNVWYcd7w5Gex3FNpRvFHUUU2YOY4W_t2OfPLv8ZS65XAgYXoKdN0jjFBgLV2wSLrfDy1kkTiqnUdhj7rPB21JMWw7D13AHfbR3VDJNxSXyqXsrvvfKxy1CBhmi2lYIjg&h=CCP4sQ_CkNmUekNzpnK5sRgC-8G9Up0GSxQeNl7HEQY
      Pragma:
      - no-cache
      Retry-After:
      - '120'
      Server:
      - Kestrel
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      x-ms-correlation-request-id:
      - fcff8789-6de0-4c21-80ad-de72a2d910fb
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '319'
      x-ms-request-id:
      - b2a1a12f-cc50-4df0-8b40-c6e9548b4abb
      x-ms-routing-request-id:
      - CENTRALINDIA:20231118T183911Z:fcff8789-6de0-4c21-80ad-de72a2d910fb
    status:
      code: 202
      message: Accepted
version: 1
