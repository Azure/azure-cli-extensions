interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.10.11 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 1f424fb5-c6be-11ee-b010-d8bbc1c51c4b
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-ci-test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ARCBOX-SQL?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL","name":"ArcBox-SQL","type":"microsoft.azurearcdata/sqlserverinstances","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T16:58:34.0669699Z","lastModifiedBy":"aagonzalez@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-02-08T20:10:22.8241707Z"},"properties":{"version":"SQL
        Server 2019","edition":"Developer","containerResourceId":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL","createTime":null,"vCore":"1","cores":null,"status":"Connected","patchLevel":"15.0.2104.1","collation":"SQL_Latin1_General_CP1_CI_AS","currentVersion":"15.0.2000.5","instanceName":"MSSQLSERVER","tcpDynamicPorts":"","tcpStaticPorts":"1433","productId":"Unknown","licenseType":"Free","azureDefenderStatusLastUpdated":null,"azureDefenderStatus":"Unknown","provisioningState":"Succeeded","lastInventoryUploadTime":"2024-02-08T19:57:45.8130693Z","lastUsageUploadTime":"2024-02-08T19:57:46.3792906Z","hostType":null,"alwaysOnRole":"None","failoverCluster":null,"backupPolicy":{"retentionPeriodDays":7,"fullBackupDays":7,"differentialBackupHours":12,"transactionLogBackupMinutes":5},"upgradeLockedUntil":null,"monitoring":{"enabled":true}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '1476'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 08 Feb 2024 20:10:35 GMT
      ETag:
      - '"cb02a738-0000-0100-0000-65c5353b0000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 2B5B33B39E7047EA8E0C238593D26907 Ref B: BN1AA2051012027 Ref C: 2024-02-08T20:10:36Z'
      x-ms-correlation-request-id:
      - 81312705-082c-4a33-8d8a-9ed4620836fb
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '99999'
      x-ms-request-id:
      - cbafa8bf-ae36-4dfa-b755-3cc2731745f3
      x-ms-routing-request-id:
      - EASTUS:20240208T201036Z:81312705-082c-4a33-8d8a-9ed4620836fb
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.31.0
    method: GET
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer?api-version=2023-03-15-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL/extensions/WindowsAgent.SqlServer","name":"WindowsAgent.SqlServer","type":"Microsoft.HybridCompute/machines/extensions","location":"eastus","properties":{"publisher":"Microsoft.AzureData","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","autoUpgradeMinorVersion":false,"enableAutomaticUpgrade":true,"settings":{"SqlManagement":{"IsEnabled":true},"ExcludedSqlInstances":[""],"LicenseType":"Paid"},"provisioningState":"Succeeded","instanceView":{"name":"WindowsAgent.SqlServer","type":"WindowsAgent.SqlServer","typeHandlerVersion":"1.1.2566.109","status":{"code":"0","level":"Information","message":"Extension
        Message: SQL Server Extension Agent: Healthy; timestampUTC : 2024/02/08, 20:09:20.575;
        uploadStatus : OK;AutomaticBackups: Running;PurviewPlugin: {};AzureActiveDirectoryPlugin:
        {};: Listening on port 0;DatabaseMonitorArcPlugin: {\"State\":\"Running\",\"MetricsUploadStatus\":\"OK\"},
        SqlAgentPlugin: {\"$type\":\"Microsoft.Azure.Hybrid.Sql.Models.AutomaticSqlBackupConfiguration,
        SqlAgent\",\"retentionPeriodInDays\":7,\"profiles\":{\"$type\":\"System.Collections.Generic.List`1[[Microsoft.Azure.Hybrid.Sql.Models.ShortTermRetentionAutomaticSqlBackupProfile,
        SqlAgent]], System.Private.CoreLib\",\"$values\":[]}}, Purview plugin: [],
        Azure active directory configuration plugin: [], Assessment Status: {\"AssessmentHistory\":[],\"Enabled\":false,\"ErrorMessage\":\"\",\"NextScheduledTime\":null,\"RunStatus\":\"NotRunning\",\"StartTime\":null},
        ODataServiceHostPlugin: {\"$type\":\"ArcSqlOData.ServiceHost.Models.ArcSqlODataConfiguration,
        ArcSqlOData.ServiceHost\"}, DatabaseMonitorArcPlugin: {\"$type\":\"Microsoft.SqlServer.Management.SqlServerHandlerData.DatabaseMonitorConfiguration,
        Microsoft.SqlServer.Management.SqlServerHandlerData\",\"endpointUrl\":\"https://telemetry.{0}.arcdataservices.com/\",\"endpointAppId\":\"524058e3-2702-4b98-932b-b2d1de613fd2\"}"}}}}'
    headers:
      Cache-Control:
      - no-cache
      Content-Length:
      - '2047'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 08 Feb 2024 20:10:37 GMT
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 6832317DF54848178B4E06F01C3F8CF6 Ref B: BN1AA2051012029 Ref C: 2024-02-08T20:10:37Z'
      x-ms-correlation-request-id:
      - 597b57fc-d565-435c-9419-5a72304431ae
      x-ms-ratelimit-remaining-subscription-reads:
      - '11999'
      x-ms-request-id:
      - 87ea7356-571b-4f98-8b31-5361959c1ad6
      x-ms-routing-request-id:
      - EASTUS:20240208T201037Z:597b57fc-d565-435c-9419-5a72304431ae
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus", "properties": {"version": "SQL Server 2019", "edition":
      "Developer", "instanceName": "MSSQLSERVER", "backupPolicy": {"retentionPeriodDays":
      32, "fullBackupDays": 7, "differentialBackupHours": 24, "transactionLogBackupMinutes":
      15}, "monitoring": {"enabled": true}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '288'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-mgmt-azurearcdata/1.1.02586.818 Python/3.10.11 (Windows-10-10.0.22621-SP0)
      x-ms-client-request-id:
      - 1fb5794e-c6be-11ee-8c0c-d8bbc1c51c4b
    method: PUT
    uri: https://mock-host/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-ci-test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ARCBOX-SQL?api-version=2024-03-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourceGroups/aagonzalez-CI-Test-mk6/providers/Microsoft.AzureArcData/sqlServerInstances/ArcBox-SQL","name":"ArcBox-SQL","type":"microsoft.azurearcdata/sqlserverinstances","location":"eastus","systemData":{"createdBy":"a12e8ccb-0fcd-46f8-b6a1-b9df7a9d7231","createdByType":"Application","createdAt":"2024-02-08T16:58:34.0669699Z","lastModifiedBy":"aagonzalez@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2024-02-08T20:10:37.5150991Z"},"properties":{"version":"SQL
        Server 2019","edition":"Developer","containerResourceId":"/subscriptions/a5082b19-8a6e-4bc5-8fdd-8ef39dfebc39/resourcegroups/aagonzalez-CI-Test-mk6/providers/Microsoft.HybridCompute/machines/ArcBox-SQL","createTime":null,"vCore":"1","cores":null,"status":"Connected","patchLevel":"15.0.2104.1","collation":"SQL_Latin1_General_CP1_CI_AS","currentVersion":"15.0.2000.5","instanceName":"MSSQLSERVER","tcpDynamicPorts":"","tcpStaticPorts":"1433","productId":"Unknown","licenseType":"Free","azureDefenderStatusLastUpdated":null,"azureDefenderStatus":"Unknown","provisioningState":"Accepted","lastInventoryUploadTime":"2024-02-08T19:57:45.8130693Z","lastUsageUploadTime":"2024-02-08T19:57:46.3792906Z","hostType":null,"alwaysOnRole":"None","failoverCluster":null,"backupPolicy":{"retentionPeriodDays":32,"fullBackupDays":7,"differentialBackupHours":24,"transactionLogBackupMinutes":15},"upgradeLockedUntil":null,"monitoring":{"enabled":true}}}'
    headers:
      Azure-AsyncOperation:
      - https://management.azure.com/providers/Microsoft.AzureArcData/locations/EASTUS/operationStatuses/449d7543-0ddc-4792-aca7-840a6efe544e*C906F38C07D4F836F526FED232979609A8F846D164807297CBA32165DEAABB09?api-version=2024-02-01-preview&t=638430198381869764&c=MIIHADCCBeigAwIBAgITfARlFdSUZK8kechtYQAABGUV1DANBgkqhkiG9w0BAQsFADBEMRMwEQYKCZImiZPyLGQBGRYDR0JMMRMwEQYKCZImiZPyLGQBGRYDQU1FMRgwFgYDVQQDEw9BTUUgSW5mcmEgQ0EgMDUwHhcNMjQwMTMwMjA1NjEzWhcNMjUwMTI0MjA1NjEzWjBAMT4wPAYDVQQDEzVhc3luY29wZXJhdGlvbnNpZ25pbmdjZXJ0aWZpY2F0ZS5tYW5hZ2VtZW50LmF6dXJlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALYMYYup1R1RZPIwVtk7z89JkrsDK8coPmULAovQOy3jgtdJ-z5oyCO28-zQ4LRHmuyeq1ROWdQR5e828FYihyBqnnQQea3EcS6CFfXpYes-7NPXy73E_P3goJLJU7bfuZ4iDPGZxXIIjo6_Uex0eX_AuBJeq8ZFcmNy3x0loDHkDww9lMprf49PmIZJEAshTnLBtfT3BC7JAuTTl2duIcC6YRT8vITdFw1HxFqywnOqD35zttD8vp0XowEP4ksBLfhJWduspxICp4Yu2ouSlh-T4GmsjQaTjrzZpw29eEj3gUyzTfkDY-WEGsEujkl9a9FCX1_AvT-9Eqmd7uYqV6kCAwEAAaOCA-0wggPpMCcGCSsGAQQBgjcVCgQaMBgwCgYIKwYBBQUHAwEwCgYIKwYBBQUHAwIwPQYJKwYBBAGCNxUHBDAwLgYmKwYBBAGCNxUIhpDjDYTVtHiE8Ys-hZvdFs6dEoFggvX2K4Py0SACAWQCAQowggHLBggrBgEFBQcBAQSCAb0wggG5MGMGCCsGAQUFBzAChldodHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpaW5mcmEvQ2VydHMvQ08xUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNS5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmwxLmFtZS5nYmwvYWlhL0NPMVBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3J0MFMGCCsGAQUFBzAChkdodHRwOi8vY3JsMi5hbWUuZ2JsL2FpYS9DTzFQS0lJTlRDQTAxLkFNRS5HQkxfQU1FJTIwSW5mcmElMjBDQSUyMDA1LmNydDBTBggrBgEFBQcwAoZHaHR0cDovL2NybDMuYW1lLmdibC9haWEvQ08xUEtJSU5UQ0EwMS5BTUUuR0JMX0FNRSUyMEluZnJhJTIwQ0ElMjAwNS5jcnQwUwYIKwYBBQUHMAKGR2h0dHA6Ly9jcmw0LmFtZS5nYmwvYWlhL0NPMVBLSUlOVENBMDEuQU1FLkdCTF9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3J0MB0GA1UdDgQWBBTDXVhSVDy9FvMjLTrSyU7UjKUXqzAOBgNVHQ8BAf8EBAMCBaAwggEmBgNVHR8EggEdMIIBGTCCARWgggERoIIBDYY_aHR0cDovL2NybC5taWNyb3NvZnQuY29tL3BraWluZnJhL0NSTC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMS5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMi5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsMy5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JshjFodHRwOi8vY3JsNC5hbWUuZ2JsL2NybC9BTUUlMjBJbmZyYSUyMENBJTIwMDUuY3JsMBcGA1UdIAQQMA4wDAYKKwYBBAGCN3sBATAfBgNVHSMEGDAWgBR61hmFKHlscXYeYPjzS--iBUIWHTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggEBAHyzMCBJbTmiP_gOh98fZltsl9jQdlB-g_OYCr82viu1SgLxte7Za3Vtb3XRCTquz_JfY_4eQJpUy0p6F37f0oaTQkBvUF7HDDvkm49rmKF4nDFjPGNEqm53KbVEak46WTgD9fGZLQH1XouZGRe0LxQVIWm-K-MYMbrDWF_njKsIaV5Z4VxgFVaX5SlzHvr6coDX5oXwwksEsw8E8g0LfZCpfT5mCwgDPrDv2Ekk26koWUYlmJWgkky22R538qwuJmE6F33YwWStmUGfZfFDyjek8Rd_KyuEuC9IZfk4TTmVjyJmKPi5GhIJGwiATMpLJwt5jD_Hkgbq6vMwud4ZbIE&s=k-uWT4uNeKEIIMWTzIs3hDck6imNPdNL_zej_4umrP7h-x9W2BImud14p82oOnOuGp4KOSGaIal3jccWi8MqCqtX7K-QP4oCLLUuu3TQDNFhvtRLQZPB1qO8auScSsjrsYzCDc99sMl7GU9i6AizEMlzxVoJKYf_o3Iw2LCwAMCxoQOMnqTrUz1GKm1rVba4_u4c0RJsMYDlQ2Z2nLJ_gyoikyUsEfCdgUhPQOX7kHIqGSW88xal1oKPT1Wge-XvzTsh-LlJPo_utLC0AZMM5Bt_7T-y9cqQUDRcUG0ZXwqz8bKY9sP2_tJkH1qABDMxSgGpn6vDeYnk0obQRQl1MA&h=OAUWEL-awZU57c8GH0VfHYtzARm3LKw-Zcbr2KcLxok
      Cache-Control:
      - no-cache
      Content-Length:
      - '1477'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 08 Feb 2024 20:10:37 GMT
      ETag:
      - '"cb027a39-0000-0100-0000-65c5353d0000"'
      Expires:
      - '-1'
      Pragma:
      - no-cache
      Set-Cookie:
      - ARRAffinity=9802f2c450efa958b5f9a61fc0b0586d3080a6befb1d8f5049165c73def69d21;Path=/;HttpOnly;Secure;Domain=azurearcdata-tmprofile-eastus.trafficmanager.net
      - ARRAffinitySameSite=9802f2c450efa958b5f9a61fc0b0586d3080a6befb1d8f5049165c73def69d21;Path=/;HttpOnly;SameSite=None;Secure;Domain=azurearcdata-tmprofile-eastus.trafficmanager.net
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Accept-Encoding
      X-Cache:
      - CONFIG_NOCACHE
      X-Content-Type-Options:
      - nosniff
      X-MSEdge-Ref:
      - 'Ref A: 4AB75409A02042F9A7EC581631CEC23A Ref B: BN1AA2051012027 Ref C: 2024-02-08T20:10:37Z'
      X-Powered-By:
      - ASP.NET
      x-ms-correlation-request-id:
      - d3c1e84d-ecd8-4822-a809-46bfe0d1a66e
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '9999'
      x-ms-request-id:
      - 449d7543-0ddc-4792-aca7-840a6efe544e
      x-ms-routing-request-id:
      - EASTUS:20240208T201038Z:d3c1e84d-ecd8-4822-a809-46bfe0d1a66e
    status:
      code: 201
      message: Created
version: 1
