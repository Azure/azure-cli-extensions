# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for
# license information.
#
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.
# --------------------------------------------------------------------------

import os
from azure.cli.testsdk import ScenarioTest
from .. import try_manual, raise_if, calc_coverage
from azure.cli.testsdk import ResourceGroupPreparer


TEST_DIR = os.path.abspath(os.path.join(os.path.abspath(__file__), '..'))


# Env setup
@try_manual
def setup(test, rg):
    pass


# EXAMPLE: /Accounts/put/Accounts_Create
@try_manual
def step__accounts_put_accounts_create(test, rg):
    test.cmd('az datashare account create '
             '--location "West US 2" '
             '--tags tag1="Red" tag2="White" '
             '--name "{myAccount}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("location", "West US 2", case_sensitive=False),
                 test.check("tags.tag1", "Red", case_sensitive=False),
                 test.check("tags.tag2", "White", case_sensitive=False),
                 test.check("name", "{myAccount}", case_sensitive=False),
             ])
    test.cmd('az datashare account wait --created '
             '--name "{myAccount}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Accounts/get/Accounts_Get
@try_manual
def step__accounts_get_accounts_get(test, rg):
    test.cmd('az datashare account show '
             '--name "{myAccount}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("location", "West US 2", case_sensitive=False),
                 test.check("tags.tag1", "Red", case_sensitive=False),
                 test.check("tags.tag2", "White", case_sensitive=False),
                 test.check("name", "{myAccount}", case_sensitive=False),
             ])


# EXAMPLE: /Accounts/get/Accounts_ListByResourceGroup
@try_manual
def step__accounts_get_accounts_listbyresourcegroup(test, rg):
    test.cmd('az datashare account list '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Accounts/get/Accounts_ListBySubscription
@try_manual
def step__accounts_get_accounts_listbysubscription(test, rg):
    test.cmd('az datashare account list '
             '-g ""',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Accounts/patch/Accounts_Update
@try_manual
def step__accounts_patch_accounts_update(test, rg):
    test.cmd('az datashare account update '
             '--name "{myAccount}" '
             '--tags tag1="Red" tag2="White" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("location", "West US 2", case_sensitive=False),
                 test.check("tags.tag1", "Red", case_sensitive=False),
                 test.check("tags.tag2", "White", case_sensitive=False),
                 test.check("name", "{myAccount}", case_sensitive=False),
             ])


# EXAMPLE: /ConsumerInvitations/get/ConsumerInvitations_Get
@try_manual
def step__consumerinvitations_get(test, rg):
    test.cmd('az datashare consumer-invitation show '
             '--invitation-id "dfbbc788-19eb-4607-a5a1-c74181bfff03" '
             '--location "East US 2"',
             checks=[])


# EXAMPLE: /ConsumerInvitations/post/ConsumerInvitations_RejectInvitation
@try_manual
def step__consumerinvitations_post(test, rg):
    test.cmd('az datashare consumer-invitation reject-invitation '
             '--invitation-id "dfbbc788-19eb-4607-a5a1-c74181bfff03" '
             '--location "East US 2"',
             checks=[])


# EXAMPLE: /Shares/put/Shares_Create
@try_manual
def step__shares_put_shares_create(test, rg):
    test.cmd('az datashare share create '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--description "share description" '
             '--share-kind "CopyBased" '
             '--terms "Confidential" '
             '--name "{myShare}"',
             checks=[
                 test.check("description", "share description", case_sensitive=False),
                 test.check("shareKind", "CopyBased", case_sensitive=False),
                 test.check("terms", "Confidential", case_sensitive=False),
                 test.check("name", "{myShare}", case_sensitive=False),
             ])


# EXAMPLE: /ConsumerInvitations/get/ConsumerInvitations_ListInvitations
@try_manual
def step__consumerinvitations_get2(test, rg):
    test.cmd('az datashare consumer-invitation list-invitation',
             checks=[])


# EXAMPLE: /DataSets/put/DataSets_KustoDatabase_Create
@try_manual
def step__datasets_put_datasets_kustodatabase_create(test, rg):
    test.cmd('az datashare data-set create '
             '--account-name "{myAccount}" '
             '--kusto-database-data-set kusto-database-resource-id="/subscriptions/{subscription_id}/resourceGroups/{rg'
             '}/providers/Microsoft.Kusto/clusters/Cluster1/databases/Database1" '
             '--name "{myDataSet}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /DataSets/put/DataSets_KustoCluster_Create
@try_manual
def step__datasets_put_datasets_kustocluster_create(test, rg):
    test.cmd('az datashare data-set create '
             '--account-name "{myAccount}" '
             '--kusto-cluster-data-set kusto-cluster-resource-id="/subscriptions/{subscription_id}/resourceGroups/{rg}/'
             'providers/Microsoft.Kusto/clusters/Cluster1" '
             '--name "{myDataSet}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /Shares/get/Shares_ListByAccount
@try_manual
def step__shares_get_shares_listbyaccount(test, rg):
    test.cmd('az datashare share list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Shares/post/Shares_ListSynchronizationDetails
@try_manual
def step__shares_post(test, rg):
    test.cmd('az datashare share list-synchronization-detail '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShare}" '
             '--synchronization-id "7d0536a6-3fa5-43de-b152-3d07c4f6b2bb"',
             checks=[])


# EXAMPLE: /DataSetMappings/put/DataSetMappings_SqlDWDataSetToAdlsGen2File_Create
@try_manual
def step__datasetmappings_put(test, rg):
    test.cmd('az datashare data-set-mapping create '
             '--account-name "{myAccount}" '
             '--adls-gen2-file-data-set-mapping data-set-id="a08f184b-0567-4b11-ba22-a1199336d226" file-path="file21" '
             'file-system="fileSystem" output-type="Csv" resource-group="{rg}" storage-account-name="storage2" '
             'subscription-id="433a8dfd-e5d5-4e77-ad86-90acdc75eb1a" '
             '--name "{myDataSetMapping}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[
                 test.check("name", "{myDataSetMapping}", case_sensitive=False),
             ])


# EXAMPLE: /DataSets/put/DataSets_Create
@try_manual
def step__datasets_put_datasets_create(test, rg):
    test.cmd('az datashare data-set create '
             '--account-name "{myAccount}" '
             '--blob-data-set container-name="C1" file-path="file21" resource-group="{rg}" '
             'storage-account-name="storage2" subscription-id="433a8dfd-e5d5-4e77-ad86-90acdc75eb1a" '
             '--name "{myDataSet}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /DataSets/put/DataSets_SqlDBTable_Create
@try_manual
def step__datasets_put_datasets_sqldbtable_create(test, rg):
    test.cmd('az datashare data-set create '
             '--account-name "{myAccount}" '
             '--sqldb-table-data-set database-name="SqlDB1" schema-name="dbo" sql-server-resource-id="/subscriptions/{s'
             'ubscription_id}/resourceGroups/{rg}/providers/Microsoft.Sql/servers/Server1" table-name="Table1" '
             '--name "{myDataSet}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /DataSets/put/DataSets_SqlDWTable_Create
@try_manual
def step__datasets_put_datasets_sqldwtable_create(test, rg):
    test.cmd('az datashare data-set create '
             '--account-name "{myAccount}" '
             '--sqldw-table-data-set data-warehouse-name="DataWarehouse1" schema-name="dbo" '
             'sql-server-resource-id="/subscriptions/{subscription_id}/resourceGroups/{rg}/providers/Microsoft.Sql/serv'
             'ers/Server1" table-name="Table1" '
             '--name "{myDataSet}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /DataSetMappings/put/DataSetMappings_SqlDW_Create
@try_manual
def step__datasetmappings_put2(test, rg):
    test.cmd('az datashare data-set-mapping create '
             '--account-name "{myAccount}" '
             '--sqldw-table-data-set-mapping data-set-id="a08f184b-0567-4b11-ba22-a1199336d226" '
             'data-warehouse-name="DataWarehouse1" schema-name="dbo" sql-server-resource-id="/subscriptions/{subscripti'
             'on_id}/resourceGroups/{rg}/providers/Microsoft.Sql/servers/Server1" table-name="Table1" '
             '--name "{myDataSetMapping}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[
                 test.check("name", "{myDataSetMapping}", case_sensitive=False),
             ])


# EXAMPLE: /DataSets/get/DataSets_ListByShare
@try_manual
def step__datasets_get_datasets_listbyshare(test, rg):
    test.cmd('az datashare data-set list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /DataSets/get/DataSets_Get
@try_manual
def step__datasets_get_datasets_get(test, rg):
    test.cmd('az datashare data-set show '
             '--account-name "{myAccount}" '
             '--name "{myDataSet}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[
                 test.check("name", "{myDataSet}", case_sensitive=False),
             ])


# EXAMPLE: /Shares/post/Shares_ListSynchronizations
@try_manual
def step__shares_post_shares_listsynchronizations(test, rg):
    test.cmd('az datashare share list-synchronization '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShare}"',
             checks=[])


# EXAMPLE: /Invitations/put/Invitations_Create
@try_manual
def step__invitations_put_invitations_create(test, rg):
    test.cmd('az datashare invitation create '
             '--account-name "{myAccount}" '
             '--target-email "receiver@microsoft.com" '
             '--name "{myInvitation}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[
                 test.check("targetEmail", "receiver@microsoft.com", case_sensitive=False),
                 test.check("name", "{myInvitation}", case_sensitive=False),
             ])


# EXAMPLE: /Invitations/get/Invitations_Get
@try_manual
def step__invitations_get_invitations_get(test, rg):
    test.cmd('az datashare invitation show '
             '--account-name "{myAccount}" '
             '--name "{myInvitation}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[
                 test.check("targetEmail", "receiver@microsoft.com", case_sensitive=False),
                 test.check("name", "{myInvitation}", case_sensitive=False),
             ])


# EXAMPLE: /Invitations/get/Invitations_ListByShare
@try_manual
def step__invitations_get_invitations_listbyshare(test, rg):
    test.cmd('az datashare invitation list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /DataSetMappings/put/DataSetMappings_SqlDB_Create
@try_manual
def step__datasetmappings_put3(test, rg):
    test.cmd('az datashare data-set-mapping create '
             '--account-name "{myAccount}" '
             '--sqldb-table-data-set-mapping database-name="Database1" data-set-id="a08f184b-0567-4b11-ba22-a1199336d22'
             '6" schema-name="dbo" sql-server-resource-id="/subscriptions/{subscription_id}/resourceGroups/{rg}/provide'
             'rs/Microsoft.Sql/servers/Server1" table-name="Table1" '
             '--name "{myDataSetMapping}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[
                 test.check("name", "{myDataSetMapping}", case_sensitive=False),
             ])


# EXAMPLE: /Invitations/delete/Invitations_Delete
@try_manual
def step__invitations_delete_invitations_delete(test, rg):
    test.cmd('az datashare invitation delete -y '
             '--account-name "{myAccount}" '
             '--name "{myInvitation}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /ProviderShareSubscriptions/get/ProviderShareSubscriptions_GetByShare
@try_manual
def step__providersharesubscriptions_get(test, rg):
    test.cmd('az datashare provider-share-subscription get-by-share '
             '--account-name "{myAccount}" '
             '--provider-share-subscription-id "4256e2cf-0f82-4865-961b-12f83333f487" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /DataSetMappings/put/DataSetMappings_Create
@try_manual
def step__datasetmappings_put_datasetmappings_create(test, rg):
    test.cmd('az datashare data-set-mapping create '
             '--account-name "{myAccount}" '
             '--blob-data-set-mapping container-name="C1" data-set-id="a08f184b-0567-4b11-ba22-a1199336d226" '
             'file-path="file21" resource-group="{rg}" storage-account-name="storage2" subscription-id="433a8dfd-e5d5-4'
             'e77-ad86-90acdc75eb1a" '
             '--name "{myDataSetMapping}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[
                 test.check("name", "{myDataSetMapping}", case_sensitive=False),
             ])


# EXAMPLE: /ProviderShareSubscriptions/get/ProviderShareSubscriptions_ListByShare
@try_manual
def step__providersharesubscriptions_get2(test, rg):
    test.cmd('az datashare provider-share-subscription list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /DataSets/delete/DataSets_Delete
@try_manual
def step__datasets_delete_datasets_delete(test, rg):
    test.cmd('az datashare data-set delete -y '
             '--account-name "{myAccount}" '
             '--name "{myDataSet}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /Shares/get/Shares_Get
@try_manual
def step__shares_get_shares_get(test, rg):
    test.cmd('az datashare share show '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShare}"',
             checks=[
                 test.check("name", "{myShare}", case_sensitive=False),
             ])


# EXAMPLE: /ShareSubscriptions/put/ShareSubscriptions_Create
@try_manual
def step__sharesubscriptions_put(test, rg):
    test.cmd('az datashare share-subscription create '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--invitation-id "12345678-1234-1234-12345678abd" '
             '--source-share-location "eastus2" '
             '--name "{myShareSubscription}"',
             checks=[
                 test.check("sourceShareLocation", "eastus2", case_sensitive=False),
                 test.check("name", "{myShareSubscription}", case_sensitive=False),
             ])


# EXAMPLE: /ShareSubscriptions/post/ShareSubscriptions_CancelSynchronization
@try_manual
def step__sharesubscriptions_post(test, rg):
    test.cmd('az datashare share-subscription cancel-synchronization '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShareSubscription}" '
             '--synchronization-id "7d0536a6-3fa5-43de-b152-3d07c4f6b2bb"',
             checks=[])


# EXAMPLE: /ShareSubscriptions/post/ShareSubscriptions_ListSourceShareSynchronizationSettings
@try_manual
def step__sharesubscriptions_post2(test, rg):
    test.cmd('az datashare share-subscription list-source-share-synchronization-setting '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShareSubscription2}"',
             checks=[])


# EXAMPLE: /ShareSubscriptions/post/ShareSubscriptions_ListSynchronizationDetails
@try_manual
def step__sharesubscriptions_post3(test, rg):
    test.cmd('az datashare share-subscription list-synchronization-detail '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShareSubscription2}" '
             '--synchronization-id "7d0536a6-3fa5-43de-b152-3d07c4f6b2bb"',
             checks=[])


# EXAMPLE: /ShareSubscriptions/post/ShareSubscriptions_ListSynchronizations
@try_manual
def step__sharesubscriptions_post4(test, rg):
    test.cmd('az datashare share-subscription list-synchronization '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShareSubscription2}"',
             checks=[])


# EXAMPLE: /ShareSubscriptions/get/ShareSubscriptions_ListByAccount
@try_manual
def step__sharesubscriptions_get(test, rg):
    test.cmd('az datashare share-subscription list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 2),
             ])


# EXAMPLE: /DataSetMappings/get/DataSetMappings_ListByShareSubscription
@try_manual
def step__datasetmappings_get(test, rg):
    test.cmd('az datashare data-set-mapping list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /ShareSubscriptions/post/ShareSubscriptions_Synchronize
@try_manual
def step__sharesubscriptions_post5(test, rg):
    test.cmd('az datashare share-subscription synchronize '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShareSubscription}" '
             '--synchronization-mode "Incremental"',
             checks=[])


# EXAMPLE: /ConsumerSourceDataSets/get/ConsumerSourceDataSets_ListByShareSubscription
@try_manual
def step__consumersourcedatasets_get(test, rg):
    test.cmd('az datashare consumer-source-data-set list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShare}"',
             checks=[])


# EXAMPLE: /DataSetMappings/get/DataSetMappings_Get
@try_manual
def step__datasetmappings_get_datasetmappings_get(test, rg):
    test.cmd('az datashare data-set-mapping show '
             '--account-name "{myAccount}" '
             '--name "{myDataSetMapping}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[
                 test.check("name", "{myDataSetMapping}", case_sensitive=False),
             ])


# EXAMPLE: /DataSetMappings/delete/DataSetMappings_Delete
@try_manual
def step__datasetmappings_delete(test, rg):
    test.cmd('az datashare data-set-mapping delete -y '
             '--account-name "{myAccount}" '
             '--name "{myDataSetMapping}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[])


# EXAMPLE: /ProviderShareSubscriptions/post/ProviderShareSubscriptions_Reinstate
@try_manual
def step__providersharesubscriptions_post(test, rg):
    test.cmd('az datashare provider-share-subscription reinstate '
             '--account-name "{myAccount}" '
             '--provider-share-subscription-id "4256e2cf-0f82-4865-961b-12f83333f487" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /ProviderShareSubscriptions/post/ProviderShareSubscriptions_Revoke
@try_manual
def step__providersharesubscriptions_post2(test, rg):
    test.cmd('az datashare provider-share-subscription revoke '
             '--account-name "{myAccount}" '
             '--provider-share-subscription-id "4256e2cf-0f82-4865-961b-12f83333f487" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[])


# EXAMPLE: /SynchronizationSettings/put/SynchronizationSettings_Create
@try_manual
def step__synchronizationsettings_put(test, rg):
    test.cmd('az datashare synchronization-setting create '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}" '
             '--scheduled-synchronization-setting recurrence-interval="Day" synchronization-time="2018-11-14T04:47:52.9'
             '614956Z" '
             '--name "{myDataSet}"',
             checks=[])


# EXAMPLE: /SynchronizationSettings/get/SynchronizationSettings_Get
@try_manual
def step__synchronizationsettings_get(test, rg):
    test.cmd('az datashare synchronization-setting show '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}" '
             '--name "{mySynchronizationSetting}"',
             checks=[])


# EXAMPLE: /SynchronizationSettings/get/SynchronizationSettings_ListByShare
@try_manual
def step__synchronizationsettings_get2(test, rg):
    test.cmd('az datashare synchronization-setting list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /SynchronizationSettings/delete/SynchronizationSettings_Delete
@try_manual
def step__synchronizationsettings_delete(test, rg):
    test.cmd('az datashare synchronization-setting delete -y '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-name "{myShare}" '
             '--name "{mySynchronizationSetting}"',
             checks=[])


# EXAMPLE: /Shares/delete/Shares_Delete
@try_manual
def step__shares_delete_shares_delete(test, rg):
    test.cmd('az datashare share delete -y '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShare}"',
             checks=[])


# EXAMPLE: /ShareSubscriptions/get/ShareSubscriptions_Get
@try_manual
def step__sharesubscriptions_get2(test, rg):
    test.cmd('az datashare share-subscription show '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShareSubscription}"',
             checks=[
                 test.check("name", "{myShareSubscription}", case_sensitive=False),
             ])


# EXAMPLE: /Triggers/put/Triggers_Create
@try_manual
def step__triggers_put_triggers_create(test, rg):
    test.cmd('az datashare trigger create '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}" '
             '--scheduled-trigger recurrence-interval="Day" synchronization-mode="Incremental" '
             'synchronization-time="2018-11-14T04:47:52.9614956Z" '
             '--name "{myTrigger}"',
             checks=[
                 test.check("name", "{myTrigger}", case_sensitive=False),
             ])


# EXAMPLE: /Triggers/get/Triggers_Get
@try_manual
def step__triggers_get_triggers_get(test, rg):
    test.cmd('az datashare trigger show '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}" '
             '--name "{myTrigger}"',
             checks=[
                 test.check("name", "{myTrigger}", case_sensitive=False),
             ])


# EXAMPLE: /Triggers/get/Triggers_ListByShareSubscription
@try_manual
def step__triggers_get(test, rg):
    test.cmd('az datashare trigger list '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Triggers/delete/Triggers_Delete
@try_manual
def step__triggers_delete_triggers_delete(test, rg):
    test.cmd('az datashare trigger delete -y '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--share-subscription-name "{myShareSubscription}" '
             '--name "{myTrigger}"',
             checks=[])


# EXAMPLE: /ShareSubscriptions/delete/ShareSubscriptions_Delete
@try_manual
def step__sharesubscriptions_delete(test, rg):
    test.cmd('az datashare share-subscription delete -y '
             '--account-name "{myAccount}" '
             '--resource-group "{rg}" '
             '--name "{myShareSubscription}"',
             checks=[])


# EXAMPLE: /Accounts/delete/Accounts_Delete
@try_manual
def step__accounts_delete_accounts_delete(test, rg):
    test.cmd('az datashare account delete -y '
             '--name "{myAccount}" '
             '--resource-group "{rg}"',
             checks=[])


# Env cleanup
@try_manual
def cleanup(test, rg):
    pass


# Testcase
@try_manual
def call_scenario(test, rg):
    setup(test, rg)
    step__accounts_put_accounts_create(test, rg)
    step__accounts_get_accounts_get(test, rg)
    step__accounts_get_accounts_listbyresourcegroup(test, rg)
    step__accounts_get_accounts_listbysubscription(test, rg)
    step__accounts_patch_accounts_update(test, rg)
    step__consumerinvitations_get(test, rg)
    step__consumerinvitations_post(test, rg)
    step__shares_put_shares_create(test, rg)
    step__consumerinvitations_get2(test, rg)
    step__datasets_put_datasets_kustodatabase_create(test, rg)
    step__datasets_put_datasets_kustocluster_create(test, rg)
    step__shares_get_shares_listbyaccount(test, rg)
    step__shares_post(test, rg)
    step__datasetmappings_put(test, rg)
    step__datasets_put_datasets_create(test, rg)
    step__datasets_put_datasets_sqldbtable_create(test, rg)
    step__datasets_put_datasets_sqldwtable_create(test, rg)
    step__datasetmappings_put2(test, rg)
    step__datasets_get_datasets_listbyshare(test, rg)
    step__datasets_get_datasets_get(test, rg)
    step__shares_post_shares_listsynchronizations(test, rg)
    step__invitations_put_invitations_create(test, rg)
    step__invitations_get_invitations_get(test, rg)
    step__invitations_get_invitations_listbyshare(test, rg)
    step__datasetmappings_put3(test, rg)
    step__invitations_delete_invitations_delete(test, rg)
    step__providersharesubscriptions_get(test, rg)
    step__datasetmappings_put_datasetmappings_create(test, rg)
    step__providersharesubscriptions_get2(test, rg)
    step__datasets_delete_datasets_delete(test, rg)
    step__shares_get_shares_get(test, rg)
    step__sharesubscriptions_put(test, rg)
    step__sharesubscriptions_post(test, rg)
    step__sharesubscriptions_post2(test, rg)
    step__sharesubscriptions_post3(test, rg)
    step__sharesubscriptions_post4(test, rg)
    step__sharesubscriptions_get(test, rg)
    step__datasetmappings_get(test, rg)
    step__sharesubscriptions_post5(test, rg)
    step__consumersourcedatasets_get(test, rg)
    step__datasetmappings_get_datasetmappings_get(test, rg)
    step__datasetmappings_delete(test, rg)
    step__providersharesubscriptions_post(test, rg)
    step__providersharesubscriptions_post2(test, rg)
    step__synchronizationsettings_put(test, rg)
    step__synchronizationsettings_get(test, rg)
    step__synchronizationsettings_get2(test, rg)
    step__synchronizationsettings_delete(test, rg)
    step__shares_delete_shares_delete(test, rg)
    step__sharesubscriptions_get2(test, rg)
    step__triggers_put_triggers_create(test, rg)
    step__triggers_get_triggers_get(test, rg)
    step__triggers_get(test, rg)
    step__triggers_delete_triggers_delete(test, rg)
    step__sharesubscriptions_delete(test, rg)
    step__accounts_delete_accounts_delete(test, rg)
    cleanup(test, rg)


@try_manual
class DataShareManagementClientScenarioTest(ScenarioTest):

    @ResourceGroupPreparer(name_prefix='clitestdatashare_SampleResourceGroup'[:7], key='rg', parameter_name='rg')
    def test_datashare(self, rg):

        self.kwargs.update({
            'subscription_id': self.get_subscription_id()
        })

        self.kwargs.update({
            'myAccount': 'Account1',
            'myShare': 'Share1',
            'myShareSubscription': 'ShareSubscription1',
            'myShareSubscription2': 'ShareSub1',
            'myShareSubscription3': 'Share1',
            'mySynchronizationSetting': 'SyncrhonizationSetting1',
            'mySynchronizationSetting2': 'Dataset1',
            'myTrigger': 'Trigger1',
            'myDataSet': 'Dataset1',
            'myDataSetMapping': 'DatasetMapping1',
            'myInvitation': 'Invitation1',
        })

        call_scenario(self, rg)
        calc_coverage(__file__)
        raise_if()
