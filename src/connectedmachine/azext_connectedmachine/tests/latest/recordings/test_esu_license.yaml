interactions:
- request:
    body: '{"location": "westus2", "properties": {"licenseDetails": {"edition": "Datacenter",
      "processors": 16, "state": "Activated", "target": "Windows Server 2012", "type":
      "pCore"}, "licenseType": "ESU"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - connectedmachine license create
      Connection:
      - keep-alive
      Content-Length:
      - '196'
      Content-Type:
      - application/json
      ParameterSetName:
      - --name --resource-group --location --license-type --state --target --edition
        --type --processors
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.1 Python/3.11.9 (Windows-10-10.0.26200-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense?api-version=2024-11-10-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense","name":"myESULicense","location":"westus2","type":"Microsoft.HybridCompute/licenses","properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","licenseType":"ESU","licenseDetails":{"state":"Activated","target":"Windows
        Server 2012","edition":"Datacenter","type":"pCore","processors":16,"assignedLicenses":8,"immutableId":"46834586-c302-4713-98a7-e3ce975b1ad8"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '509'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 07 Jan 2026 16:44:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=0cd46ea8-7371-4f65-9bb5-5de55bea6d52/eastus/e11ccbc8-f989-4e9e-a0d7-5ece569953f5
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 522E3A1434934B59A07E9F25A6DB8744 Ref B: MNZ221060609039 Ref C: 2026-01-07T16:44:56Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - connectedmachine license list
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.1 Python/3.11.9 (Windows-10-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.HybridCompute/licenses?api-version=2024-11-10-preview
  response:
    body:
      string: '{"value":[{"properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","licenseType":"ESU","licenseDetails":{"state":"Activated","target":"Windows
        Server 2012","edition":"Datacenter","type":"pCore","processors":16,"assignedLicenses":8,"immutableId":"46834586-c302-4713-98a7-e3ce975b1ad8"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense","name":"myESULicense","location":"westus2","type":"Microsoft.HybridCompute/licenses"},{"properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","licenseType":"ESU","licenseDetails":{"state":"Deactivated","target":"Windows
        Server 2012","edition":"Datacenter","type":"pCore","processors":16,"assignedLicenses":8,"immutableId":"2d5b6287-781c-4579-a7cb-6bd5368d166c"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dakirbytest/providers/Microsoft.HybridCompute/licenses/testLicense","name":"testLicense","location":"centraluseuap","type":"Microsoft.HybridCompute/licenses"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1039'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 07 Jan 2026 16:44:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - 2c31cc01-3fd2-4e83-893b-1499a2c9c947
      - 47df3b02-dc3a-44ef-a721-c9e7f95b9ff0
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: DD58501F0D924B94B51C0142BD6C8036 Ref B: BL2AA2011003060 Ref C: 2026-01-07T16:44:58Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - connectedmachine license show
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name --subscription
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.1 Python/3.11.9 (Windows-10-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense?api-version=2024-11-10-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense","name":"myESULicense","location":"westus2","type":"Microsoft.HybridCompute/licenses","properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","licenseType":"ESU","licenseDetails":{"state":"Activated","target":"Windows
        Server 2012","edition":"Datacenter","type":"pCore","processors":16,"assignedLicenses":8,"immutableId":"46834586-c302-4713-98a7-e3ce975b1ad8"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '509'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 07 Jan 2026 16:44:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 9703C25389FC40268DC311900BC50686 Ref B: MNZ221060609009 Ref C: 2026-01-07T16:44:59Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"licenseDetails": {"edition": "Datacenter", "processors":
      16, "state": "Deactivated", "target": "Windows Server 2012", "type": "pCore"},
      "licenseType": "ESU"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - connectedmachine license update
      Connection:
      - keep-alive
      Content-Length:
      - '175'
      Content-Type:
      - application/json
      ParameterSetName:
      - --name --resource-group --license-type --state --target --edition --type --processors
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.1 Python/3.11.9 (Windows-10-10.0.26200-SP0)
    method: PATCH
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense?api-version=2024-11-10-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense","name":"myESULicense","location":"westus2","type":"Microsoft.HybridCompute/licenses","properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","licenseType":"ESU","licenseDetails":{"state":"Deactivated","target":"Windows
        Server 2012","edition":"Datacenter","type":"pCore","processors":16,"assignedLicenses":8,"immutableId":"46834586-c302-4713-98a7-e3ce975b1ad8"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '511'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 07 Jan 2026 16:45:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=0cd46ea8-7371-4f65-9bb5-5de55bea6d52/eastus/875ebaee-c1f6-47e6-b068-350642e28a43
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 4212E413BC8B42959B16F5DC17AB0A7A Ref B: MNZ221060610051 Ref C: 2026-01-07T16:44:59Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - connectedmachine license delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -y --name --subscription --resource-group
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.1 Python/3.11.9 (Windows-10-10.0.26200-SP0)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ytongtest/providers/Microsoft.HybridCompute/licenses/myESULicense?api-version=2024-11-10-preview
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      content-type:
      - application/json
      date:
      - Wed, 07 Jan 2026 16:45:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=0cd46ea8-7371-4f65-9bb5-5de55bea6d52/centraluseuap/8f02e3dd-d19f-4950-a914-ee9e98fc6320
      x-ms-ratelimit-remaining-subscription-deletes:
      - '799'
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: ED1B7B0B8EDB4144939AC12842752EDB Ref B: MNZ221060608049 Ref C: 2026-01-07T16:45:01Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"productProfile": {"productFeatures":
      [{"name": "Hotpatch", "subscriptionStatus": "Enabled"}], "productType": "WindowsServer",
      "subscriptionStatus": "Enabled"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - connectedmachine license-profile create
      Connection:
      - keep-alive
      Content-Length:
      - '200'
      Content-Type:
      - application/json
      ParameterSetName:
      - --machine-name --resource-group --location --product-type --subscription-status
        --product-features
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.1 Python/3.11.9 (Windows-10-10.0.26200-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/PayGo_Test_CLI/providers/Microsoft.HybridCompute/machines/WIN-U57JFKURUK8/licenseProfiles/Default?api-version=2025-02-19-preview
  response:
    body:
      string: "{\"error\":{\"code\":\"HCRP400\",\"message\":\"Your Azure Arc Pay-As-You-Go
        Subscription operation for 'WindowsServer' isn\u2019t eligible. Reason: The
        Hybrid Compute machine is not connected to Azure. Please check your subscription
        details or contact support if you need assistance.\"}}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '272'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 07 Jan 2026 16:45:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 64DBD7E92EEE4957AF95F5C286FB3C99 Ref B: MNZ221060608021 Ref C: 2026-01-07T16:45:02Z'
    status:
      code: 400
      message: Bad Request
version: 1
