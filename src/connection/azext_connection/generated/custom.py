# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for
# license information.
#
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.
# --------------------------------------------------------------------------
# pylint: disable=too-many-lines

from knack.util import CLIError
from azure.cli.core.util import sdk_no_wait


def connection_linker_list(client,
                           resource_uri):
    return client.list(resource_uri=resource_uri)


def connection_linker_show(client,
                           resource_uri,
                           linker_name):
    return client.get(resource_uri=resource_uri,
                      linker_name=linker_name)


def connection_linker_create(client,
                             resource_uri,
                             linker_name,
                             target_id=None,
                             secret_auth_info=None,
                             user_assigned_identity_auth_info=None,
                             system_assigned_identity_auth_info=None,
                             service_principal_secret_auth_info=None,
                             service_principal_certificate_auth_info=None,
                             client_type=None,
                             no_wait=False):
    all_auth_info = []
    if secret_auth_info is not None:
        all_auth_info.append(secret_auth_info)
    if user_assigned_identity_auth_info is not None:
        all_auth_info.append(user_assigned_identity_auth_info)
    if system_assigned_identity_auth_info is not None:
        all_auth_info.append(system_assigned_identity_auth_info)
    if service_principal_secret_auth_info is not None:
        all_auth_info.append(service_principal_secret_auth_info)
    if service_principal_certificate_auth_info is not None:
        all_auth_info.append(service_principal_certificate_auth_info)
    if len(all_auth_info) > 1:
        raise CLIError('at most one of  secret_auth_info, user_assigned_identity_auth_info, '
                       'system_assigned_identity_auth_info, service_principal_secret_auth_info, '
                       'service_principal_certificate_auth_info is needed for auth_info!')
    auth_info = all_auth_info[0] if len(all_auth_info) == 1 else None
    parameters = {}
    parameters['target_id'] = target_id
    parameters['auth_info'] = auth_info
    parameters['client_type'] = client_type
    return sdk_no_wait(no_wait,
                       client.begin_create_or_update,
                       resource_uri=resource_uri,
                       linker_name=linker_name,
                       parameters=parameters)


def connection_linker_update(client,
                             resource_uri,
                             linker_name,
                             target_id=None,
                             secret_auth_info=None,
                             user_assigned_identity_auth_info=None,
                             system_assigned_identity_auth_info=None,
                             service_principal_secret_auth_info=None,
                             service_principal_certificate_auth_info=None,
                             client_type=None,
                             no_wait=False):
    all_auth_info = []
    if secret_auth_info is not None:
        all_auth_info.append(secret_auth_info)
    if user_assigned_identity_auth_info is not None:
        all_auth_info.append(user_assigned_identity_auth_info)
    if system_assigned_identity_auth_info is not None:
        all_auth_info.append(system_assigned_identity_auth_info)
    if service_principal_secret_auth_info is not None:
        all_auth_info.append(service_principal_secret_auth_info)
    if service_principal_certificate_auth_info is not None:
        all_auth_info.append(service_principal_certificate_auth_info)
    if len(all_auth_info) > 1:
        raise CLIError('at most one of  secret_auth_info, user_assigned_identity_auth_info, '
                       'system_assigned_identity_auth_info, service_principal_secret_auth_info, '
                       'service_principal_certificate_auth_info is needed for auth_info!')
    auth_info = all_auth_info[0] if len(all_auth_info) == 1 else None
    parameters = {}
    parameters['target_id'] = target_id
    parameters['auth_info'] = auth_info
    parameters['client_type'] = client_type
    return sdk_no_wait(no_wait,
                       client.begin_update,
                       resource_uri=resource_uri,
                       linker_name=linker_name,
                       parameters=parameters)


def connection_linker_delete(client,
                             resource_uri,
                             linker_name):
    return client.delete(resource_uri=resource_uri,
                         linker_name=linker_name)


def connection_linker_list_configuration(client,
                                         resource_uri,
                                         linker_name):
    return client.list_configurations(resource_uri=resource_uri,
                                      linker_name=linker_name)


def connection_linker_validate_linker(client,
                                      resource_uri,
                                      linker_name):
    return client.validate_linker(resource_uri=resource_uri,
                                  linker_name=linker_name)
