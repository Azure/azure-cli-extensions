// Env
param containerAppEnvName string
param location string

param workloadProfileName string
param workloadProfileType string

module containerAppEnv 'environment.bicep' = {
  name: 'containerAppEnvDeployment'
  params: {
    containerAppEnvName: containerAppEnvName
    location: location
    workloadProfileName: workloadProfileName
    workloadProfileType: workloadProfileType
  }
}

{% for app in data.apps %}
module {{ app.name }} 'app-{{ app.name }}.bicep' = {
  name: '{{ app.name }}'
  params: {
    containerAppEnvId: containerAppEnv.outputs.containerAppEnvId
  }
}
{% endfor %}