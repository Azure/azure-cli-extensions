// Params
param workloadProfileName string
param workloadProfileType string
param minNodes int
param maxNodes int

module containerAppEnv 'environment.bicep' = {
  name: 'containerAppEnvDeployment'
  params: {
    workloadProfileName: workloadProfileName
    workloadProfileType: workloadProfileType
    minNodes: minNodes
    maxNodes: maxNodes
  }
}

{% for item in data.apps %}
module {{ item.moduleName }} '{{ item.templateName }}' = {
  name: '{{ item.appName }}'
  params: {
    containerAppEnvId: containerAppEnv.outputs.containerAppEnvId
  }
}
{% endfor %}