# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for
# license information.
#
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.
# --------------------------------------------------------------------------

import os
from azure.cli.testsdk import ScenarioTest
from .. import try_manual, raise_if, calc_coverage
from azure.cli.testsdk import ResourceGroupPreparer


TEST_DIR = os.path.abspath(os.path.join(os.path.abspath(__file__), '..'))


# Env setup
@try_manual
def setup(test, rg_2, rg_4, rg, rg_3):
    pass


# EXAMPLE: /Projects/put/Projects_Create
@try_manual
def step__projects_put_projects_create(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project create '
             '--e-tag "" '
             '--location "West Europe" '
             '--properties assessment-solution-id="/subscriptions/{subscription_id}/resourcegroups/{rg_2}/providers/mic'
             'rosoft.migrate/migrateprojects/abgoyalweselfhost/Solutions/Servers-Assessment-ServerAssessment" '
             'customer-workspace-id=null customer-workspace-location=null project-status="Active" '
             '--tags "{{}}" '
             '--name "{myProject2}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("eTag", "", case_sensitive=False),
                 test.check("location", "West Europe", case_sensitive=False),
                 test.check("tags.", {}),
                 test.check("name", "{myProject2}", case_sensitive=False),
             ])


# EXAMPLE: /Projects/get/AssessmentOptions_Get
@try_manual
def step__projects_get_assessmentoptions_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project assessment-option '
             '--assessment-options-name "default" '
             '--name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Projects/get/AssessmentOptions_Get
@try_manual
def step__projects_get_assessmentoptions_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project assessment-option '
             '--assessment-options-name "default" '
             '--name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Projects/get/Projects_Get
@try_manual
def step__projects_get_projects_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project show '
             '--name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Projects/get/Projects_List
@try_manual
def step__projects_get_projects_list(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project list '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Projects/get/Projects_List
@try_manual
def step__projects_get_projects_list(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project list '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Projects/patch/Projects_Update
@try_manual
def step__projects_patch_projects_update(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project update '
             '--e-tag "" '
             '--location "West Europe" '
             '--properties assessment-solution-id="/subscriptions/{subscription_id}/resourcegroups/{rg_2}/providers/mic'
             'rosoft.migrate/migrateprojects/abgoyalweselfhost/Solutions/Servers-Assessment-ServerAssessment" '
             'customer-workspace-id=null customer-workspace-location=null project-status="Active" '
             '--tags "{{}}" '
             '--name "{myProject2}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("eTag", "", case_sensitive=False),
                 test.check("location", "West Europe", case_sensitive=False),
                 test.check("tags.", {}),
                 test.check("name", "{myProject2}", case_sensitive=False),
             ])


# EXAMPLE: /Groups/post/Groups_UpdateMachines
@try_manual
def step__groups_post_groups_updatemachines(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate group update-machine '
             '--e-tag "\\"1e000c2c-0000-0d00-0000-5cdaa4190000\\"" '
             '--properties machines="/subscriptions/{subscription_id}/resourceGroups/{rg_2}/providers/Microsoft.Migrate'
             '/assessmentprojects/{{myProject}}/machines/{myMachine2}" operation-type="Add" '
             '--name "{myGroup2}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Groups/get/Groups_ListByProject
@try_manual
def step__groups_get_groups_listbyproject(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate group list '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Assessments/put/Assessments_Create
@try_manual
def step__assessments_put_assessments_create(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessment create '
             '--e-tag "\\"1e000c2c-0000-0d00-0000-5cdaa4190000\\"" '
             '--azure-disk-type "StandardOrPremium" '
             '--azure-hybrid-use-benefit "Yes" '
             '--azure-location "NorthEurope" '
             '--azure-offer-code "MSAZR0003P" '
             '--azure-pricing-tier "Standard" '
             '--azure-storage-redundancy "LocallyRedundant" '
             '--azure-vm-families "Dv2_series" '
             '--azure-vm-families "F_series" '
             '--azure-vm-families "Dv3_series" '
             '--azure-vm-families "DS_series" '
             '--azure-vm-families "DSv2_series" '
             '--azure-vm-families "Fs_series" '
             '--azure-vm-families "Dsv3_series" '
             '--azure-vm-families "Ev3_series" '
             '--azure-vm-families "Esv3_series" '
             '--azure-vm-families "D_series" '
             '--azure-vm-families "M_series" '
             '--azure-vm-families "Fsv2_series" '
             '--azure-vm-families "H_series" '
             '--currency "USD" '
             '--discount-percentage 100 '
             '--percentile "Percentile95" '
             '--reserved-instance "RI3Year" '
             '--scaling-factor 1 '
             '--sizing-criterion "PerformanceBased" '
             '--stage "InProgress" '
             '--time-range "Day" '
             '--vm-uptime days-per-month=31 hours-per-day=24 '
             '--name "{myAssessment2}" '
             '--group-name "{myGroup2}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("eTag", "\"1e000c2c-0000-0d00-0000-5cdaa4190000\"", case_sensitive=False),
                 test.check("azureDiskType", "StandardOrPremium", case_sensitive=False),
                 test.check("azureHybridUseBenefit", "Yes", case_sensitive=False),
                 test.check("azureLocation", "NorthEurope", case_sensitive=False),
                 test.check("azureOfferCode", "MSAZR0003P", case_sensitive=False),
                 test.check("azurePricingTier", "Standard", case_sensitive=False),
                 test.check("azureStorageRedundancy", "LocallyRedundant", case_sensitive=False),
                 test.check("currency", "USD", case_sensitive=False),
                 test.check("percentile", "Percentile95", case_sensitive=False),
                 test.check("reservedInstance", "RI3Year", case_sensitive=False),
                 test.check("scalingFactor", 1),
                 test.check("sizingCriterion", "PerformanceBased", case_sensitive=False),
                 test.check("stage", "InProgress", case_sensitive=False),
                 test.check("timeRange", "Day", case_sensitive=False),
                 test.check("vmUptime.daysPerMonth", 31),
                 test.check("vmUptime.hoursPerDay", 24),
                 test.check("name", "{myAssessment2}", case_sensitive=False),
             ])


# EXAMPLE: /Assessments/get/Assessments_ListByGroup
@try_manual
def step__assessments_get_assessments_listbygroup(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessment list '
             '--group-name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Assessments/get/Assessments_ListByProject
@try_manual
def step__assessments_get_assessments_listbyproject(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessment list '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /Assessments/post/Assessments_GetReportDownloadUrl
@try_manual
def step__assessments_post(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessment get-report-download-url '
             '--name "{myAssessment}" '
             '--group-name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /AssessedMachines/get/AssessedMachines_Get
@try_manual
def step__assessedmachines_get_assessedmachines_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessed-machine show '
             '--name "{myAssessedMachine}" '
             '--assessment-name "{myAssessment}" '
             '--group-name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /AssessedMachines/get/AssessedMachines_ListByAssessment
@try_manual
def step__assessedmachines_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessed-machine list '
             '--assessment-name "{myAssessment}" '
             '--group-name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /HyperVCollectors/put/HyperVCollectors_Create
@try_manual
def step__hypervcollectors_put_hypervcollectors_create(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate hyper-v-collector create '
             '--e-tag "\\"00000981-0000-0300-0000-5d74cd5f0000\\"" '
             '--agent-properties-spn-details application-id="827f1053-44dc-439f-b832-05416dcce12b" '
             'audience="https://72f988bf-86f1-41af-91ab-2d7cd011db47/migrateprojectce73agentauthaadapp" '
             'authority="https://login.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47" '
             'object-id="be75098e-c0fc-4ac4-98c7-282ebbcf8370" tenant-id="72f988bf-86f1-41af-91ab-2d7cd011db47" '
             '--discovery-site-id "/subscriptions/{subscription_id}/resourceGroups/{rg_4}/providers/Microsoft.OffAzure/'
             'HyperVSites/migrateprojectce73site" '
             '--name "{myHyperVCollector}" '
             '--project-name "{myProject3}" '
             '--resource-group "{rg_3}"',
             checks=[
                 test.check("eTag", "\"00000981-0000-0300-0000-5d74cd5f0000\"", case_sensitive=False),
                 test.check("agentProperties.spnDetails.applicationId", "827f1053-44dc-439f-b832-05416dcce12b",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.audience", "https://72f988bf-86f1-41af-91ab-2d7cd011db47/migrat"
                            "eprojectce73agentauthaadapp", case_sensitive=False),
                 test.check("agentProperties.spnDetails.authority", "https://login.windows.net/72f988bf-86f1-41af-91ab-"
                            "2d7cd011db47", case_sensitive=False),
                 test.check("agentProperties.spnDetails.objectId", "be75098e-c0fc-4ac4-98c7-282ebbcf8370",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.tenantId", "72f988bf-86f1-41af-91ab-2d7cd011db47",
                            case_sensitive=False),
                 test.check("discoverySiteId", "/subscriptions/{subscription_id}/resourceGroups/{rg_4}/providers/Micros"
                            "oft.OffAzure/HyperVSites/migrateprojectce73site", case_sensitive=False),
                 test.check("name", "{myHyperVCollector}", case_sensitive=False),
             ])


# EXAMPLE: /HyperVCollectors/get/HyperVCollectors_Get
@try_manual
def step__hypervcollectors_get_hypervcollectors_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate hyper-v-collector show '
             '--name "{myHyperVCollector}" '
             '--project-name "{myProject3}" '
             '--resource-group "{rg_3}"',
             checks=[
                 test.check("eTag", "\"00000981-0000-0300-0000-5d74cd5f0000\"", case_sensitive=False),
                 test.check("agentProperties.spnDetails.applicationId", "827f1053-44dc-439f-b832-05416dcce12b",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.audience", "https://72f988bf-86f1-41af-91ab-2d7cd011db47/migrat"
                            "eprojectce73agentauthaadapp", case_sensitive=False),
                 test.check("agentProperties.spnDetails.authority", "https://login.windows.net/72f988bf-86f1-41af-91ab-"
                            "2d7cd011db47", case_sensitive=False),
                 test.check("agentProperties.spnDetails.objectId", "be75098e-c0fc-4ac4-98c7-282ebbcf8370",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.tenantId", "72f988bf-86f1-41af-91ab-2d7cd011db47",
                            case_sensitive=False),
                 test.check("discoverySiteId", "/subscriptions/{subscription_id}/resourceGroups/{rg_4}/providers/Micros"
                            "oft.OffAzure/HyperVSites/migrateprojectce73site", case_sensitive=False),
                 test.check("name", "{myHyperVCollector}", case_sensitive=False),
             ])


# EXAMPLE: /HyperVCollectors/get/HyperVCollectors_ListByProject
@try_manual
def step__hypervcollectors_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate hyper-v-collector list '
             '--project-name "{myProject3}" '
             '--resource-group "{rg_3}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /HyperVCollectors/delete/HyperVCollectors_Delete
@try_manual
def step__hypervcollectors_delete(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate hyper-v-collector delete -y '
             '--name "{myHyperVCollector}" '
             '--project-name "{myProject3}" '
             '--resource-group "{rg_3}"',
             checks=[])


# EXAMPLE: /Machines/get/Machines_Get
@try_manual
def step__machines_get_machines_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate machine show '
             '--name "{myMachine}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Machines/get/Machines_ListByProject
@try_manual
def step__machines_get_machines_listbyproject(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate machine list '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Groups/put/Groups_Create
@try_manual
def step__groups_put_groups_create(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate group create '
             '--e-tag "\\"1e000c2c-0000-0d00-0000-5cdaa4190000\\"" '
             '--name "{myGroup2}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("eTag", "\"1e000c2c-0000-0d00-0000-5cdaa4190000\"", case_sensitive=False),
                 test.check("name", "{myGroup2}", case_sensitive=False),
             ])


# EXAMPLE: /Groups/get/Groups_Get
@try_manual
def step__groups_get_groups_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate group show '
             '--name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Assessments/get/Assessments_Get
@try_manual
def step__assessments_get_assessments_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessment show '
             '--name "{myAssessment}" '
             '--group-name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check("name", "{myAssessment}", case_sensitive=False),
             ])


# EXAMPLE: /Assessments/delete/Assessments_Delete
@try_manual
def step__assessments_delete_assessments_delete(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate assessment delete -y '
             '--name "{myAssessment}" '
             '--group-name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /Groups/delete/Groups_Delete
@try_manual
def step__groups_delete_groups_delete(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate group delete -y '
             '--name "{myGroup}" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[])


# EXAMPLE: /VMwareCollectors/put/VMwareCollectors_Create
@try_manual
def step__vmwarecollectors_put_vmwarecollectors_create(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate v-mware-collector create '
             '--e-tag "\\"01003d32-0000-0d00-0000-5d74d2e50000\\"" '
             '--agent-properties-spn-details application-id="fc717575-8173-4b21-92a5-658b655e613e" '
             'audience="https://72f988bf-86f1-41af-91ab-2d7cd011db47/PortalvCenterbc2fagentauthaadapp" '
             'authority="https://login.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47" '
             'object-id="29d94f38-db94-4980-aec0-0cfd55ab1cd0" tenant-id="72f988bf-86f1-41af-91ab-2d7cd011db47" '
             '--discovery-site-id "/subscriptions/{subscription_id}/resourceGroups/{rg}/providers/Microsoft.OffAzure/VM'
             'wareSites/PortalvCenterbc2fsite" '
             '--project-name "{myProject}" '
             '--resource-group "{rg}" '
             '--name "{myVMwareCollector}"',
             checks=[
                 test.check("eTag", "\"01003d32-0000-0d00-0000-5d74d2e50000\"", case_sensitive=False),
                 test.check("agentProperties.spnDetails.applicationId", "fc717575-8173-4b21-92a5-658b655e613e",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.audience", "https://72f988bf-86f1-41af-91ab-2d7cd011db47/Portal"
                            "vCenterbc2fagentauthaadapp", case_sensitive=False),
                 test.check("agentProperties.spnDetails.authority", "https://login.windows.net/72f988bf-86f1-41af-91ab-"
                            "2d7cd011db47", case_sensitive=False),
                 test.check("agentProperties.spnDetails.objectId", "29d94f38-db94-4980-aec0-0cfd55ab1cd0",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.tenantId", "72f988bf-86f1-41af-91ab-2d7cd011db47",
                            case_sensitive=False),
                 test.check("discoverySiteId", "/subscriptions/{subscription_id}/resourceGroups/{rg}/providers/Microsof"
                            "t.OffAzure/VMwareSites/PortalvCenterbc2fsite", case_sensitive=False),
                 test.check("name", "{myVMwareCollector}", case_sensitive=False),
             ])


# EXAMPLE: /VMwareCollectors/get/VMwareCollectors_Get
@try_manual
def step__vmwarecollectors_get_vmwarecollectors_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate v-mware-collector show '
             '--project-name "{myProject}" '
             '--resource-group "{rg}" '
             '--name "{myVMwareCollector}"',
             checks=[
                 test.check("eTag", "\"01003d32-0000-0d00-0000-5d74d2e50000\"", case_sensitive=False),
                 test.check("agentProperties.spnDetails.applicationId", "fc717575-8173-4b21-92a5-658b655e613e",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.audience", "https://72f988bf-86f1-41af-91ab-2d7cd011db47/Portal"
                            "vCenterbc2fagentauthaadapp", case_sensitive=False),
                 test.check("agentProperties.spnDetails.authority", "https://login.windows.net/72f988bf-86f1-41af-91ab-"
                            "2d7cd011db47", case_sensitive=False),
                 test.check("agentProperties.spnDetails.objectId", "29d94f38-db94-4980-aec0-0cfd55ab1cd0",
                            case_sensitive=False),
                 test.check("agentProperties.spnDetails.tenantId", "72f988bf-86f1-41af-91ab-2d7cd011db47",
                            case_sensitive=False),
                 test.check("discoverySiteId", "/subscriptions/{subscription_id}/resourceGroups/{rg}/providers/Microsof"
                            "t.OffAzure/VMwareSites/PortalvCenterbc2fsite", case_sensitive=False),
                 test.check("name", "{myVMwareCollector}", case_sensitive=False),
             ])


# EXAMPLE: /VMwareCollectors/get/VMwareCollectors_ListByProject
@try_manual
def step__vmwarecollectors_get(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate v-mware-collector list '
             '--project-name "{myProject}" '
             '--resource-group "{rg}"',
             checks=[
                 test.check('length(@)', 1),
             ])


# EXAMPLE: /VMwareCollectors/delete/VMwareCollectors_Delete
@try_manual
def step__vmwarecollectors_delete(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate v-mware-collector delete -y '
             '--project-name "{myProject}" '
             '--resource-group "{rg}" '
             '--name "{myVMwareCollector}"',
             checks=[])


# EXAMPLE: /Projects/delete/Projects_Delete
@try_manual
def step__projects_delete_projects_delete(test, rg_2, rg_4, rg, rg_3):
    test.cmd('az migrate project delete -y '
             '--name "{myProject2}" '
             '--resource-group "{rg}"',
             checks=[])


# Env cleanup
@try_manual
def cleanup(test, rg_2, rg_4, rg, rg_3):
    pass


# Testcase
@try_manual
def call_scenario(test, rg_2, rg_4, rg, rg_3):
    setup(test, rg_2, rg_4, rg, rg_3)
    step__projects_put_projects_create(test, rg_2, rg_4, rg, rg_3)
    step__projects_get_assessmentoptions_get(test, rg_2, rg_4, rg, rg_3)
    step__projects_get_assessmentoptions_get(test, rg_2, rg_4, rg, rg_3)
    step__projects_get_projects_get(test, rg_2, rg_4, rg, rg_3)
    step__projects_get_projects_list(test, rg_2, rg_4, rg, rg_3)
    step__projects_get_projects_list(test, rg_2, rg_4, rg, rg_3)
    step__projects_patch_projects_update(test, rg_2, rg_4, rg, rg_3)
    step__groups_post_groups_updatemachines(test, rg_2, rg_4, rg, rg_3)
    step__groups_get_groups_listbyproject(test, rg_2, rg_4, rg, rg_3)
    step__assessments_put_assessments_create(test, rg_2, rg_4, rg, rg_3)
    step__assessments_get_assessments_listbygroup(test, rg_2, rg_4, rg, rg_3)
    step__assessments_get_assessments_listbyproject(test, rg_2, rg_4, rg, rg_3)
    step__assessments_post(test, rg_2, rg_4, rg, rg_3)
    step__assessedmachines_get_assessedmachines_get(test, rg_2, rg_4, rg, rg_3)
    step__assessedmachines_get(test, rg_2, rg_4, rg, rg_3)
    step__hypervcollectors_put_hypervcollectors_create(test, rg_2, rg_4, rg, rg_3)
    step__hypervcollectors_get_hypervcollectors_get(test, rg_2, rg_4, rg, rg_3)
    step__hypervcollectors_get(test, rg_2, rg_4, rg, rg_3)
    step__hypervcollectors_delete(test, rg_2, rg_4, rg, rg_3)
    step__machines_get_machines_get(test, rg_2, rg_4, rg, rg_3)
    step__machines_get_machines_listbyproject(test, rg_2, rg_4, rg, rg_3)
    step__groups_put_groups_create(test, rg_2, rg_4, rg, rg_3)
    step__groups_get_groups_get(test, rg_2, rg_4, rg, rg_3)
    step__assessments_get_assessments_get(test, rg_2, rg_4, rg, rg_3)
    step__assessments_delete_assessments_delete(test, rg_2, rg_4, rg, rg_3)
    step__groups_delete_groups_delete(test, rg_2, rg_4, rg, rg_3)
    step__vmwarecollectors_put_vmwarecollectors_create(test, rg_2, rg_4, rg, rg_3)
    step__vmwarecollectors_get_vmwarecollectors_get(test, rg_2, rg_4, rg, rg_3)
    step__vmwarecollectors_get(test, rg_2, rg_4, rg, rg_3)
    step__vmwarecollectors_delete(test, rg_2, rg_4, rg, rg_3)
    step__projects_delete_projects_delete(test, rg_2, rg_4, rg, rg_3)
    cleanup(test, rg_2, rg_4, rg, rg_3)


@try_manual
class AzureMigrateV2ScenarioTest(ScenarioTest):

    @ResourceGroupPreparer(name_prefix='clitestmigrate_abgoyal-westeurope'[:7], key='rg_2', parameter_name='rg_2')
    @ResourceGroupPreparer(name_prefix='clitestmigrate_ContosoITHyperV'[:7], key='rg_4', parameter_name='rg_4')
    @ResourceGroupPreparer(name_prefix='clitestmigrate_abgoyal-westEurope'[:7], key='rg', parameter_name='rg')
    @ResourceGroupPreparer(name_prefix='clitestmigrate_contosoithyperv'[:7], key='rg_3', parameter_name='rg_3')
    def test_migrate(self, rg_2, rg_4, rg, rg_3):

        self.kwargs.update({
            'subscription_id': self.get_subscription_id()
        })

        self.kwargs.update({
            'myProject': 'abgoyalWEselfhostb72bproject',
            'myProject2': 'abGoyalProject2',
            'myProject3': 'migrateprojectce73project',
            'myMachine2': 'amansing_vm1',
            'myMachine': '269ef295-a38d-4f8f-9779-77ce79088311',
            'myGroup': 'Test1',
            'myGroup2': 'Group2',
            'myAssessment': 'assessment_5_9_2019_16_22_14',
            'myAssessment2': 'assessment_5_14_2019_16_48_47',
            'myAssessedMachine': 'f57fe432-3bd2-486a-a83a-6f4d99f1a952',
            'myHyperVCollector': 'migrateprojectce73collector',
            'myVMwareCollector': 'PortalvCenterbc2fcollector',
        })

        call_scenario(self, rg_2, rg_4, rg, rg_3)
        calc_coverage(__file__)
        raise_if()
